{"version":3,"file":"index.mjs","sources":["src/components/DefaultEventRootComponent.tsx","src/utils/createPageMapCoordsToContainer.ts","src/hooks/useClickAndDrag.ts","src/hooks/useMousetrap.ts","src/utils/getSpan.ts","src/utils/createGrid.ts","src/utils/cellToDate.ts","src/utils/createMapCellInfoToRecurringTimeRange.ts","src/utils/createMapDateRangeToCells.ts","src/utils/getEarliestTimeRange.ts","src/components/Cell.tsx","src/context.ts","src/utils/getTextForDateRange.ts","src/components/EventContent.tsx","src/components/RangeBox.tsx","src/components/Schedule.tsx","src/components/IndicatorLine.tsx","src/components/TimeIndicator.tsx","src/components/TimeGridScheduler.tsx"],"sourcesContent":["import React from 'react';\nimport { EventRootProps } from '../types';\n\nexport const DefaultEventRootComponent = React.memo(\n  React.forwardRef<any, EventRootProps>(function DefaultEventRootComponent(\n    {\n      isActive,\n      handleDelete,\n      cellIndex,\n      classes,\n      disabled,\n      ranges,\n      rangeIndex,\n      meetingDuration,\n      onChange,\n      ...props\n    },\n    ref,\n  ) {\n    return <div ref={ref} aria-disabled={disabled} {...props} />;\n  }),\n);\n\nDefaultEventRootComponent.displayName = 'DefaultEventRootComponent';\n","export const createPageMapCoordsToContainer = (container: HTMLElement) => {\n  return (event: React.MouseEvent | MouseEvent | TouchEvent) => {\n    let clientX: number;\n    let clientY: number;\n    let pageX: number;\n    let pageY: number;\n\n    if ('changedTouches' in event) {\n      ({ clientX, clientY, pageX, pageY } = event.changedTouches[0]);\n    } else {\n      ({ clientX, clientY, pageX, pageY } = event);\n    }\n    const { top, left } = container.getBoundingClientRect();\n\n    return {\n      clientX,\n      clientY,\n      pageX,\n      pageY,\n      top,\n      left,\n      x: clientX - left,\n      y: clientY - top,\n    };\n  };\n};\n","import React, { useCallback, useEffect, useState } from 'react';\nimport { fromEvent, merge, Observable, of } from 'rxjs';\nimport {\n  delay,\n  filter,\n  map,\n  mergeMap,\n  startWith,\n  takeUntil,\n  tap,\n} from 'rxjs/operators';\nimport { Rect } from '../types';\nimport { createPageMapCoordsToContainer } from '../utils/createPageMapCoordsToContainer';\n\nconst prevent = tap((e: TouchEvent) => {\n  e.preventDefault();\n  e.stopPropagation();\n});\n\nexport function useClickAndDrag(\n  ref: React.RefObject<HTMLElement>,\n  isDisabled?: boolean,\n) {\n  const [style, setStyle] = useState<React.CSSProperties>({\n    transform: 'translate(0, 0)',\n    width: 0,\n    height: 0,\n  });\n  const [box, setBox] = useState<Rect | null>(null);\n  const [isDragging, setIsDragging] = useState(false);\n  const [hasFinishedDragging, setHasFinishedDragging] = useState(false);\n  const container = ref.current;\n\n  useEffect(() => {\n    if (!container || isDisabled) {\n      return;\n    }\n\n    const mapCoordsToContainer = createPageMapCoordsToContainer(container);\n\n    const touchMove$ = fromEvent<TouchEvent>(window, 'touchmove', {\n      passive: false,\n    }).pipe(prevent);\n\n    const touchEnd$ = fromEvent<TouchEvent>(window, 'touchend', {\n      passive: true,\n    });\n\n    const touchStart$ = fromEvent<TouchEvent>(container, 'touchstart', {\n      passive: false,\n    });\n\n    const touchStartWithDelay$ = touchStart$.pipe(\n      mergeMap(start =>\n        of(start).pipe(delay(300), takeUntil(touchMove$), prevent),\n      ),\n    );\n\n    const mouseDown$ = fromEvent<MouseEvent>(container, 'mousedown', {\n      passive: true,\n    }).pipe(filter(event => event.which === 1));\n\n    const mouseMove$ = fromEvent<MouseEvent>(window, 'mousemove', {\n      passive: true,\n    });\n\n    const mouseUp$ = fromEvent<MouseEvent>(window, 'mouseup', {\n      passive: true,\n    });\n\n    const dragStart$ = merge(mouseDown$, touchStartWithDelay$).pipe(\n      map(mapCoordsToContainer),\n    );\n\n    const dragEnd$ = merge(mouseUp$, touchEnd$).pipe(\n      map(mapCoordsToContainer),\n      tap(() => {\n        setIsDragging(false);\n        setHasFinishedDragging(true);\n      }),\n    );\n\n    const move$ = merge(mouseMove$, touchMove$).pipe(map(mapCoordsToContainer));\n\n    const box$: Observable<Rect | null> = dragStart$.pipe(\n      tap(() => {\n        setIsDragging(true);\n        setHasFinishedDragging(false);\n      }),\n      mergeMap(down => {\n        return move$.pipe(\n          startWith(down),\n          map(\n            (move): Rect => {\n              const startX = Math.max(down.x, 0);\n              const startY = Math.max(down.y, 0);\n              const endX = Math.min(move.x, container.scrollWidth);\n              const endY = Math.min(move.y, container.scrollHeight);\n              const top = Math.min(startY, endY);\n              const bottom = Math.max(startY, endY);\n              const left = Math.min(startX, endX);\n              const right = Math.max(startX, endX);\n              const source = '';\n              const title = '';\n\n              return {\n                startX,\n                startY,\n                endX,\n                endY,\n                top,\n                bottom,\n                left,\n                right,\n                width: right - left,\n                height: bottom - top,\n                source,\n                title,\n              };\n            },\n          ),\n          takeUntil(dragEnd$),\n        );\n      }),\n      map(rect => {\n        return rect.width === 0 && rect.height === 0 ? null : rect;\n      }),\n    );\n\n    const style$ = box$.pipe(\n      map(rect => {\n        if (rect !== null) {\n          const { width, height, left, top } = rect;\n          return {\n            transform: `translate(${left}px, ${top}px)`,\n            width,\n            height,\n          };\n        }\n\n        return { display: 'none' };\n      }),\n    );\n\n    const boxSubscriber = box$.subscribe(setBox);\n    const styleSubscriber = style$.subscribe(setStyle);\n\n    return () => {\n      boxSubscriber.unsubscribe();\n      styleSubscriber.unsubscribe();\n    };\n  }, [container, isDisabled]);\n\n  const cancel = useCallback(() => {\n    setIsDragging(false);\n    setHasFinishedDragging(false);\n    setBox(null);\n  }, []);\n\n  return { style, box, isDragging, cancel, hasFinishedDragging };\n}\n","import Mousetrap, { ExtendedKeyboardEvent } from 'mousetrap';\nimport { useEffect, useRef } from 'react';\n\n/**\n * Use mousetrap hook\n *\n * @param handlerKey - A key, key combo or array of combos according to Mousetrap documentation.\n * @param  handlerCallback - A function that is triggered on key combo catch.\n */\nexport function useMousetrap(\n  handlerKey: string | string[],\n  handlerCallback: (e: ExtendedKeyboardEvent, combo: string) => void,\n  elementOrElementRef: typeof document | React.RefObject<Element | null>,\n) {\n  const actionRef = useRef<typeof handlerCallback | null>(null);\n  actionRef.current = handlerCallback;\n  const element =\n    'current' in elementOrElementRef ? elementOrElementRef.current : document;\n\n  useEffect(() => {\n    const instance = new Mousetrap(element as Element);\n\n    instance.bind(handlerKey, (e, combo) => {\n      typeof actionRef.current === 'function' && actionRef.current(e, combo);\n    });\n\n    return () => {\n      instance.unbind(handlerKey);\n    };\n  }, [handlerKey, element]);\n}\n","export const getSpan = (x1: number, x2: number) => 1 + Math.abs(x2 - x1);\n","import clamp from 'lodash/clamp';\nimport floor from 'lodash/floor';\nimport round from 'lodash/round';\nimport { CellInfo, Grid, Rect } from '../types';\nimport { getSpan } from './getSpan';\n\nexport const createGrid = ({\n  totalHeight,\n  totalWidth,\n  numVerticalCells,\n  numHorizontalCells,\n}: {\n  totalHeight: number;\n  totalWidth: number;\n  numVerticalCells: number;\n  numHorizontalCells: number;\n}): Grid => {\n  const cellHeight = totalHeight / numVerticalCells;\n  const cellWidth = totalWidth / numHorizontalCells;\n\n  return {\n    totalHeight,\n    totalWidth,\n    numVerticalCells,\n    numHorizontalCells,\n    cellWidth,\n    cellHeight,\n\n    getRectFromCell(data: CellInfo) {\n      const { endX, startX, endY, startY, spanX, spanY, source, title } = data;\n      const bottom = endY * this.cellHeight;\n      const top = startY * this.cellHeight;\n      const left = startX * this.cellWidth;\n      const right = endX * this.cellWidth;\n      const height = spanY * this.cellHeight;\n      const width = spanX * this.cellWidth;\n\n      return {\n        bottom,\n        top,\n        left,\n        right,\n        height,\n        width,\n        source,\n        title,\n\n        // @TODO: check the math\n        startX: startX * this.cellWidth,\n        endX: endX * this.cellWidth,\n        startY: startY * this.cellHeight,\n        endY: endY * this.cellHeight,\n      };\n    },\n\n    getCellFromRect(data: Rect) {\n      const startX = clamp(\n        floor(data.left / this.cellWidth),\n        0,\n        numHorizontalCells - 1,\n      );\n      const startY = clamp(\n        round(data.top / this.cellHeight),\n        0,\n        numVerticalCells - 1,\n      );\n      const endX = clamp(\n        floor(data.right / this.cellWidth),\n        0,\n        numHorizontalCells - 1,\n      );\n      const endY = clamp(\n        round(data.bottom / this.cellHeight),\n        0,\n        numVerticalCells - 1,\n      );\n      const spanX = clamp(getSpan(startX, endX), 1, numHorizontalCells);\n      const spanY = clamp(getSpan(startY, endY), 1, numVerticalCells);\n      const source = data.source;\n      const title = data.title;\n\n      return {\n        spanX,\n        spanY,\n        startX,\n        startY,\n        endX,\n        endY,\n        source,\n        title,\n      };\n    },\n  };\n};\n","import addDays from 'date-fns/add_days';\nimport addMinutes from 'date-fns/add_minutes';\n\nexport const cellToDate = ({\n  startX,\n  startY,\n  toMin,\n  originDate,\n}: {\n  startX: number;\n  startY: number;\n  toMin: (y: number) => number;\n  toDay: (x: number) => number;\n  originDate: Date;\n}) => addMinutes(addDays(originDate, startX), toMin(startY));\n","import addMinutes from 'date-fns/add_minutes';\nimport compareAsc from 'date-fns/compare_asc';\nimport endOfDay from 'date-fns/end_of_day';\nimport isBefore from 'date-fns/is_before';\nimport min from 'date-fns/min';\nimport range from 'lodash/range';\nimport { DateRange, MapCellInfoToDateRange } from '../types';\nimport { cellToDate } from './cellToDate';\n\nexport type RecurringTimeRange = DateRange[];\n\nexport const createMapCellInfoToRecurringTimeRange: MapCellInfoToDateRange = ({\n  fromY: toMin,\n  fromX: toDay,\n  originDate,\n}) => ({ startX, startY, endX, spanY, source, title }) => {\n  const result = range(startX, endX + 1)\n    .map(i => {\n      const startDate = cellToDate({\n        startX: i,\n        startY,\n        toMin,\n        toDay,\n        originDate,\n      });\n      let endDate = min(\n        addMinutes(startDate, toMin(spanY)),\n        endOfDay(startDate),\n      );\n\n      const range: DateRange = isBefore(startDate, endDate)\n        ? [startDate, endDate, source, title]\n        : [endDate, startDate, source, title];\n\n      return range;\n    })\n    .sort((range1, range2) => compareAsc(range1[0], range2[0]));\n\n  return result;\n};\n","import differenceInDays from 'date-fns/difference_in_days';\nimport differenceInMinutes from 'date-fns/difference_in_minutes';\nimport isEqual from 'date-fns/is_equal';\nimport startOfDay from 'date-fns/start_of_day';\nimport range from 'lodash/range';\nimport { CellInfo, DateRange } from '../types';\nimport { getSpan } from './getSpan';\n\nexport const createMapDateRangeToCells = ({\n  toX = (x: number) => x,\n  toY,\n  numVerticalCells,\n  originDate,\n}: {\n  toX: (day: number) => number;\n  toY: (min: number) => number;\n  numHorizontalCells: number;\n  numVerticalCells: number;\n  originDate: Date;\n}) => ([start, end, source, title]: DateRange): CellInfo[] => {\n  const originOfThisDay = startOfDay(start);\n  const _startX = toX(differenceInDays(start, originDate));\n  const _startY = toY(differenceInMinutes(start, originOfThisDay));\n  const _endX = toX(differenceInDays(end, originDate));\n  const _endY = toY(differenceInMinutes(end, startOfDay(end))) - 1;\n\n  const cells = range(_startX, _endX + 1).map(i => {\n    const startX = i;\n    const endX = i;\n    const atStart = i === _startX;\n    const atEnd = i === _endX;\n    const startY = !atStart ? 0 : _startY;\n    const endY = !atEnd ? numVerticalCells - 1 : _endY;\n    const spanX = getSpan(startX, endX);\n    const spanY = getSpan(startY, endY);\n\n    return {\n      startX,\n      startY,\n      endX,\n      endY,\n      spanX,\n      spanY,\n      source,\n      title,\n    };\n  });\n\n  if (isEqual(end, startOfDay(end))) {\n    cells.pop();\n  }\n\n  return cells;\n};\n","import compareAsc from 'date-fns/compare_asc';\nimport setDay from 'date-fns/set_day';\nimport { DateRange } from '../types';\n\nexport function getEarliestTimeRange(\n  ranges: DateRange[],\n): DateRange | undefined {\n  return [...ranges].sort(([startA], [startB]) =>\n    compareAsc(setDay(startA, 0), setDay(startB, 0)),\n  )[0];\n}\n","import classcat from 'classcat';\nimport getMinutes from 'date-fns/get_minutes';\nimport React from 'react';\nimport { CellInfo, ClassNames, DateRange } from '../types';\n\nexport const Cell = React.memo(function Cell({\n  timeIndex,\n  children,\n  classes,\n  getDateRangeForVisualGrid,\n  onClick,\n}: {\n  timeIndex: number;\n  classes: ClassNames;\n  getDateRangeForVisualGrid(cell: CellInfo): DateRange[];\n  children?(options: { start: Date; isHourStart: boolean }): React.ReactNode;\n  onClick?: React.MouseEventHandler;\n}) {\n  const [[start]] = getDateRangeForVisualGrid({\n    startX: 0,\n    startY: timeIndex,\n    endX: 0,\n    endY: timeIndex + 1,\n    spanX: 1,\n    spanY: 1,\n    source: '',\n    title: '',\n  });\n\n  const isHourStart = getMinutes(start) === 0;\n\n  return (\n    <div role=\"button\" onClick={onClick} className={classcat([classes.cell])}>\n      {children && children({ start, isHourStart })}\n    </div>\n  );\n});\n","import en from 'date-fns/locale/en';\nimport { createContext } from 'react';\n\nexport const SchedulerContext = createContext({ locale: en });\n","import format from 'date-fns/format';\nimport getMinutes from 'date-fns/get_minutes';\nimport isSameDay from 'date-fns/is_same_day';\nimport { DateRange } from '../types';\n\nconst formatTemplate = 'ddd h:mma';\n\nconst dropSame = (\n  dates: [Date, Date],\n  template: string,\n  takeSecond: boolean = false,\n  locale: typeof import('date-fns/locale/en'),\n  title: string,\n): [string, string] => {\n  const [first, second] = dates.map(date => format(date, template, { locale }));\n  if (first !== second || title) {\n    return [first, second];\n  }\n\n  if (takeSecond) {\n    return ['', second];\n  }\n\n  return [first, ''];\n};\n\nconst formatHour = (\n  date: Date,\n  locale: typeof import('date-fns/locale/en'),\n) => {\n  if (getMinutes(date) === 0) {\n    return format(date, 'h', { locale });\n  }\n\n  return format(date, 'h:mm', { locale });\n};\n\ntype Options = {\n  dateRange: DateRange;\n  locale: typeof import('date-fns/locale/en');\n  template?: string;\n  template2?: string;\n  includeDayIfSame?: boolean;\n  title: string;\n};\n\nexport const getFormattedComponentsForDateRange = ({\n  dateRange,\n  locale,\n  template,\n  template2,\n  includeDayIfSame = true,\n  title,\n}: Options) => {\n  const start = dateRange[0];\n  const end = dateRange[1];\n\n  if (isSameDay(start, end) && !template) {\n    const [firstM, secondM] = dropSame([start, end], 'a', true, locale, title);\n    const day = includeDayIfSame ? `${format(start, 'ddd', { locale })} ` : '';\n    return [\n      `${day}${formatHour(start, {\n        locale,\n      })}${firstM}`,\n      `${formatHour(end, { locale })}${secondM}`,\n    ];\n  }\n\n  const startDateStr = format(start, template || formatTemplate, { locale });\n  const endDateStr = format(end, template2 || formatTemplate, { locale });\n\n  return [startDateStr, endDateStr];\n};\n\nexport const getTextForDateRange = (options: Options) => {\n  return getFormattedComponentsForDateRange(options).join(' â€“ ');\n};\n","// @ts-ignore\nimport VisuallyHidden from '@reach/visually-hidden';\nimport classcat from 'classcat';\nimport React, { useContext } from 'react';\nimport { SchedulerContext } from '../context';\nimport { ClassNames, DateRange } from '../types';\nimport {\n  getFormattedComponentsForDateRange,\n  getTextForDateRange,\n} from '../utils/getTextForDateRange';\n\nexport type EventContentProps = {\n  width: number;\n  height: number;\n  classes: ClassNames;\n  dateRange: DateRange;\n  isStart: boolean;\n  isEnd: boolean;\n  title: string;\n  numberOfConflicts: number;\n};\n\nexport const EventContent = React.memo(function EventContent({\n  width,\n  height,\n  classes,\n  dateRange,\n  isStart,\n  isEnd,\n  title,\n  numberOfConflicts,\n}: EventContentProps) {\n  const { locale } = useContext(SchedulerContext);\n  const [start, end] = getFormattedComponentsForDateRange({\n    dateRange,\n    locale,\n    includeDayIfSame: false,\n    title,\n  });\n  const isFifteenMinuteMeeting = height < 25 ? '0 10px' : '';\n\n  return (\n    <div\n      style={{\n        width: width - 4,\n        height: height - 4,\n        padding: isFifteenMinuteMeeting,\n      }}\n      className={classcat([\n        classes['event-content'],\n        {\n          [classes['external-meeting']]: title,\n          [classes['hide-separator']]: numberOfConflicts > 2,\n        },\n      ])}\n    >\n      <VisuallyHidden>\n        {getTextForDateRange({ dateRange, locale, title })}\n      </VisuallyHidden>\n      {numberOfConflicts < 4 && (\n        <React.Fragment>\n          <span aria-hidden className={classes.start}>\n            {isStart && start}\n          </span>\n          {numberOfConflicts < 3 && (\n            <span aria-hidden className={classes.end}>\n              {title ? title : isEnd && end}\n            </span>\n          )}\n        </React.Fragment>\n      )}\n    </div>\n  );\n});\n","import classcat from 'classcat';\nimport invariant from 'invariant';\nimport Resizable, { ResizeCallback } from 're-resizable';\nimport React, {\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport Draggable, { DraggableEventHandler } from 'react-draggable';\nimport { useMousetrap } from '../hooks/useMousetrap';\nimport { CellInfo, OnChangeCallback, ScheduleType } from '../types';\nimport { DefaultEventRootComponent } from './DefaultEventRootComponent';\nimport { EventContent } from './EventContent';\nimport { ScheduleProps } from './Schedule';\n\nexport const RangeBox = React.memo(function RangeBox({\n  classes,\n  grid,\n  rangeIndex,\n  cellIndex,\n  cellArray,\n  cell,\n  className,\n  onChange,\n  cellInfoToDateRange,\n  isResizable,\n  moveAxis,\n  onActiveChange,\n  onClick,\n  getIsActive,\n  eventContentComponent: EventContentComponent = EventContent,\n  eventRootComponent: EventRootComponent = DefaultEventRootComponent,\n  disabled,\n  numberOfConflicts,\n  meetingPosition,\n  ranges,\n  meetingDuration,\n}: ScheduleProps & {\n  cellIndex: number;\n  cellArray: CellInfo[];\n  className?: string;\n  rangeIndex: number;\n  cell: CellInfo;\n  numberOfConflicts: number;\n  meetingPosition: number;\n  ranges: ScheduleType;\n  onChange: OnChangeCallback | undefined;\n  meetingDuration: number;\n}) {\n  const ref = useRef(null);\n  const [modifiedCell, setModifiedCell] = useState(cell);\n  const originalRect = useMemo(() => grid.getRectFromCell(cell), [cell, grid]);\n  const rect = useMemo(() => grid.getRectFromCell(modifiedCell), [\n    modifiedCell,\n    grid,\n  ]);\n\n  useEffect(() => {\n    setModifiedCell(cell);\n  }, [cell]);\n\n  const modifiedDateRange = useMemo(() => cellInfoToDateRange(modifiedCell), [\n    cellInfoToDateRange,\n    modifiedCell,\n  ]);\n\n  let { top, left, width, height } = rect;\n  width = width / numberOfConflicts;\n\n  const isStart = cellIndex === 0;\n  const isEnd = cellIndex === cellArray.length - 1;\n\n  const handleStop = useCallback(() => {\n    if (!onChange || disabled) {\n      return;\n    }\n\n    onChange(cellInfoToDateRange(modifiedCell), rangeIndex);\n  }, [modifiedCell, rangeIndex, disabled, cellInfoToDateRange, onChange]);\n\n  const isActive = useMemo(() => getIsActive({ cellIndex, rangeIndex }), [\n    cellIndex,\n    rangeIndex,\n    getIsActive,\n  ]);\n\n  useMousetrap(\n    'up',\n    () => {\n      if (!onChange || disabled || !isActive) {\n        return;\n      }\n\n      if (moveAxis === 'none' || moveAxis === 'x') {\n        return;\n      }\n\n      if (modifiedCell.startY === 0) {\n        return;\n      }\n\n      const newCell = {\n        ...modifiedCell,\n        startY: modifiedCell.startY - 1,\n        endY: modifiedCell.endY - 1,\n      };\n\n      onChange(cellInfoToDateRange(newCell), rangeIndex);\n    },\n    ref,\n  );\n\n  useMousetrap(\n    'shift+up',\n    () => {\n      if (!onChange || !isResizable || disabled || !isActive) {\n        return;\n      }\n\n      if (\n        modifiedCell.endY === modifiedCell.startY ||\n        modifiedCell.spanY === 0\n      ) {\n        return;\n      }\n\n      const newCell = {\n        ...modifiedCell,\n        endY: modifiedCell.endY - 1,\n        spanY: modifiedCell.spanY - 1,\n      };\n\n      onChange(cellInfoToDateRange(newCell), rangeIndex);\n    },\n    ref,\n  );\n\n  useMousetrap(\n    'down',\n    () => {\n      if (!onChange || disabled || !isActive) {\n        return;\n      }\n\n      if (moveAxis === 'none' || moveAxis === 'x') {\n        return;\n      }\n\n      if (Math.round(modifiedCell.endY) >= grid.numVerticalCells - 1) {\n        return;\n      }\n\n      const newCell = {\n        ...modifiedCell,\n        startY: modifiedCell.startY + 1,\n        endY: modifiedCell.endY + 1,\n      };\n\n      onChange(cellInfoToDateRange(newCell), rangeIndex);\n    },\n    ref,\n  );\n\n  useMousetrap(\n    'shift+down',\n    () => {\n      if (!onChange || !isResizable || disabled || !isActive) {\n        return;\n      }\n\n      if (moveAxis === 'none' || moveAxis === 'x') {\n        return;\n      }\n\n      if (Math.round(modifiedCell.endY) >= grid.numVerticalCells - 1) {\n        return;\n      }\n\n      const newCell = {\n        ...modifiedCell,\n        spanY: modifiedCell.spanY + 1,\n        endY: modifiedCell.endY + 1,\n      };\n\n      onChange(cellInfoToDateRange(newCell), rangeIndex);\n    },\n    ref,\n  );\n\n  const handleDrag: DraggableEventHandler = useCallback(\n    (event, { y, x }) => {\n      if (moveAxis === 'none' || disabled) {\n        return;\n      }\n\n      event.preventDefault();\n      event.stopPropagation();\n\n      const newRect = {\n        ...rect,\n      };\n\n      if (moveAxis === 'both' || moveAxis === 'y') {\n        const startOrEnd1 = y;\n        const startOrEnd2 = startOrEnd1 + rect.height;\n        const newTop = Math.min(startOrEnd1, startOrEnd2);\n        const newBottom = newTop + rect.height;\n        newRect.bottom = newBottom;\n        newRect.top = newTop;\n      }\n\n      if (moveAxis === 'both' || moveAxis === 'x') {\n        const startOrEnd1 = x;\n        const startOrEnd2 = startOrEnd1 + rect.width;\n        const newLeft = Math.min(startOrEnd1, startOrEnd2);\n        const newRight = newLeft + rect.width;\n        newRect.right = newRight;\n        newRect.left = newLeft;\n      }\n\n      const { startY, startX } = grid.getCellFromRect(newRect);\n\n      const newCell = {\n        ...cell,\n        startX: moveAxis === 'y' ? cell.startX : startX,\n        endX: moveAxis === 'x' ? startX + cell.spanX - 1 : cell.endX,\n        startY: moveAxis === 'x' ? cell.startY : startY,\n        endY: moveAxis === 'y' ? startY + cell.spanY - 1 : cell.endY,\n      };\n\n      invariant(\n        newCell.spanY === cell.spanY && newCell.spanX === cell.spanX,\n        `Expected the dragged time cell to have the same dimensions`,\n      );\n\n      setModifiedCell(newCell);\n    },\n    [grid, rect, moveAxis, disabled, cell, setModifiedCell],\n  );\n\n  const handleResize: ResizeCallback = useCallback(\n    (event, direction, _ref, delta) => {\n      if (!isResizable || disabled) {\n        return;\n      }\n\n      event.preventDefault();\n      event.stopPropagation();\n\n      if (delta.height === 0) {\n        return;\n      }\n\n      const newSize = {\n        height: delta.height + rect.height,\n        width: delta.width + rect.width + 20,\n      };\n\n      const newRect = {\n        ...originalRect,\n        ...newSize,\n      };\n\n      if (direction.includes('top')) {\n        newRect.top -= delta.height;\n      } else if (direction.includes('bottom')) {\n        newRect.bottom += delta.height;\n      }\n\n      const { spanY, startY, endY } = grid.getCellFromRect(newRect);\n      const newCell = {\n        ...cell,\n        spanY,\n        startY,\n        endY,\n      };\n\n      setModifiedCell(newCell);\n    },\n    [grid, rect, disabled, isResizable, setModifiedCell, cell, originalRect],\n  );\n\n  const handleDelete = useCallback(() => {\n    if (!onChange || disabled) {\n      return;\n    }\n\n    onChange(undefined, rangeIndex);\n  }, [onChange, disabled, rangeIndex]);\n\n  const handleOnFocus = useCallback(() => {\n    if (!onActiveChange || disabled) {\n      return;\n    }\n\n    onActiveChange([rangeIndex, cellIndex]);\n  }, [onActiveChange, disabled, rangeIndex, cellIndex]);\n\n  const handleOnClick = useCallback(() => {\n    if (!onClick || disabled || !isActive) {\n      return;\n    }\n\n    onClick([rangeIndex, cellIndex]);\n  }, [onClick, rangeIndex, disabled, isActive, cellIndex]);\n\n  useMousetrap('enter', handleOnClick, ref);\n\n  const cancelClasses = useMemo(\n    () =>\n      classes.handle\n        ? classes.handle\n            .split(' ')\n            .map(className => `.${className}`)\n            .join(', ')\n        : undefined,\n    [classes.handle],\n  );\n\n  return (\n    <Draggable\n      axis={moveAxis}\n      bounds={{\n        top: 0,\n        bottom: grid.totalHeight - height,\n        left: 0,\n        right: grid.totalWidth / numberOfConflicts,\n      }}\n      position={{ x: left, y: top }}\n      onDrag={handleDrag}\n      onStop={handleStop}\n      cancel={cancelClasses}\n      disabled={disabled}\n    >\n      <EventRootComponent\n        role=\"button\"\n        disabled={disabled}\n        onFocus={handleOnFocus}\n        onClick={handleOnClick}\n        handleDelete={handleDelete}\n        cellIndex={cellIndex}\n        ranges={ranges}\n        rangeIndex={rangeIndex}\n        meetingDuration={meetingDuration}\n        onChange={onChange}\n        isActive={isActive}\n        classes={classes}\n        className={classcat([\n          classes.event,\n          classes['range-boxes'],\n          className,\n          {\n            [classes['is-draggable']]: !disabled && moveAxis !== 'none',\n            [classes['is-disabled']]: disabled,\n          },\n        ])}\n        ref={ref}\n        style={{\n          width: width - 4,\n          height: height - 4,\n          marginLeft:\n            numberOfConflicts === 1\n              ? '2px'\n              : `${width * meetingPosition - width + 2}px`,\n          marginTop: '2px',\n        }}\n      >\n        <Resizable\n          size={{\n            ...originalRect,\n            width: originalRect.width / numberOfConflicts - 4,\n          }}\n          key={`${rangeIndex}.${cellIndex}.${cellArray.length}.${originalRect.top}.${originalRect.left}`}\n          onResize={handleResize}\n          onResizeStop={handleStop}\n          handleWrapperClass={classes['handle-wrapper']}\n          enable={\n            isResizable && !disabled\n              ? {\n                  top: true,\n                  bottom: true,\n                }\n              : {}\n          }\n          handleClasses={{\n            bottom: classcat([classes.handle, classes.bottom]),\n            bottomLeft: classes.handle,\n            bottomRight: classes.handle,\n            left: classes.handle,\n            right: classes.handle,\n            top: classcat([classes.handle, classes.top]),\n            topLeft: classes.handle,\n            topRight: classes.handle,\n          }}\n        >\n          <EventContentComponent\n            width={width}\n            height={height}\n            classes={classes}\n            dateRange={modifiedDateRange}\n            isStart={isStart}\n            isEnd={isEnd}\n            title={cell.title}\n            numberOfConflicts={numberOfConflicts}\n          />\n        </Resizable>\n      </EventRootComponent>\n    </Draggable>\n  );\n});\n","import classcat from 'classcat';\nimport { isBefore } from 'date-fns';\nimport React from 'react';\nimport {\n  CellInfo,\n  ClassNames,\n  DateRange,\n  Grid,\n  OnChangeCallback,\n  ScheduleType,\n} from '../types';\nimport { RangeBox } from './RangeBox';\n\nexport type ScheduleProps = {\n  classes: ClassNames;\n  grid: Grid;\n  onChange?: OnChangeCallback;\n  isResizable?: boolean;\n  isDeletable?: boolean;\n  moveAxis: 'none' | 'both' | 'x' | 'y';\n  cellInfoToDateRange(cell: CellInfo): DateRange;\n  onActiveChange?(index: [number, number] | [null, null]): void;\n  onClick?(index: [number, number] | [null, null]): void;\n  getIsActive(indexes: { cellIndex: number; rangeIndex: number }): boolean;\n  eventContentComponent?: any;\n  eventRootComponent?: any;\n  disabled?: boolean;\n  meetingDuration: number;\n};\n\nexport const Schedule = React.memo(function Schedule({\n  classes,\n  ranges,\n  grid,\n  className,\n  onChange,\n  isResizable,\n  isDeletable,\n  moveAxis,\n  cellInfoToDateRange,\n  dateRangeToCells,\n  onActiveChange,\n  eventContentComponent,\n  eventRootComponent,\n  onClick,\n  getIsActive,\n  meetingDuration,\n}: {\n  dateRangeToCells(range: DateRange): CellInfo[];\n  ranges: ScheduleType;\n  className?: string;\n  classes: ClassNames;\n} & ScheduleProps) {\n  const overlappingMeetings: { [x: number]: string }[] = [];\n\n  ranges.map((currentMeeting, currentMeetingIndex) => {\n    ranges.map((otherMeeting, otherMeetingIndex) => {\n      const sameIndex = currentMeetingIndex === otherMeetingIndex;\n      const timeRangeOverlaps =\n        currentMeeting[0] < otherMeeting[1] &&\n        currentMeeting[1] > otherMeeting[0];\n      if (!sameIndex && timeRangeOverlaps) {\n        overlappingMeetings.push({\n          [currentMeetingIndex]: otherMeetingIndex.toString(),\n        });\n      }\n    });\n  });\n\n  const meetingConflicts = overlappingMeetings.reduce(\n    (accum: { [x: string]: any }, obj: { [x: string]: any }) => {\n      for (let key in obj) {\n        accum[key] = accum[key] ? [...accum[key], obj[key]] : [obj[key]];\n      }\n      return accum;\n    },\n    [],\n  );\n\n  const countUnique = (iterable: Iterable<number>) => {\n    return new Set(iterable).size;\n  };\n\n  const calculateMeetingPlacement = (rangeIndex: number) => {\n    let numberOfConflicts = 1;\n    let meetingPosition = 1;\n\n    if (!meetingConflicts.hasOwnProperty(rangeIndex)) {\n      return { numberOfConflicts, meetingPosition };\n    }\n\n    meetingConflicts[rangeIndex].map((currentMeeting: number) => {\n      if (\n        currentMeeting !== rangeIndex &&\n        meetingConflicts[rangeIndex].length > 1\n      ) {\n        let totalConflicts: number[] = [];\n        let positionArray: boolean[] = [];\n\n        meetingConflicts[rangeIndex].map((range: number) => {\n          positionArray.push(rangeIndex > range);\n          meetingConflicts[rangeIndex].map((currentConflict: number) => {\n            totalConflicts.push(...meetingConflicts[currentConflict]);\n          });\n\n          numberOfConflicts =\n            countUnique(\n              totalConflicts.filter(index => index !== currentMeeting),\n            ) + 1;\n        });\n        meetingPosition = positionArray.filter(c => c === true).length + 1;\n      } else {\n        numberOfConflicts = 2;\n        const numberOfExistingOverlaps = meetingConflicts[rangeIndex][0];\n\n        if (meetingConflicts[numberOfExistingOverlaps].length > 2) {\n          meetingPosition =\n            meetingConflicts[numberOfExistingOverlaps].length + 1;\n        } else {\n          meetingPosition =\n            rangeIndex < Number(...meetingConflicts[rangeIndex]) ? 1 : 2;\n        }\n\n        numberOfConflicts = Math.max(\n          2,\n          meetingConflicts[numberOfExistingOverlaps].length + 1,\n        );\n      }\n    });\n\n    return { numberOfConflicts, meetingPosition };\n  };\n\n  return (\n    <div className={classes['range-boxes']}>\n      {ranges.map((dateRange, rangeIndex) => {\n        const isPast = isBefore(dateRange[1], new Date());\n        return (\n          <span key={rangeIndex}>\n            {dateRangeToCells(dateRange).map((cell, cellIndex, cellArray) => {\n              const isGoogleEvent = cell.source === 'google';\n              const {\n                numberOfConflicts,\n                meetingPosition,\n              } = calculateMeetingPlacement(rangeIndex);\n\n              return (\n                <RangeBox\n                  classes={classes}\n                  onActiveChange={onActiveChange}\n                  key={`${rangeIndex}.${ranges.length}.${cellIndex}.${cellArray.length}`}\n                  isResizable={isResizable}\n                  moveAxis={moveAxis}\n                  isDeletable={isDeletable}\n                  cellInfoToDateRange={cellInfoToDateRange}\n                  cellArray={cellArray}\n                  cellIndex={cellIndex}\n                  rangeIndex={rangeIndex}\n                  ranges={ranges}\n                  meetingDuration={meetingDuration}\n                  className={classcat([\n                    className,\n                    {\n                      [classes['is-past']]: isPast,\n                      [classes['is-google']]: isGoogleEvent,\n                    },\n                  ])}\n                  onChange={onChange}\n                  onClick={onClick}\n                  grid={grid}\n                  cell={cell}\n                  getIsActive={getIsActive}\n                  eventContentComponent={eventContentComponent}\n                  eventRootComponent={eventRootComponent}\n                  disabled={isGoogleEvent}\n                  numberOfConflicts={numberOfConflicts}\n                  meetingPosition={meetingPosition}\n                />\n              );\n            })}\n          </span>\n        );\n      })}\n    </div>\n  );\n});\n","import classcat from 'classcat';\nimport React, { useMemo } from 'react';\nimport Draggable from 'react-draggable';\nimport { CellInfo } from '../types';\nimport { DefaultEventRootComponent } from './DefaultEventRootComponent';\nimport { TimeIndicatorProps } from './TimeIndicator';\n\nexport const IndicatorLine = React.memo(function IndicatorLine({\n  classes,\n  grid,\n  cell,\n  eventRootComponent: EventRootComponent = DefaultEventRootComponent,\n}: TimeIndicatorProps & {\n  className?: string;\n  cell: CellInfo;\n}) {\n  const rect = useMemo(() => grid.getRectFromCell(cell), [cell, grid]);\n  const { top, left, width, height } = rect;\n\n  return (\n    <Draggable\n      bounds={{\n        top: 0,\n        bottom: grid.totalHeight - height,\n        left: 0,\n        right: grid.totalWidth,\n      }}\n      position={{ x: left, y: top }}\n      key={`draggable-${width}.${height}.${top}.${left}`}\n    >\n      <EventRootComponent\n        className={classcat([classes.indicator])}\n        style={{\n          width: width,\n          height: 2,\n        }}\n        key={`eventroot-${width}.${height}.${top}.${left}`}\n      ></EventRootComponent>\n    </Draggable>\n  );\n});\n","import classcat from 'classcat';\nimport React from 'react';\nimport { CellInfo, ClassNames, DateRange, Grid } from '../types';\nimport { IndicatorLine } from './IndicatorLine';\n\nexport type TimeIndicatorProps = {\n  classes: ClassNames;\n  grid: Grid;\n  cellInfoToDateRange(cell: CellInfo): DateRange;\n  eventRootComponent?: any;\n};\n\nexport const TimeIndicator = React.memo(function TimeIndicator({\n  classes,\n  currentTime,\n  grid,\n  className,\n  cellInfoToDateRange,\n  dateRangeToCells,\n  eventRootComponent,\n}: {\n  dateRangeToCells(range: DateRange): CellInfo[];\n  currentTime: DateRange;\n  className?: string;\n  classes: ClassNames;\n} & TimeIndicatorProps) {\n  // const [cellInfo, setCellInfo] = useState(dateRangeToCells(currentTime));\n\n  // useEffect(() => {\n  //   setCellInfo(dateRangeToCells(currentTime));\n  //   console.log(currentTime);\n  // }, [currentTime]);\n\n  return (\n    <div>\n      {dateRangeToCells(currentTime).map((cell, index) => {\n        return (\n          <IndicatorLine\n            key={`indicator-${index}`}\n            classes={classes}\n            cellInfoToDateRange={cellInfoToDateRange}\n            className={classcat([className])}\n            grid={grid}\n            cell={cell}\n            eventRootComponent={eventRootComponent}\n          />\n        );\n      })}\n    </div>\n  );\n});\n","import useComponentSize from '@rehooks/component-size';\nimport classcat from 'classcat';\nimport { isPast, isToday } from 'date-fns';\nimport addDays from 'date-fns/add_days';\nimport addHours from 'date-fns/add_hours';\nimport format from 'date-fns/format';\nimport isDateEqual from 'date-fns/is_equal';\nimport en from 'date-fns/locale/en';\nimport ja from 'date-fns/locale/ja';\nimport startOfDay from 'date-fns/start_of_day';\nimport invariant from 'invariant';\nimport isEqual from 'lodash/isEqual';\nimport times from 'lodash/times';\nimport { ExtendedKeyboardEvent } from 'mousetrap';\nimport React, {\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport scrollIntoView from 'scroll-into-view-if-needed';\nimport { useClickAndDrag } from '../hooks/useClickAndDrag';\nimport { useMousetrap } from '../hooks/useMousetrap';\nimport {\n  CellInfo,\n  ClassNames,\n  DateRange,\n  Grid,\n  OnChangeCallback,\n  ScheduleType,\n} from '../types';\nimport { createGrid } from '../utils/createGrid';\nimport {\n  createMapCellInfoToRecurringTimeRange,\n  RecurringTimeRange,\n} from '../utils/createMapCellInfoToRecurringTimeRange';\nimport { createMapDateRangeToCells } from '../utils/createMapDateRangeToCells';\nimport { getEarliestTimeRange } from '../utils/getEarliestTimeRange';\nimport { getSpan } from '../utils/getSpan';\nimport { Cell } from './Cell';\nimport { Schedule, ScheduleProps } from './Schedule';\nimport { TimeIndicator } from './TimeIndicator';\n\nconst MINS_IN_DAY = 24 * 60;\nconst horizontalPrecision = 1;\nconst toDay = (x: number): number => x * horizontalPrecision;\nconst toX = (days: number): number => days / horizontalPrecision;\nconst DELETE_KEYS = ['del', 'backspace'];\n\nexport const TimeGridScheduler = React.memo(function TimeGridScheduler({\n  verticalPrecision = 15,\n  visualGridVerticalPrecision = 30,\n  cellClickPrecision = visualGridVerticalPrecision,\n  style,\n  schedule,\n  originDate: _originDate = new Date(),\n  defaultHours = [9, 18],\n  classes,\n  className,\n  onChange,\n  onEventClick,\n  eventContentComponent,\n  eventRootComponent,\n  disabled,\n  localization,\n  isMobile,\n  currentTime,\n  meetingDuration,\n}: {\n  originDate?: Date;\n\n  /**\n   * The minimum number of minutes a created range can span\n   * @default 15\n   */\n  verticalPrecision?: number;\n\n  /**\n   * The visual grid increments in minutes.\n   * @default 30\n   */\n  visualGridVerticalPrecision?: number;\n\n  /**\n   * The minimum number of minutes for an time block\n   * created with a single click.\n   * @default visualGridVerticalPrecision\n   */\n  cellClickPrecision?: number;\n\n  /** Custom styles applied to the root of the view */\n  style?: React.CSSProperties;\n  schedule: ScheduleType;\n\n  /**\n   * A map of class names to the scoped class names\n   * The keys are class names like `'root'` and the values\n   * are the corresponding class names which can be scoped\n   * with CSS Modules, e.g. `'_root_7f2c6'`.\n   */\n  classes: ClassNames;\n  className?: string;\n\n  /**\n   * The view will initially be scrolled to these hours.\n   * Defaults to work hours (9-17).\n   * @default [9, 17]\n   */\n  defaultHours?: [number, number];\n\n  onChange(newSchedule: ScheduleType): void;\n  onEventClick?: ScheduleProps['onClick'];\n  eventContentComponent?: ScheduleProps['eventContentComponent'];\n  eventRootComponent?: ScheduleProps['eventRootComponent'];\n  disabled?: boolean;\n  localization: string;\n  isMobile: boolean;\n  currentTime: [string, string, string, string];\n  meetingDuration: number;\n}) {\n  const locale = localization === 'ja' ? ja : en;\n  const numberOfDays = isMobile ? 1 : 7;\n  const originDate = useMemo(() => startOfDay(_originDate), [_originDate]);\n  const numVerticalCells = MINS_IN_DAY / verticalPrecision;\n  const numHorizontalCells = numberOfDays / horizontalPrecision;\n  const toMin = useCallback((y: number) => y * verticalPrecision, [\n    verticalPrecision,\n  ]);\n  const toY = useCallback((mins: number): number => mins / verticalPrecision, [\n    verticalPrecision,\n  ]);\n\n  const cellInfoToDateRanges = useMemo(() => {\n    return createMapCellInfoToRecurringTimeRange({\n      originDate,\n      fromY: toMin,\n      fromX: toDay,\n    });\n  }, [toMin, originDate]);\n\n  const cellInfoToSingleDateRange = useCallback(\n    (cell: CellInfo): DateRange => {\n      const [first, ...rest] = cellInfoToDateRanges(cell);\n      invariant(\n        rest.length === 0,\n        `Expected \"cellInfoToSingleDateRange\" to return a single date range, found ${rest.length}\n        additional ranges instead. This is a bug in @remotelock/react-week-scheduler`,\n      );\n\n      return first;\n    },\n    [cellInfoToDateRanges],\n  );\n\n  const dateRangeToCells = useMemo(() => {\n    return createMapDateRangeToCells({\n      originDate,\n      numVerticalCells,\n      numHorizontalCells,\n      toX,\n      toY,\n    });\n  }, [toY, numVerticalCells, numHorizontalCells, originDate]);\n\n  const root = useRef<HTMLDivElement | null>(null);\n  const parent = useRef<HTMLDivElement | null>(null);\n\n  const size = useComponentSize(parent);\n  const {\n    style: dragBoxStyle,\n    box,\n    isDragging,\n    hasFinishedDragging,\n    cancel,\n  } = useClickAndDrag(parent, disabled);\n  const [\n    pendingCreation,\n    setPendingCreation,\n  ] = useState<RecurringTimeRange | null>(null);\n\n  const [[totalHeight, totalWidth], setDimensions] = useState([0, 0]);\n\n  const numVisualVerticalCells = (24 * 60) / visualGridVerticalPrecision;\n\n  useEffect(\n    function updateGridDimensionsOnSizeOrCellCountChange() {\n      if (!parent.current) {\n        setDimensions([0, 0]);\n        return;\n      }\n\n      setDimensions([parent.current.scrollHeight, parent.current.scrollWidth]);\n    },\n    [size, numVisualVerticalCells],\n  );\n\n  const grid = useMemo<Grid | null>(() => {\n    if (totalHeight === null || totalWidth === null) {\n      return null;\n    }\n\n    return createGrid({\n      totalHeight,\n      totalWidth,\n      numHorizontalCells,\n      numVerticalCells,\n    });\n  }, [totalHeight, totalWidth, numHorizontalCells, numVerticalCells]);\n\n  useEffect(\n    function updatePendingCreationOnDragBoxUpdate() {\n      if (grid === null || box === null) {\n        setPendingCreation(null);\n        return;\n      }\n\n      const cell = grid.getCellFromRect(box);\n      const dateRanges = cellInfoToDateRanges(cell);\n      const event = dateRanges;\n      setPendingCreation(event);\n    },\n    [box, grid, cellInfoToDateRanges, toY],\n  );\n\n  const [[activeRangeIndex, activeCellIndex], setActive] = useState<\n    [number, number] | [null, null]\n  >([null, null]);\n\n  useEffect(\n    function updateScheduleAfterDraggingFinished() {\n      if (disabled) {\n        return;\n      }\n\n      if (hasFinishedDragging) {\n        if (pendingCreation) {\n          onChange([...schedule, ...pendingCreation]);\n        }\n        setPendingCreation(null);\n      }\n    },\n    [\n      hasFinishedDragging,\n      disabled,\n      onChange,\n      setPendingCreation,\n      pendingCreation,\n      schedule,\n    ],\n  );\n\n  useEffect(\n    function clearActiveBlockAfterCreation() {\n      if (pendingCreation === null) {\n        setActive([null, null]);\n      }\n    },\n    [pendingCreation],\n  );\n\n  const handleEventChange = useCallback<OnChangeCallback>(\n    (newDateRange, rangeIndex) => {\n      if (disabled) {\n        return;\n      }\n\n      if (!schedule && newDateRange) {\n        onChange([newDateRange]);\n\n        return;\n      }\n\n      let newSchedule = [...schedule];\n\n      if (!newDateRange) {\n        newSchedule.splice(rangeIndex, 1);\n      } else {\n        if (\n          isDateEqual(newDateRange[0], newSchedule[rangeIndex][0]) &&\n          isDateEqual(newDateRange[1], newSchedule[rangeIndex][1])\n        ) {\n          return;\n        }\n        newSchedule[rangeIndex] = newDateRange;\n      }\n\n      onChange(newSchedule);\n    },\n    [schedule, onChange, disabled],\n  );\n\n  useMousetrap(\n    'esc',\n    function cancelOnEsc() {\n      if (pendingCreation) {\n        cancel();\n      }\n    },\n    document,\n  );\n\n  const getIsActive = useCallback(\n    ({ rangeIndex, cellIndex }) => {\n      return rangeIndex === activeRangeIndex && cellIndex === activeCellIndex;\n    },\n    [activeCellIndex, activeRangeIndex],\n  );\n\n  const handleDelete = useCallback(\n    (e: ExtendedKeyboardEvent) => {\n      if (activeRangeIndex === null || disabled) {\n        return;\n      }\n\n      e.preventDefault();\n      e.stopPropagation();\n      handleEventChange(undefined, activeRangeIndex);\n    },\n    [activeRangeIndex, disabled, handleEventChange],\n  );\n\n  useMousetrap(DELETE_KEYS, handleDelete, root);\n\n  useEffect(\n    function cancelPendingCreationOnSizeChange() {\n      cancel();\n    },\n    [size, cancel],\n  );\n\n  const getDateRangeForVisualGrid = useMemo(() => {\n    return createMapCellInfoToRecurringTimeRange({\n      originDate,\n      fromX: toDay,\n      fromY: y => y * visualGridVerticalPrecision,\n      // source,\n      // title,\n    });\n  }, [visualGridVerticalPrecision, originDate]);\n\n  useEffect(\n    function scrollToActiveTimeBlock() {\n      if (!document.activeElement) {\n        return;\n      }\n\n      if (!root.current || !root.current.contains(document.activeElement)) {\n        return;\n      }\n\n      scrollIntoView(document.activeElement, {\n        scrollMode: 'if-needed',\n        block: 'nearest',\n        inline: 'nearest',\n      });\n    },\n    [schedule],\n  );\n\n  const [wasInitialScrollPerformed, setWasInitialScrollPerformed] = useState(\n    false,\n  );\n\n  useEffect(\n    function performInitialScroll() {\n      if (wasInitialScrollPerformed || !root.current || !grid) {\n        return;\n      }\n\n      const range = dateRangeToCells(\n        getEarliestTimeRange(schedule) || [\n          addHours(originDate, defaultHours[0]),\n          addHours(originDate, defaultHours[1]),\n          '',\n          '',\n        ],\n      );\n\n      if (range[0] === undefined) {\n        return;\n      }\n      const rect = grid.getRectFromCell(range[0]);\n      const { top, bottom } = rect;\n\n      if (top === 0 && bottom === 0) {\n        return;\n      }\n\n      // IE, Edge do not support it\n      if (!('scrollBy' in root.current)) {\n        return;\n      }\n\n      root.current.scrollBy(0, top);\n\n      setWasInitialScrollPerformed(true);\n    },\n    [\n      wasInitialScrollPerformed,\n      grid,\n      schedule,\n      defaultHours,\n      originDate,\n      dateRangeToCells,\n    ],\n  );\n\n  const handleBlur: React.FocusEventHandler = useCallback(\n    event => {\n      if (!event.target.contains(document.activeElement)) {\n        setActive([null, null]);\n      }\n    },\n    [setActive],\n  );\n\n  const handleCellClick = useCallback(\n    (dayIndex: number, timeIndex: number) => (event: React.MouseEvent) => {\n      if (!grid || disabled) {\n        return;\n      }\n\n      const spanY = toY(cellClickPrecision);\n      const cell = {\n        startX: dayIndex,\n        startY: timeIndex,\n        endX: dayIndex,\n        endY: spanY + timeIndex,\n        spanY,\n        spanX: getSpan(dayIndex, dayIndex),\n        source: '',\n        title: '',\n      };\n\n      const dateRanges = cellInfoToDateRanges(cell);\n\n      setPendingCreation(dateRanges);\n\n      event.stopPropagation();\n      event.preventDefault();\n    },\n    [grid, disabled, toY, cellClickPrecision, cellInfoToDateRanges],\n  );\n\n  return (\n    <div\n      ref={root}\n      style={style}\n      onBlur={handleBlur}\n      touch-action={isDragging ? 'none' : undefined}\n      className={classcat([\n        classes.root,\n        classes.theme,\n        className,\n        { [classes['no-scroll']]: isDragging },\n      ])}\n    >\n      <div className={classes['grid-root']}>\n        <div\n          aria-hidden\n          className={classcat([classes.timeline, classes['sticky-left']])}\n        >\n          <div className={classes.header}>\n            <div className={classes['day-column']}>\n              <div className={classcat([classes.cell, classes.title])}>T</div>\n            </div>\n          </div>\n          <div className={classes.calendar}>\n            <div className={classes['day-column']}>\n              <div className={classes['day-hours']}>\n                {times(numVisualVerticalCells).map(timeIndex => {\n                  return (\n                    <Cell\n                      classes={classes}\n                      getDateRangeForVisualGrid={getDateRangeForVisualGrid}\n                      key={timeIndex}\n                      timeIndex={timeIndex}\n                    >\n                      {({ start }) => {\n                        return (\n                          <div className={classes.time}>\n                            {format(start, 'hh:mm', { locale })}\n                          </div>\n                        );\n                      }}\n                    </Cell>\n                  );\n                })}\n              </div>\n            </div>\n          </div>\n        </div>\n        <div\n          className={classcat([\n            classes['sticky-top'],\n            classes['day-header-row'],\n          ])}\n        >\n          <div\n            role=\"presentation\"\n            className={classcat([classes.calendar, classes.header])}\n          >\n            {times(numberOfDays).map(i => (\n              <div\n                key={i}\n                role=\"presentation\"\n                className={classes['day-column']}\n              >\n                <div\n                  className={classcat([\n                    classes.cell,\n                    classes.title,\n                    { [classes['is-past']]: isPast(addDays(originDate, i)) },\n                    {\n                      [classes['is-current']]: isToday(addDays(originDate, i)),\n                    },\n                  ])}\n                >\n                  <span>\n                    {format(addDays(originDate, i), 'ddd ', { locale })}\n                  </span>\n                  <span>\n                    {format(addDays(originDate, i), 'MMM ', { locale })}\n                  </span>\n                  <span className={classes.date}>\n                    {format(addDays(originDate, i), 'D', { locale })}\n                  </span>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n        <div className={classes['layer-container']}>\n          {isDragging && (\n            <div className={classes['drag-box']} style={dragBoxStyle}>\n              {hasFinishedDragging && <div className={classes.popup} />}\n            </div>\n          )}\n          {grid && pendingCreation && isDragging && (\n            <Schedule\n              classes={classes}\n              dateRangeToCells={dateRangeToCells}\n              cellInfoToDateRange={cellInfoToSingleDateRange}\n              className={classes['is-pending-creation']}\n              ranges={[...schedule, ...pendingCreation]}\n              meetingDuration={meetingDuration}\n              grid={grid}\n              moveAxis=\"none\"\n              eventContentComponent={eventContentComponent}\n              getIsActive={getIsActive}\n            />\n          )}\n          {grid && !pendingCreation && (\n            <Schedule\n              classes={classes}\n              onActiveChange={setActive}\n              dateRangeToCells={dateRangeToCells}\n              cellInfoToDateRange={cellInfoToSingleDateRange}\n              isResizable\n              moveAxis=\"y\"\n              isDeletable\n              onChange={handleEventChange}\n              onClick={onEventClick}\n              ranges={schedule}\n              meetingDuration={meetingDuration}\n              grid={grid}\n              eventContentComponent={eventContentComponent}\n              eventRootComponent={eventRootComponent}\n              getIsActive={getIsActive}\n              disabled={disabled}\n            />\n          )}\n          {grid && (\n            <TimeIndicator\n              key={`time-${currentTime}`}\n              classes={classes}\n              dateRangeToCells={dateRangeToCells}\n              cellInfoToDateRange={cellInfoToSingleDateRange}\n              currentTime={\n                (currentTime as unknown) as [Date, Date, string, string]\n              }\n              grid={grid}\n            />\n          )}\n\n          <div ref={parent} role=\"grid\" className={classes.calendar}>\n            {times(numberOfDays).map(dayIndex => {\n              const isPassed = isPast(addDays(originDate, dayIndex + 1));\n              return (\n                <div\n                  role=\"gridcell\"\n                  key={dayIndex}\n                  className={classes['day-column']}\n                >\n                  <div\n                    className={classcat([\n                      classes['day-hours'],\n                      {\n                        [classes['is-past']]: isPassed,\n                      },\n                    ])}\n                  >\n                    {times(numVisualVerticalCells).map(timeIndex => {\n                      return (\n                        <Cell\n                          classes={classes}\n                          onClick={\n                            !isPassed\n                              ? handleCellClick(\n                                  dayIndex,\n                                  timeIndex *\n                                    (numVerticalCells / numVisualVerticalCells),\n                                )\n                              : undefined\n                          }\n                          getDateRangeForVisualGrid={getDateRangeForVisualGrid}\n                          key={timeIndex}\n                          timeIndex={timeIndex}\n                        />\n                      );\n                    })}\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}, isEqual);\n"],"names":["DefaultEventRootComponent","React","memo","forwardRef","ref","isActive","handleDelete","cellIndex","classes","disabled","ranges","rangeIndex","meetingDuration","onChange","props","displayName","createPageMapCoordsToContainer","container","event","clientX","clientY","pageX","pageY","changedTouches","getBoundingClientRect","top","left","x","y","prevent","tap","e","preventDefault","stopPropagation","useClickAndDrag","isDisabled","useState","transform","width","height","style","setStyle","box","setBox","isDragging","setIsDragging","hasFinishedDragging","setHasFinishedDragging","current","useEffect","mapCoordsToContainer","touchMove$","fromEvent","window","passive","pipe","touchEnd$","touchStart$","touchStartWithDelay$","mergeMap","start","of","delay","takeUntil","mouseDown$","filter","which","mouseMove$","mouseUp$","dragStart$","merge","map","dragEnd$","move$","box$","down","startWith","move","startX","Math","max","startY","endX","min","scrollWidth","endY","scrollHeight","bottom","right","source","title","rect","style$","display","boxSubscriber","subscribe","styleSubscriber","unsubscribe","cancel","useCallback","useMousetrap","handlerKey","handlerCallback","elementOrElementRef","actionRef","useRef","element","document","instance","Mousetrap","bind","combo","unbind","getSpan","x1","x2","abs","createGrid","totalHeight","totalWidth","numVerticalCells","numHorizontalCells","cellHeight","cellWidth","getRectFromCell","data","spanX","spanY","getCellFromRect","clamp","floor","round","cellToDate","toMin","originDate","addMinutes","addDays","createMapCellInfoToRecurringTimeRange","fromY","toDay","fromX","result","range","i","startDate","endDate","endOfDay","isBefore","sort","range1","range2","compareAsc","createMapDateRangeToCells","toX","toY","end","originOfThisDay","startOfDay","_startX","differenceInDays","_startY","differenceInMinutes","_endX","_endY","cells","atStart","atEnd","isEqual","pop","getEarliestTimeRange","startA","startB","setDay","Cell","timeIndex","children","getDateRangeForVisualGrid","onClick","isHourStart","getMinutes","classcat","cell","SchedulerContext","createContext","locale","en","formatTemplate","dropSame","dates","template","takeSecond","date","format","first","second","formatHour","getFormattedComponentsForDateRange","dateRange","template2","includeDayIfSame","isSameDay","firstM","secondM","day","startDateStr","endDateStr","getTextForDateRange","options","join","EventContent","isStart","isEnd","numberOfConflicts","useContext","isFifteenMinuteMeeting","padding","RangeBox","grid","cellArray","className","cellInfoToDateRange","isResizable","moveAxis","onActiveChange","getIsActive","eventContentComponent","EventContentComponent","eventRootComponent","EventRootComponent","meetingPosition","modifiedCell","setModifiedCell","originalRect","useMemo","modifiedDateRange","length","handleStop","newCell","handleDrag","newRect","startOrEnd1","startOrEnd2","newTop","newBottom","newLeft","newRight","invariant","handleResize","direction","_ref","delta","newSize","includes","undefined","handleOnFocus","handleOnClick","cancelClasses","handle","split","marginLeft","marginTop","bottomLeft","bottomRight","topLeft","topRight","Schedule","isDeletable","dateRangeToCells","overlappingMeetings","currentMeeting","currentMeetingIndex","otherMeeting","otherMeetingIndex","sameIndex","timeRangeOverlaps","push","toString","meetingConflicts","reduce","accum","obj","key","countUnique","iterable","Set","size","calculateMeetingPlacement","hasOwnProperty","totalConflicts","positionArray","currentConflict","index","c","numberOfExistingOverlaps","Number","isPast","Date","isGoogleEvent","IndicatorLine","indicator","TimeIndicator","currentTime","MINS_IN_DAY","horizontalPrecision","days","DELETE_KEYS","TimeGridScheduler","verticalPrecision","visualGridVerticalPrecision","cellClickPrecision","schedule","_originDate","defaultHours","onEventClick","localization","isMobile","ja","numberOfDays","mins","cellInfoToDateRanges","cellInfoToSingleDateRange","rest","root","parent","useComponentSize","dragBoxStyle","pendingCreation","setPendingCreation","setDimensions","numVisualVerticalCells","updateGridDimensionsOnSizeOrCellCountChange","updatePendingCreationOnDragBoxUpdate","dateRanges","activeRangeIndex","activeCellIndex","setActive","updateScheduleAfterDraggingFinished","clearActiveBlockAfterCreation","handleEventChange","newDateRange","newSchedule","splice","isDateEqual","cancelOnEsc","cancelPendingCreationOnSizeChange","scrollToActiveTimeBlock","activeElement","contains","scrollIntoView","scrollMode","block","inline","wasInitialScrollPerformed","setWasInitialScrollPerformed","performInitialScroll","addHours","scrollBy","handleBlur","target","handleCellClick","dayIndex","theme","timeline","header","calendar","times","time","isToday","popup","isPassed"],"mappings":"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"}