{"version":3,"file":"index.js","sources":["src/components/DefaultEventRootComponent.tsx","src/utils/createPageMapCoordsToContainer.ts","src/hooks/useClickAndDrag.ts","src/hooks/useMousetrap.ts","src/utils/getSpan.ts","src/utils/createGrid.ts","src/utils/cellToDate.ts","src/utils/createMapCellInfoToRecurringTimeRange.ts","src/utils/createMapDateRangeToCells.ts","src/utils/getEarliestTimeRange.ts","src/utils/mergeEvents.ts","src/components/Cell.tsx","src/context.ts","src/utils/getTextForDateRange.ts","src/components/EventContent.tsx","src/components/RangeBox.tsx","src/components/Schedule.tsx","src/components/IndicatorLine.tsx","src/components/TimeIndicator.tsx","src/components/TimeGridScheduler.tsx"],"sourcesContent":["import React from 'react';\nimport { EventRootProps } from '../types';\n\nexport const DefaultEventRootComponent = React.memo(\n  React.forwardRef<any, EventRootProps>(function DefaultEventRootComponent(\n    {\n      isActive,\n      handleDelete,\n      cellIndex,\n      rangeIndex,\n      classes,\n      disabled,\n      ...props\n    },\n    ref,\n  ) {\n    return <div ref={ref} aria-disabled={disabled} {...props} />;\n  }),\n);\n\nDefaultEventRootComponent.displayName = 'DefaultEventRootComponent';\n","export const createPageMapCoordsToContainer = (container: HTMLElement) => {\n  return (event: React.MouseEvent | MouseEvent | TouchEvent) => {\n    let clientX: number;\n    let clientY: number;\n    let pageX: number;\n    let pageY: number;\n\n    if ('changedTouches' in event) {\n      ({ clientX, clientY, pageX, pageY } = event.changedTouches[0]);\n    } else {\n      ({ clientX, clientY, pageX, pageY } = event);\n    }\n    const { top, left } = container.getBoundingClientRect();\n\n    return {\n      clientX,\n      clientY,\n      pageX,\n      pageY,\n      top,\n      left,\n      x: clientX - left,\n      y: clientY - top,\n    };\n  };\n};\n","import React, { useCallback, useEffect, useState } from 'react';\nimport { fromEvent, merge, Observable, of } from 'rxjs';\nimport {\n  delay,\n  filter,\n  map,\n  mergeMap,\n  startWith,\n  takeUntil,\n  tap,\n} from 'rxjs/operators';\nimport { Rect } from '../types';\nimport { createPageMapCoordsToContainer } from '../utils/createPageMapCoordsToContainer';\n\nconst prevent = tap((e: TouchEvent) => {\n  e.preventDefault();\n  e.stopPropagation();\n});\n\nexport function useClickAndDrag(\n  ref: React.RefObject<HTMLElement>,\n  isDisabled?: boolean,\n) {\n  const [style, setStyle] = useState<React.CSSProperties>({\n    transform: 'translate(0, 0)',\n    width: 0,\n    height: 0,\n  });\n  const [box, setBox] = useState<Rect | null>(null);\n  const [isDragging, setIsDragging] = useState(false);\n  const [hasFinishedDragging, setHasFinishedDragging] = useState(false);\n  const container = ref.current;\n\n  useEffect(() => {\n    if (!container || isDisabled) {\n      return;\n    }\n\n    const mapCoordsToContainer = createPageMapCoordsToContainer(container);\n\n    const touchMove$ = fromEvent<TouchEvent>(window, 'touchmove', {\n      passive: false,\n    }).pipe(prevent);\n\n    const touchEnd$ = fromEvent<TouchEvent>(window, 'touchend', {\n      passive: true,\n    });\n\n    const touchStart$ = fromEvent<TouchEvent>(container, 'touchstart', {\n      passive: false,\n    });\n\n    const touchStartWithDelay$ = touchStart$.pipe(\n      mergeMap(start =>\n        of(start).pipe(delay(300), takeUntil(touchMove$), prevent),\n      ),\n    );\n\n    const mouseDown$ = fromEvent<MouseEvent>(container, 'mousedown', {\n      passive: true,\n    }).pipe(filter(event => event.which === 1));\n\n    const mouseMove$ = fromEvent<MouseEvent>(window, 'mousemove', {\n      passive: true,\n    });\n\n    const mouseUp$ = fromEvent<MouseEvent>(window, 'mouseup', {\n      passive: true,\n    });\n\n    const dragStart$ = merge(mouseDown$, touchStartWithDelay$).pipe(\n      map(mapCoordsToContainer),\n    );\n\n    const dragEnd$ = merge(mouseUp$, touchEnd$).pipe(\n      map(mapCoordsToContainer),\n      tap(() => {\n        setIsDragging(false);\n        setHasFinishedDragging(true);\n      }),\n    );\n\n    const move$ = merge(mouseMove$, touchMove$).pipe(map(mapCoordsToContainer));\n\n    const box$: Observable<Rect | null> = dragStart$.pipe(\n      tap(() => {\n        setIsDragging(true);\n        setHasFinishedDragging(false);\n      }),\n      mergeMap(down => {\n        return move$.pipe(\n          startWith(down),\n          map(\n            (move): Rect => {\n              const startX = Math.max(down.x, 0);\n              const startY = Math.max(down.y, 0);\n              const endX = Math.min(move.x, container.scrollWidth);\n              const endY = Math.min(move.y, container.scrollHeight);\n              const top = Math.min(startY, endY);\n              const bottom = Math.max(startY, endY);\n              const left = Math.min(startX, endX);\n              const right = Math.max(startX, endX);\n              const source = '';\n              const title = '';\n\n              return {\n                startX,\n                startY,\n                endX,\n                endY,\n                top,\n                bottom,\n                left,\n                right,\n                width: right - left,\n                height: bottom - top,\n                source,\n                title,\n              };\n            },\n          ),\n          takeUntil(dragEnd$),\n        );\n      }),\n      map(rect => {\n        return rect.width === 0 && rect.height === 0 ? null : rect;\n      }),\n    );\n\n    const style$ = box$.pipe(\n      map(rect => {\n        if (rect !== null) {\n          const { width, height, left, top } = rect;\n          return {\n            transform: `translate(${left}px, ${top}px)`,\n            width,\n            height,\n          };\n        }\n\n        return { display: 'none' };\n      }),\n    );\n\n    const boxSubscriber = box$.subscribe(setBox);\n    const styleSubscriber = style$.subscribe(setStyle);\n\n    return () => {\n      boxSubscriber.unsubscribe();\n      styleSubscriber.unsubscribe();\n    };\n  }, [container, isDisabled]);\n\n  const cancel = useCallback(() => {\n    setIsDragging(false);\n    setHasFinishedDragging(false);\n    setBox(null);\n  }, []);\n\n  return { style, box, isDragging, cancel, hasFinishedDragging };\n}\n","import Mousetrap, { ExtendedKeyboardEvent } from 'mousetrap';\nimport { useEffect, useRef } from 'react';\n\n/**\n * Use mousetrap hook\n *\n * @param handlerKey - A key, key combo or array of combos according to Mousetrap documentation.\n * @param  handlerCallback - A function that is triggered on key combo catch.\n */\nexport function useMousetrap(\n  handlerKey: string | string[],\n  handlerCallback: (e: ExtendedKeyboardEvent, combo: string) => void,\n  elementOrElementRef: typeof document | React.RefObject<Element | null>,\n) {\n  const actionRef = useRef<typeof handlerCallback | null>(null);\n  actionRef.current = handlerCallback;\n  const element =\n    'current' in elementOrElementRef ? elementOrElementRef.current : document;\n\n  useEffect(() => {\n    const instance = new Mousetrap(element as Element);\n\n    instance.bind(handlerKey, (e, combo) => {\n      typeof actionRef.current === 'function' && actionRef.current(e, combo);\n    });\n\n    return () => {\n      instance.unbind(handlerKey);\n    };\n  }, [handlerKey, element]);\n}\n","export const getSpan = (x1: number, x2: number) => 1 + Math.abs(x2 - x1);\n","import clamp from 'lodash/clamp';\nimport floor from 'lodash/floor';\nimport round from 'lodash/round';\nimport { CellInfo, Grid, Rect } from '../types';\nimport { getSpan } from './getSpan';\n\nexport const createGrid = ({\n  totalHeight,\n  totalWidth,\n  numVerticalCells,\n  numHorizontalCells,\n}: {\n  totalHeight: number;\n  totalWidth: number;\n  numVerticalCells: number;\n  numHorizontalCells: number;\n}): Grid => {\n  const cellHeight = totalHeight / numVerticalCells;\n  const cellWidth = totalWidth / numHorizontalCells;\n\n  return {\n    totalHeight,\n    totalWidth,\n    numVerticalCells,\n    numHorizontalCells,\n    cellWidth,\n    cellHeight,\n\n    getRectFromCell(data: CellInfo) {\n      const { endX, startX, endY, startY, spanX, spanY, source, title } = data;\n      const bottom = endY * this.cellHeight;\n      const top = startY * this.cellHeight;\n      const left = startX * this.cellWidth;\n      const right = endX * this.cellWidth;\n      const height = spanY * this.cellHeight;\n      const width = spanX * this.cellWidth;\n\n      return {\n        bottom,\n        top,\n        left,\n        right,\n        height,\n        width,\n        source,\n        title,\n\n        // @TODO: check the math\n        startX: startX * this.cellWidth,\n        endX: endX * this.cellWidth,\n        startY: startY * this.cellHeight,\n        endY: endY * this.cellHeight,\n      };\n    },\n\n    getCellFromRect(data: Rect) {\n      const startX = clamp(\n        floor(data.left / this.cellWidth),\n        0,\n        numHorizontalCells - 1,\n      );\n      const startY = clamp(\n        round(data.top / this.cellHeight),\n        0,\n        numVerticalCells - 1,\n      );\n      const endX = clamp(\n        floor(data.right / this.cellWidth),\n        0,\n        numHorizontalCells - 1,\n      );\n      const endY = clamp(\n        round(data.bottom / this.cellHeight),\n        0,\n        numVerticalCells - 1,\n      );\n      const spanX = clamp(getSpan(startX, endX), 1, numHorizontalCells);\n      const spanY = clamp(getSpan(startY, endY), 1, numVerticalCells);\n      const source = data.source;\n      const title = data.title;\n\n      return {\n        spanX,\n        spanY,\n        startX,\n        startY,\n        endX,\n        endY,\n        source,\n        title,\n      };\n    },\n  };\n};\n","import addDays from 'date-fns/add_days';\nimport addMinutes from 'date-fns/add_minutes';\n\nexport const cellToDate = ({\n  startX,\n  startY,\n  toMin,\n  originDate,\n}: {\n  startX: number;\n  startY: number;\n  toMin: (y: number) => number;\n  toDay: (x: number) => number;\n  originDate: Date;\n}) => addMinutes(addDays(originDate, startX), toMin(startY));\n","import addMinutes from 'date-fns/add_minutes';\nimport compareAsc from 'date-fns/compare_asc';\nimport endOfDay from 'date-fns/end_of_day';\nimport isBefore from 'date-fns/is_before';\nimport min from 'date-fns/min';\nimport range from 'lodash/range';\nimport { DateRange, MapCellInfoToDateRange } from '../types';\nimport { cellToDate } from './cellToDate';\n\nexport type RecurringTimeRange = DateRange[];\n\nexport const createMapCellInfoToRecurringTimeRange: MapCellInfoToDateRange = ({\n  fromY: toMin,\n  fromX: toDay,\n  originDate,\n}) => ({ startX, startY, endX, spanY, source, title }) => {\n  const result = range(startX, endX + 1)\n    .map(i => {\n      const startDate = cellToDate({\n        startX: i,\n        startY,\n        toMin,\n        toDay,\n        originDate,\n      });\n      let endDate = min(\n        addMinutes(startDate, toMin(spanY)),\n        endOfDay(startDate),\n      );\n\n      const range: DateRange = isBefore(startDate, endDate)\n        ? [startDate, endDate, source, title]\n        : [endDate, startDate, source, title];\n\n      return range;\n    })\n    .sort((range1, range2) => compareAsc(range1[0], range2[0]));\n\n  return result;\n};\n","import differenceInDays from 'date-fns/difference_in_days';\nimport differenceInMinutes from 'date-fns/difference_in_minutes';\nimport isEqual from 'date-fns/is_equal';\nimport startOfDay from 'date-fns/start_of_day';\nimport range from 'lodash/range';\nimport { CellInfo, DateRange } from '../types';\nimport { getSpan } from './getSpan';\n\nexport const createMapDateRangeToCells = ({\n  toX = (x: number) => x,\n  toY,\n  numVerticalCells,\n  originDate,\n}: {\n  toX: (day: number) => number;\n  toY: (min: number) => number;\n  numHorizontalCells: number;\n  numVerticalCells: number;\n  originDate: Date;\n}) => ([start, end, source, title]: DateRange): CellInfo[] => {\n  const originOfThisDay = startOfDay(start);\n  const _startX = toX(differenceInDays(start, originDate));\n  const _startY = toY(differenceInMinutes(start, originOfThisDay));\n  const _endX = toX(differenceInDays(end, originDate));\n  const _endY = toY(differenceInMinutes(end, startOfDay(end))) - 1;\n\n  const cells = range(_startX, _endX + 1).map(i => {\n    const startX = i;\n    const endX = i;\n    const atStart = i === _startX;\n    const atEnd = i === _endX;\n    const startY = !atStart ? 0 : _startY;\n    const endY = !atEnd ? numVerticalCells - 1 : _endY;\n    const spanX = getSpan(startX, endX);\n    const spanY = getSpan(startY, endY);\n\n    return {\n      startX,\n      startY,\n      endX,\n      endY,\n      spanX,\n      spanY,\n      source,\n      title,\n    };\n  });\n\n  if (isEqual(end, startOfDay(end))) {\n    cells.pop();\n  }\n\n  return cells;\n};\n","import compareAsc from 'date-fns/compare_asc';\nimport setDay from 'date-fns/set_day';\nimport { DateRange } from '../types';\n\nexport function getEarliestTimeRange(\n  ranges: DateRange[],\n): DateRange | undefined {\n  return [...ranges].sort(([startA], [startB]) =>\n    compareAsc(setDay(startA, 0), setDay(startB, 0)),\n  )[0];\n}\n","import compareAsc from 'date-fns/compare_asc';\nimport _mergeRanges from 'merge-ranges';\nimport { ScheduleType } from '../types';\n\nexport function mergeRanges(event: ScheduleType): ScheduleType {\n  return _mergeRanges(\n    [...event].map(\n      d =>\n        [new Date(d[0]), new Date(d[1]), d[2], d[3]] as [\n          Date,\n          Date,\n          string,\n          string,\n        ],\n    ),\n  );\n}\n\nexport function mergeEvents(\n  event1: ScheduleType,\n  event2: ScheduleType | null,\n): ScheduleType {\n  if (event2 === null) {\n    return event1;\n  }\n\n  return mergeRanges([...event1, ...event2]).sort((range1, range2) =>\n    compareAsc(range1[0], range2[0]),\n  );\n}\n","import classcat from 'classcat';\nimport getMinutes from 'date-fns/get_minutes';\nimport React from 'react';\nimport { CellInfo, ClassNames, DateRange } from '../types';\n\nexport const Cell = React.memo(function Cell({\n  timeIndex,\n  children,\n  classes,\n  getDateRangeForVisualGrid,\n  onClick,\n}: {\n  timeIndex: number;\n  classes: ClassNames;\n  getDateRangeForVisualGrid(cell: CellInfo): DateRange[];\n  children?(options: { start: Date; isHourStart: boolean }): React.ReactNode;\n  onClick?: React.MouseEventHandler;\n}) {\n  const [[start]] = getDateRangeForVisualGrid({\n    startX: 0,\n    startY: timeIndex,\n    endX: 0,\n    endY: timeIndex + 1,\n    spanX: 1,\n    spanY: 1,\n    source: '',\n    title: '',\n  });\n\n  const isHourStart = getMinutes(start) === 0;\n\n  return (\n    <div role=\"button\" onClick={onClick} className={classcat([classes.cell])}>\n      {children && children({ start, isHourStart })}\n    </div>\n  );\n});\n","import en from 'date-fns/locale/en';\nimport { createContext } from 'react';\n\nexport const SchedulerContext = createContext({ locale: en });\n","import format from 'date-fns/format';\nimport getMinutes from 'date-fns/get_minutes';\nimport isSameDay from 'date-fns/is_same_day';\nimport { DateRange } from '../types';\n\nconst formatTemplate = 'ddd h:mma';\n\nconst dropSame = (\n  dates: [Date, Date],\n  template: string,\n  takeSecond: boolean = false,\n  locale: typeof import('date-fns/locale/en'),\n  title: string,\n): [string, string] => {\n  const [first, second] = dates.map(date => format(date, template, { locale }));\n  if (first !== second || title) {\n    return [first, second];\n  }\n\n  if (takeSecond) {\n    return ['', second];\n  }\n\n  return [first, ''];\n};\n\nconst formatHour = (\n  date: Date,\n  locale: typeof import('date-fns/locale/en'),\n) => {\n  if (getMinutes(date) === 0) {\n    return format(date, 'h', { locale });\n  }\n\n  return format(date, 'h:mm', { locale });\n};\n\ntype Options = {\n  dateRange: DateRange;\n  locale: typeof import('date-fns/locale/en');\n  template?: string;\n  template2?: string;\n  includeDayIfSame?: boolean;\n  title: string;\n};\n\nexport const getFormattedComponentsForDateRange = ({\n  dateRange,\n  locale,\n  template,\n  template2,\n  includeDayIfSame = true,\n  title,\n}: Options) => {\n  const start = dateRange[0];\n  const end = dateRange[1];\n\n  if (isSameDay(start, end) && !template) {\n    const [firstM, secondM] = dropSame([start, end], 'a', true, locale, title);\n    const day = includeDayIfSame ? `${format(start, 'ddd', { locale })} ` : '';\n    return [\n      `${day}${formatHour(start, {\n        locale,\n      })}${firstM}`,\n      `${formatHour(end, { locale })}${secondM}`,\n    ];\n  }\n\n  const startDateStr = format(start, template || formatTemplate, { locale });\n  const endDateStr = format(end, template2 || formatTemplate, { locale });\n\n  return [startDateStr, endDateStr];\n};\n\nexport const getTextForDateRange = (options: Options) => {\n  return getFormattedComponentsForDateRange(options).join(' – ');\n};\n","// @ts-ignore\nimport VisuallyHidden from '@reach/visually-hidden';\nimport React, { useContext } from 'react';\nimport { SchedulerContext } from '../context';\nimport { ClassNames, DateRange } from '../types';\nimport {\n  getFormattedComponentsForDateRange,\n  getTextForDateRange,\n} from '../utils/getTextForDateRange';\n\nexport type EventContentProps = {\n  width: number;\n  height: number;\n  classes: ClassNames;\n  dateRange: DateRange;\n  isStart: boolean;\n  isEnd: boolean;\n  title: string;\n};\n\nexport const EventContent = React.memo(function EventContent({\n  width,\n  height,\n  classes,\n  dateRange,\n  isStart,\n  isEnd,\n  title,\n}: EventContentProps) {\n  const { locale } = useContext(SchedulerContext);\n  const [start, end] = getFormattedComponentsForDateRange({\n    dateRange,\n    locale,\n    includeDayIfSame: false,\n    title,\n  });\n  const isFifteenMinuteMeeting = height < 25 ? '0 10px' : '';\n\n  return (\n    <div\n      style={{\n        width: width - 4,\n        height: height - 4,\n        padding: isFifteenMinuteMeeting,\n      }}\n      className={classes['event-content']}\n    >\n      <VisuallyHidden>\n        {getTextForDateRange({ dateRange, locale, title })}\n      </VisuallyHidden>\n      <span aria-hidden className={classes.start}>\n        {isStart && start}\n      </span>\n      <span aria-hidden className={classes.end}>\n        {title ? title : isEnd && end}\n      </span>\n    </div>\n  );\n});\n","import classcat from 'classcat';\nimport invariant from 'invariant';\nimport Resizable, { ResizeCallback } from 're-resizable';\nimport React, {\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport Draggable, { DraggableEventHandler } from 'react-draggable';\nimport { useMousetrap } from '../hooks/useMousetrap';\nimport { CellInfo } from '../types';\nimport { DefaultEventRootComponent } from './DefaultEventRootComponent';\nimport { EventContent } from './EventContent';\nimport { ScheduleProps } from './Schedule';\n\nexport const RangeBox = React.memo(function RangeBox({\n  classes,\n  grid,\n  rangeIndex,\n  cellIndex,\n  cellArray,\n  cell,\n  className,\n  onChange,\n  cellInfoToDateRange,\n  isResizable,\n  moveAxis,\n  onActiveChange,\n  onClick,\n  getIsActive,\n  eventContentComponent: EventContentComponent = EventContent,\n  eventRootComponent: EventRootComponent = DefaultEventRootComponent,\n  disabled,\n}: ScheduleProps & {\n  cellIndex: number;\n  cellArray: CellInfo[];\n  className?: string;\n  rangeIndex: number;\n  cell: CellInfo;\n}) {\n  const ref = useRef(null);\n  const [modifiedCell, setModifiedCell] = useState(cell);\n  const originalRect = useMemo(() => grid.getRectFromCell(cell), [cell, grid]);\n  const rect = useMemo(() => grid.getRectFromCell(modifiedCell), [\n    modifiedCell,\n    grid,\n  ]);\n\n  useEffect(() => {\n    setModifiedCell(cell);\n  }, [cell]);\n\n  const modifiedDateRange = useMemo(() => cellInfoToDateRange(modifiedCell), [\n    cellInfoToDateRange,\n    modifiedCell,\n  ]);\n\n  const { top, left, width, height } = rect;\n\n  const isStart = cellIndex === 0;\n  const isEnd = cellIndex === cellArray.length - 1;\n\n  const handleStop = useCallback(() => {\n    if (!onChange || disabled) {\n      return;\n    }\n\n    onChange(cellInfoToDateRange(modifiedCell), rangeIndex);\n  }, [modifiedCell, rangeIndex, disabled, cellInfoToDateRange, onChange]);\n\n  const isActive = useMemo(() => getIsActive({ cellIndex, rangeIndex }), [\n    cellIndex,\n    rangeIndex,\n    getIsActive,\n  ]);\n\n  useMousetrap(\n    'up',\n    () => {\n      if (!onChange || disabled || !isActive) {\n        return;\n      }\n\n      if (moveAxis === 'none' || moveAxis === 'x') {\n        return;\n      }\n\n      if (modifiedCell.startY === 0) {\n        return;\n      }\n\n      const newCell = {\n        ...modifiedCell,\n        startY: modifiedCell.startY - 1,\n        endY: modifiedCell.endY - 1,\n      };\n\n      onChange(cellInfoToDateRange(newCell), rangeIndex);\n    },\n    ref,\n  );\n\n  useMousetrap(\n    'shift+up',\n    () => {\n      if (!onChange || !isResizable || disabled || !isActive) {\n        return;\n      }\n\n      if (\n        modifiedCell.endY === modifiedCell.startY ||\n        modifiedCell.spanY === 0\n      ) {\n        return;\n      }\n\n      const newCell = {\n        ...modifiedCell,\n        endY: modifiedCell.endY - 1,\n        spanY: modifiedCell.spanY - 1,\n      };\n\n      onChange(cellInfoToDateRange(newCell), rangeIndex);\n    },\n    ref,\n  );\n\n  useMousetrap(\n    'down',\n    () => {\n      if (!onChange || disabled || !isActive) {\n        return;\n      }\n\n      if (moveAxis === 'none' || moveAxis === 'x') {\n        return;\n      }\n\n      if (Math.round(modifiedCell.endY) >= grid.numVerticalCells - 1) {\n        return;\n      }\n\n      const newCell = {\n        ...modifiedCell,\n        startY: modifiedCell.startY + 1,\n        endY: modifiedCell.endY + 1,\n      };\n\n      onChange(cellInfoToDateRange(newCell), rangeIndex);\n    },\n    ref,\n  );\n\n  useMousetrap(\n    'shift+down',\n    () => {\n      if (!onChange || !isResizable || disabled || !isActive) {\n        return;\n      }\n\n      if (moveAxis === 'none' || moveAxis === 'x') {\n        return;\n      }\n\n      if (Math.round(modifiedCell.endY) >= grid.numVerticalCells - 1) {\n        return;\n      }\n\n      const newCell = {\n        ...modifiedCell,\n        spanY: modifiedCell.spanY + 1,\n        endY: modifiedCell.endY + 1,\n      };\n\n      onChange(cellInfoToDateRange(newCell), rangeIndex);\n    },\n    ref,\n  );\n\n  const handleDrag: DraggableEventHandler = useCallback(\n    (event, { y, x }) => {\n      if (moveAxis === 'none' || disabled) {\n        return;\n      }\n\n      event.preventDefault();\n      event.stopPropagation();\n\n      const newRect = {\n        ...rect,\n      };\n\n      if (moveAxis === 'both' || moveAxis === 'y') {\n        const startOrEnd1 = y;\n        const startOrEnd2 = startOrEnd1 + rect.height;\n        const newTop = Math.min(startOrEnd1, startOrEnd2);\n        const newBottom = newTop + rect.height;\n        newRect.bottom = newBottom;\n        newRect.top = newTop;\n      }\n\n      if (moveAxis === 'both' || moveAxis === 'x') {\n        const startOrEnd1 = x;\n        const startOrEnd2 = startOrEnd1 + rect.width;\n        const newLeft = Math.min(startOrEnd1, startOrEnd2);\n        const newRight = newLeft + rect.width;\n        newRect.right = newRight;\n        newRect.left = newLeft;\n      }\n\n      const { startY, startX } = grid.getCellFromRect(newRect);\n\n      const newCell = {\n        ...cell,\n        startX: moveAxis === 'y' ? cell.startX : startX,\n        endX: moveAxis === 'x' ? startX + cell.spanX - 1 : cell.endX,\n        startY: moveAxis === 'x' ? cell.startY : startY,\n        endY: moveAxis === 'y' ? startY + cell.spanY - 1 : cell.endY,\n      };\n\n      invariant(\n        newCell.spanY === cell.spanY && newCell.spanX === cell.spanX,\n        `Expected the dragged time cell to have the same dimensions`,\n      );\n\n      setModifiedCell(newCell);\n    },\n    [grid, rect, moveAxis, disabled, cell, setModifiedCell],\n  );\n\n  const handleResize: ResizeCallback = useCallback(\n    (event, direction, _ref, delta) => {\n      if (!isResizable || disabled) {\n        return;\n      }\n\n      event.preventDefault();\n      event.stopPropagation();\n\n      if (delta.height === 0) {\n        return;\n      }\n\n      const newSize = {\n        height: delta.height + rect.height,\n        width: delta.width + rect.width + 20,\n      };\n\n      const newRect = {\n        ...originalRect,\n        ...newSize,\n      };\n\n      if (direction.includes('top')) {\n        newRect.top -= delta.height;\n      } else if (direction.includes('bottom')) {\n        newRect.bottom += delta.height;\n      }\n\n      const { spanY, startY, endY } = grid.getCellFromRect(newRect);\n      const newCell = {\n        ...cell,\n        spanY,\n        startY,\n        endY,\n      };\n\n      setModifiedCell(newCell);\n    },\n    [grid, rect, disabled, isResizable, setModifiedCell, cell, originalRect],\n  );\n\n  const handleDelete = useCallback(() => {\n    if (!onChange || disabled) {\n      return;\n    }\n\n    onChange(undefined, rangeIndex);\n  }, [onChange, disabled, rangeIndex]);\n\n  const handleOnFocus = useCallback(() => {\n    if (!onActiveChange || disabled) {\n      return;\n    }\n\n    onActiveChange([rangeIndex, cellIndex]);\n  }, [onActiveChange, disabled, rangeIndex, cellIndex]);\n\n  const handleOnClick = useCallback(() => {\n    if (!onClick || disabled || !isActive) {\n      return;\n    }\n\n    onClick([rangeIndex, cellIndex]);\n  }, [onClick, rangeIndex, disabled, isActive, cellIndex]);\n\n  useMousetrap('enter', handleOnClick, ref);\n\n  const cancelClasses = useMemo(\n    () =>\n      classes.handle\n        ? classes.handle\n            .split(' ')\n            .map(className => `.${className}`)\n            .join(', ')\n        : undefined,\n    [classes.handle],\n  );\n\n  return (\n    <Draggable\n      axis={moveAxis}\n      bounds={{\n        top: 0,\n        bottom: grid.totalHeight - height,\n        left: 0,\n        right: grid.totalWidth,\n      }}\n      position={{ x: left, y: top }}\n      onDrag={handleDrag}\n      onStop={handleStop}\n      cancel={cancelClasses}\n      disabled={disabled}\n    >\n      <EventRootComponent\n        role=\"button\"\n        disabled={disabled}\n        onFocus={handleOnFocus}\n        onClick={handleOnClick}\n        handleDelete={handleDelete}\n        cellIndex={cellIndex}\n        rangeIndex={rangeIndex}\n        isActive={isActive}\n        classes={classes}\n        className={classcat([\n          classes.event,\n          classes['range-boxes'],\n          className,\n          {\n            [classes['is-draggable']]: !disabled && moveAxis !== 'none',\n            [classes['is-disabled']]: disabled,\n          },\n        ])}\n        ref={ref}\n        style={{\n          width: width - 4,\n          height: height - 4,\n          marginLeft: '2px',\n          marginTop: '2px',\n        }}\n      >\n        <Resizable\n          size={{ ...originalRect, width: originalRect.width - 4 }}\n          key={`${rangeIndex}.${cellIndex}.${cellArray.length}.${originalRect.top}.${originalRect.left}`}\n          onResize={handleResize}\n          onResizeStop={handleStop}\n          handleWrapperClass={classes['handle-wrapper']}\n          enable={\n            isResizable && !disabled\n              ? {\n                  top: true,\n                  bottom: true,\n                }\n              : {}\n          }\n          handleClasses={{\n            bottom: classcat([classes.handle, classes.bottom]),\n            bottomLeft: classes.handle,\n            bottomRight: classes.handle,\n            left: classes.handle,\n            right: classes.handle,\n            top: classcat([classes.handle, classes.top]),\n            topLeft: classes.handle,\n            topRight: classes.handle,\n          }}\n        >\n          <EventContentComponent\n            width={width}\n            height={height}\n            classes={classes}\n            dateRange={modifiedDateRange}\n            isStart={isStart}\n            isEnd={isEnd}\n            title={cell.title}\n          />\n        </Resizable>\n      </EventRootComponent>\n    </Draggable>\n  );\n});\n","import classcat from 'classcat';\nimport { isBefore } from 'date-fns';\nimport React from 'react';\nimport {\n  CellInfo,\n  ClassNames,\n  DateRange,\n  Grid,\n  OnChangeCallback,\n  ScheduleType,\n} from '../types';\nimport { RangeBox } from './RangeBox';\n\nexport type ScheduleProps = {\n  classes: ClassNames;\n  grid: Grid;\n  onChange?: OnChangeCallback;\n  isResizable?: boolean;\n  isDeletable?: boolean;\n  moveAxis: 'none' | 'both' | 'x' | 'y';\n  cellInfoToDateRange(cell: CellInfo): DateRange;\n  onActiveChange?(index: [number, number] | [null, null]): void;\n  onClick?(index: [number, number] | [null, null]): void;\n  getIsActive(indexes: { cellIndex: number; rangeIndex: number }): boolean;\n  eventContentComponent?: any;\n  eventRootComponent?: any;\n  disabled?: boolean;\n};\n\nexport const Schedule = React.memo(function Schedule({\n  classes,\n  ranges,\n  grid,\n  className,\n  onChange,\n  isResizable,\n  isDeletable,\n  moveAxis,\n  cellInfoToDateRange,\n  dateRangeToCells,\n  onActiveChange,\n  eventContentComponent,\n  eventRootComponent,\n  onClick,\n  getIsActive,\n}: {\n  dateRangeToCells(range: DateRange): CellInfo[];\n  ranges: ScheduleType;\n  className?: string;\n  classes: ClassNames;\n} & ScheduleProps) {\n  return (\n    <div className={classes['range-boxes']}>\n      {ranges.map((dateRange, rangeIndex) => {\n        const isPast = isBefore(dateRange[1], new Date());\n        return (\n          <span key={rangeIndex}>\n            {dateRangeToCells(dateRange).map((cell, cellIndex, cellArray) => {\n              const isGoogleEvent = cell.source === 'google';\n\n              return (\n                <RangeBox\n                  classes={classes}\n                  onActiveChange={onActiveChange}\n                  key={`${rangeIndex}.${ranges.length}.${cellIndex}.${cellArray.length}`}\n                  isResizable={isResizable}\n                  moveAxis={moveAxis}\n                  isDeletable={isDeletable}\n                  cellInfoToDateRange={cellInfoToDateRange}\n                  cellArray={cellArray}\n                  cellIndex={cellIndex}\n                  rangeIndex={rangeIndex}\n                  className={classcat([\n                    className,\n                    {\n                      [classes['is-past']]: isPast,\n                      [classes['is-google']]: isGoogleEvent,\n                    },\n                  ])}\n                  onChange={onChange}\n                  onClick={onClick}\n                  grid={grid}\n                  cell={cell}\n                  getIsActive={getIsActive}\n                  eventContentComponent={eventContentComponent}\n                  eventRootComponent={eventRootComponent}\n                  disabled={isGoogleEvent}\n                />\n              );\n            })}\n          </span>\n        );\n      })}\n    </div>\n  );\n});\n","import classcat from 'classcat';\nimport React, { useMemo } from 'react';\nimport Draggable from 'react-draggable';\nimport { CellInfo } from '../types';\nimport { DefaultEventRootComponent } from './DefaultEventRootComponent';\nimport { TimeIndicatorProps } from './TimeIndicator';\n\nexport const IndicatorLine = React.memo(function IndicatorLine({\n  classes,\n  grid,\n  cell,\n  eventRootComponent: EventRootComponent = DefaultEventRootComponent,\n}: TimeIndicatorProps & {\n  className?: string;\n  cell: CellInfo;\n}) {\n  const rect = useMemo(() => grid.getRectFromCell(cell), [cell, grid]);\n  const { top, left, width, height } = rect;\n\n  return (\n    <Draggable\n      bounds={{\n        top: 0,\n        bottom: grid.totalHeight - height,\n        left: 0,\n        right: grid.totalWidth,\n      }}\n      position={{ x: left, y: top }}\n      key={`draggable-${width}.${height}.${top}.${left}`}\n    >\n      <EventRootComponent\n        className={classcat([classes.indicator])}\n        style={{\n          width: width,\n          height: 2,\n        }}\n        key={`eventroot-${width}.${height}.${top}.${left}`}\n      ></EventRootComponent>\n    </Draggable>\n  );\n});\n","import classcat from 'classcat';\nimport React from 'react';\nimport { CellInfo, ClassNames, DateRange, Grid } from '../types';\nimport { IndicatorLine } from './IndicatorLine';\n\nexport type TimeIndicatorProps = {\n  classes: ClassNames;\n  grid: Grid;\n  cellInfoToDateRange(cell: CellInfo): DateRange;\n  eventRootComponent?: any;\n};\n\nexport const TimeIndicator = React.memo(function TimeIndicator({\n  classes,\n  currentTime,\n  grid,\n  className,\n  cellInfoToDateRange,\n  dateRangeToCells,\n  eventRootComponent,\n}: {\n  dateRangeToCells(range: DateRange): CellInfo[];\n  currentTime: DateRange;\n  className?: string;\n  classes: ClassNames;\n} & TimeIndicatorProps) {\n  // const [cellInfo, setCellInfo] = useState(dateRangeToCells(currentTime));\n\n  // useEffect(() => {\n  //   setCellInfo(dateRangeToCells(currentTime));\n  //   console.log(currentTime);\n  // }, [currentTime]);\n\n  return (\n    <div>\n      {dateRangeToCells(currentTime).map((cell, index) => {\n        return (\n          <IndicatorLine\n            key={`indicator-${index}`}\n            classes={classes}\n            cellInfoToDateRange={cellInfoToDateRange}\n            className={classcat([className])}\n            grid={grid}\n            cell={cell}\n            eventRootComponent={eventRootComponent}\n          />\n        );\n      })}\n    </div>\n  );\n});\n","import useComponentSize from '@rehooks/component-size';\nimport classcat from 'classcat';\nimport { isPast, isToday } from 'date-fns';\nimport addDays from 'date-fns/add_days';\nimport addHours from 'date-fns/add_hours';\nimport format from 'date-fns/format';\nimport isDateEqual from 'date-fns/is_equal';\nimport en from 'date-fns/locale/en';\nimport ja from 'date-fns/locale/ja';\nimport startOfDay from 'date-fns/start_of_day';\nimport invariant from 'invariant';\nimport isEqual from 'lodash/isEqual';\nimport times from 'lodash/times';\nimport { ExtendedKeyboardEvent } from 'mousetrap';\nimport React, {\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport scrollIntoView from 'scroll-into-view-if-needed';\nimport { useClickAndDrag } from '../hooks/useClickAndDrag';\nimport { useMousetrap } from '../hooks/useMousetrap';\nimport {\n  CellInfo,\n  ClassNames,\n  DateRange,\n  Grid,\n  OnChangeCallback,\n  ScheduleType,\n} from '../types';\nimport { createGrid } from '../utils/createGrid';\nimport {\n  createMapCellInfoToRecurringTimeRange,\n  RecurringTimeRange,\n} from '../utils/createMapCellInfoToRecurringTimeRange';\nimport { createMapDateRangeToCells } from '../utils/createMapDateRangeToCells';\nimport { getEarliestTimeRange } from '../utils/getEarliestTimeRange';\nimport { getSpan } from '../utils/getSpan';\nimport { mergeEvents, mergeRanges } from '../utils/mergeEvents';\nimport { Cell } from './Cell';\nimport { Schedule, ScheduleProps } from './Schedule';\nimport { TimeIndicator } from './TimeIndicator';\n\nconst MINS_IN_DAY = 24 * 60;\nconst horizontalPrecision = 1;\nconst toDay = (x: number): number => x * horizontalPrecision;\nconst toX = (days: number): number => days / horizontalPrecision;\nconst DELETE_KEYS = ['del', 'backspace'];\n\nexport const TimeGridScheduler = React.memo(function TimeGridScheduler({\n  verticalPrecision = 15,\n  visualGridVerticalPrecision = 30,\n  cellClickPrecision = visualGridVerticalPrecision,\n  style,\n  schedule,\n  originDate: _originDate = new Date(),\n  defaultHours = [9, 18],\n  classes,\n  className,\n  onChange,\n  onEventClick,\n  eventContentComponent,\n  eventRootComponent,\n  disabled,\n  localization,\n  currentTime,\n}: {\n  originDate?: Date;\n\n  /**\n   * The minimum number of minutes a created range can span\n   * @default 15\n   */\n  verticalPrecision?: number;\n\n  /**\n   * The visual grid increments in minutes.\n   * @default 30\n   */\n  visualGridVerticalPrecision?: number;\n\n  /**\n   * The minimum number of minutes for an time block\n   * created with a single click.\n   * @default visualGridVerticalPrecision\n   */\n  cellClickPrecision?: number;\n\n  /** Custom styles applied to the root of the view */\n  style?: React.CSSProperties;\n  schedule: ScheduleType;\n\n  /**\n   * A map of class names to the scoped class names\n   * The keys are class names like `'root'` and the values\n   * are the corresponding class names which can be scoped\n   * with CSS Modules, e.g. `'_root_7f2c6'`.\n   */\n  classes: ClassNames;\n  className?: string;\n\n  /**\n   * The view will initially be scrolled to these hours.\n   * Defaults to work hours (9-17).\n   * @default [9, 17]\n   */\n  defaultHours?: [number, number];\n\n  onChange(newSchedule: ScheduleType): void;\n  onEventClick?: ScheduleProps['onClick'];\n  eventContentComponent?: ScheduleProps['eventContentComponent'];\n  eventRootComponent?: ScheduleProps['eventRootComponent'];\n  disabled?: boolean;\n  localization: string;\n  currentTime: [string, string, string, string];\n}) {\n  const locale = localization === 'ja' ? ja : en;\n  const originDate = useMemo(() => startOfDay(_originDate), [_originDate]);\n  const numVerticalCells = MINS_IN_DAY / verticalPrecision;\n  const numHorizontalCells = 7 / horizontalPrecision;\n  const toMin = useCallback((y: number) => y * verticalPrecision, [\n    verticalPrecision,\n  ]);\n  const toY = useCallback((mins: number): number => mins / verticalPrecision, [\n    verticalPrecision,\n  ]);\n\n  const cellInfoToDateRanges = useMemo(() => {\n    return createMapCellInfoToRecurringTimeRange({\n      originDate,\n      fromY: toMin,\n      fromX: toDay,\n    });\n  }, [toMin, originDate]);\n\n  const cellInfoToSingleDateRange = useCallback(\n    (cell: CellInfo): DateRange => {\n      const [first, ...rest] = cellInfoToDateRanges(cell);\n      invariant(\n        rest.length === 0,\n        `Expected \"cellInfoToSingleDateRange\" to return a single date range, found ${rest.length}\n        additional ranges instead. This is a bug in @remotelock/react-week-scheduler`,\n      );\n\n      return first;\n    },\n    [cellInfoToDateRanges],\n  );\n\n  const dateRangeToCells = useMemo(() => {\n    return createMapDateRangeToCells({\n      originDate,\n      numVerticalCells,\n      numHorizontalCells,\n      toX,\n      toY,\n    });\n  }, [toY, numVerticalCells, numHorizontalCells, originDate]);\n\n  const root = useRef<HTMLDivElement | null>(null);\n  const parent = useRef<HTMLDivElement | null>(null);\n\n  const size = useComponentSize(parent);\n  const {\n    style: dragBoxStyle,\n    box,\n    isDragging,\n    hasFinishedDragging,\n    cancel,\n  } = useClickAndDrag(parent, disabled);\n  const [\n    pendingCreation,\n    setPendingCreation,\n  ] = useState<RecurringTimeRange | null>(null);\n\n  const [[totalHeight, totalWidth], setDimensions] = useState([0, 0]);\n\n  const numVisualVerticalCells = (24 * 60) / visualGridVerticalPrecision;\n\n  useEffect(\n    function updateGridDimensionsOnSizeOrCellCountChange() {\n      if (!parent.current) {\n        setDimensions([0, 0]);\n        return;\n      }\n\n      setDimensions([parent.current.scrollHeight, parent.current.scrollWidth]);\n    },\n    [size, numVisualVerticalCells],\n  );\n\n  const grid = useMemo<Grid | null>(() => {\n    if (totalHeight === null || totalWidth === null) {\n      return null;\n    }\n\n    return createGrid({\n      totalHeight,\n      totalWidth,\n      numHorizontalCells,\n      numVerticalCells,\n    });\n  }, [totalHeight, totalWidth, numHorizontalCells, numVerticalCells]);\n\n  useEffect(\n    function updatePendingCreationOnDragBoxUpdate() {\n      if (grid === null || box === null) {\n        setPendingCreation(null);\n        return;\n      }\n\n      const cell = grid.getCellFromRect(box);\n      const dateRanges = cellInfoToDateRanges(cell);\n      const event = dateRanges;\n      setPendingCreation(event);\n    },\n    [box, grid, cellInfoToDateRanges, toY],\n  );\n\n  const [[activeRangeIndex, activeCellIndex], setActive] = useState<\n    [number, number] | [null, null]\n  >([null, null]);\n\n  useEffect(\n    function updateScheduleAfterDraggingFinished() {\n      if (disabled) {\n        return;\n      }\n\n      if (hasFinishedDragging) {\n        onChange(mergeEvents(schedule, pendingCreation));\n        setPendingCreation(null);\n      }\n    },\n    [\n      hasFinishedDragging,\n      disabled,\n      onChange,\n      setPendingCreation,\n      pendingCreation,\n      schedule,\n    ],\n  );\n\n  useEffect(\n    function clearActiveBlockAfterCreation() {\n      if (pendingCreation === null) {\n        setActive([null, null]);\n      }\n    },\n    [pendingCreation],\n  );\n\n  const handleEventChange = useCallback<OnChangeCallback>(\n    (newDateRange, rangeIndex) => {\n      if (disabled) {\n        return;\n      }\n\n      if (!schedule && newDateRange) {\n        onChange([newDateRange]);\n\n        return;\n      }\n\n      let newSchedule = [...schedule];\n\n      if (!newDateRange) {\n        newSchedule.splice(rangeIndex, 1);\n      } else {\n        if (\n          isDateEqual(newDateRange[0], newSchedule[rangeIndex][0]) &&\n          isDateEqual(newDateRange[1], newSchedule[rangeIndex][1])\n        ) {\n          return;\n        }\n        newSchedule[rangeIndex] = newDateRange;\n      }\n\n      newSchedule = mergeRanges(newSchedule);\n\n      onChange(newSchedule);\n    },\n    [schedule, onChange, disabled],\n  );\n\n  useMousetrap(\n    'esc',\n    function cancelOnEsc() {\n      if (pendingCreation) {\n        cancel();\n      }\n    },\n    document,\n  );\n\n  const getIsActive = useCallback(\n    ({ rangeIndex, cellIndex }) => {\n      return rangeIndex === activeRangeIndex && cellIndex === activeCellIndex;\n    },\n    [activeCellIndex, activeRangeIndex],\n  );\n\n  const handleDelete = useCallback(\n    (e: ExtendedKeyboardEvent) => {\n      if (activeRangeIndex === null || disabled) {\n        return;\n      }\n\n      e.preventDefault();\n      e.stopPropagation();\n      handleEventChange(undefined, activeRangeIndex);\n    },\n    [activeRangeIndex, disabled, handleEventChange],\n  );\n\n  useMousetrap(DELETE_KEYS, handleDelete, root);\n\n  useEffect(\n    function cancelPendingCreationOnSizeChange() {\n      cancel();\n    },\n    [size, cancel],\n  );\n\n  const getDateRangeForVisualGrid = useMemo(() => {\n    return createMapCellInfoToRecurringTimeRange({\n      originDate,\n      fromX: toDay,\n      fromY: y => y * visualGridVerticalPrecision,\n      // source,\n      // title,\n    });\n  }, [visualGridVerticalPrecision, originDate]);\n\n  useEffect(\n    function scrollToActiveTimeBlock() {\n      if (!document.activeElement) {\n        return;\n      }\n\n      if (!root.current || !root.current.contains(document.activeElement)) {\n        return;\n      }\n\n      scrollIntoView(document.activeElement, {\n        scrollMode: 'if-needed',\n        block: 'nearest',\n        inline: 'nearest',\n      });\n    },\n    [schedule],\n  );\n\n  const [wasInitialScrollPerformed, setWasInitialScrollPerformed] = useState(\n    false,\n  );\n\n  useEffect(\n    function performInitialScroll() {\n      if (wasInitialScrollPerformed || !root.current || !grid) {\n        return;\n      }\n\n      const range = dateRangeToCells(\n        getEarliestTimeRange(schedule) || [\n          addHours(originDate, defaultHours[0]),\n          addHours(originDate, defaultHours[1]),\n          '',\n          '',\n        ],\n      );\n      const rect = grid.getRectFromCell(range[0]);\n      const { top, bottom } = rect;\n\n      if (top === 0 && bottom === 0) {\n        return;\n      }\n\n      // IE, Edge do not support it\n      if (!('scrollBy' in root.current)) {\n        return;\n      }\n\n      root.current.scrollBy(0, top);\n\n      setWasInitialScrollPerformed(true);\n    },\n    [\n      wasInitialScrollPerformed,\n      grid,\n      schedule,\n      defaultHours,\n      originDate,\n      dateRangeToCells,\n    ],\n  );\n\n  const handleBlur: React.FocusEventHandler = useCallback(\n    event => {\n      if (!event.target.contains(document.activeElement)) {\n        setActive([null, null]);\n      }\n    },\n    [setActive],\n  );\n\n  const handleCellClick = useCallback(\n    (dayIndex: number, timeIndex: number) => (event: React.MouseEvent) => {\n      if (!grid || disabled) {\n        return;\n      }\n\n      const spanY = toY(cellClickPrecision);\n      const cell = {\n        startX: dayIndex,\n        startY: timeIndex,\n        endX: dayIndex,\n        endY: spanY + timeIndex,\n        spanY,\n        spanX: getSpan(dayIndex, dayIndex),\n        source: '',\n        title: '',\n      };\n\n      const dateRanges = cellInfoToDateRanges(cell);\n\n      setPendingCreation(dateRanges);\n\n      event.stopPropagation();\n      event.preventDefault();\n    },\n    [grid, disabled, toY, cellClickPrecision, cellInfoToDateRanges],\n  );\n\n  return (\n    <div\n      ref={root}\n      style={style}\n      onBlur={handleBlur}\n      touch-action={isDragging ? 'none' : undefined}\n      className={classcat([\n        classes.root,\n        classes.theme,\n        className,\n        { [classes['no-scroll']]: isDragging },\n      ])}\n    >\n      <div className={classes['grid-root']}>\n        <div\n          aria-hidden\n          className={classcat([classes.timeline, classes['sticky-left']])}\n        >\n          <div className={classes.header}>\n            <div className={classes['day-column']}>\n              <div className={classcat([classes.cell, classes.title])}>T</div>\n            </div>\n          </div>\n          <div className={classes.calendar}>\n            <div className={classes['day-column']}>\n              <div className={classes['day-hours']}>\n                {times(numVisualVerticalCells).map(timeIndex => {\n                  return (\n                    <Cell\n                      classes={classes}\n                      getDateRangeForVisualGrid={getDateRangeForVisualGrid}\n                      key={timeIndex}\n                      timeIndex={timeIndex}\n                    >\n                      {({ start, isHourStart }) => {\n                        if (isHourStart) {\n                          return (\n                            <div className={classes.time}>\n                              {format(start, 'hh:mm', { locale })}\n                            </div>\n                          );\n                        }\n\n                        return null;\n                      }}\n                    </Cell>\n                  );\n                })}\n              </div>\n            </div>\n          </div>\n        </div>\n        <div\n          className={classcat([\n            classes['sticky-top'],\n            classes['day-header-row'],\n          ])}\n        >\n          <div\n            role=\"presentation\"\n            className={classcat([classes.calendar, classes.header])}\n          >\n            {times(7).map(i => (\n              <div\n                key={i}\n                role=\"presentation\"\n                className={classes['day-column']}\n              >\n                <div\n                  className={classcat([\n                    classes.cell,\n                    classes.title,\n                    { [classes['is-past']]: isPast(addDays(originDate, i)) },\n                    {\n                      [classes['is-current']]: isToday(addDays(originDate, i)),\n                    },\n                  ])}\n                >\n                  <span>\n                    {format(addDays(originDate, i), 'ddd ', { locale })}\n                  </span>\n                  <span>\n                    {format(addDays(originDate, i), 'MMM ', { locale })}\n                  </span>\n                  <span className={classes.date}>\n                    {format(addDays(originDate, i), 'D', { locale })}\n                  </span>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n        <div className={classes['layer-container']}>\n          {isDragging && (\n            <div className={classes['drag-box']} style={dragBoxStyle}>\n              {hasFinishedDragging && <div className={classes.popup} />}\n            </div>\n          )}\n          {grid && pendingCreation && isDragging && (\n            <Schedule\n              classes={classes}\n              dateRangeToCells={dateRangeToCells}\n              cellInfoToDateRange={cellInfoToSingleDateRange}\n              className={classes['is-pending-creation']}\n              ranges={mergeEvents(schedule, pendingCreation)}\n              grid={grid}\n              moveAxis=\"none\"\n              eventContentComponent={eventContentComponent}\n              getIsActive={getIsActive}\n            />\n          )}\n          {grid && !pendingCreation && (\n            <Schedule\n              classes={classes}\n              onActiveChange={setActive}\n              dateRangeToCells={dateRangeToCells}\n              cellInfoToDateRange={cellInfoToSingleDateRange}\n              isResizable\n              moveAxis=\"y\"\n              isDeletable\n              onChange={handleEventChange}\n              onClick={onEventClick}\n              ranges={schedule}\n              grid={grid}\n              eventContentComponent={eventContentComponent}\n              eventRootComponent={eventRootComponent}\n              getIsActive={getIsActive}\n              disabled={disabled}\n            />\n          )}\n          {grid && (\n            <TimeIndicator\n              key={`time-${currentTime}`}\n              classes={classes}\n              dateRangeToCells={dateRangeToCells}\n              cellInfoToDateRange={cellInfoToSingleDateRange}\n              currentTime={\n                (currentTime as unknown) as [Date, Date, string, string]\n              }\n              grid={grid}\n            />\n          )}\n\n          <div ref={parent} role=\"grid\" className={classes.calendar}>\n            {times(7).map(dayIndex => {\n              const isPassed = isPast(addDays(originDate, dayIndex + 1));\n              return (\n                <div\n                  role=\"gridcell\"\n                  key={dayIndex}\n                  className={classes['day-column']}\n                >\n                  <div\n                    className={classcat([\n                      classes['day-hours'],\n                      {\n                        [classes['is-past']]: isPassed,\n                      },\n                    ])}\n                  >\n                    {times(numVisualVerticalCells).map(timeIndex => {\n                      return (\n                        <Cell\n                          classes={classes}\n                          onClick={\n                            !isPassed\n                              ? handleCellClick(\n                                  dayIndex,\n                                  timeIndex *\n                                    (numVerticalCells / numVisualVerticalCells),\n                                )\n                              : undefined\n                          }\n                          getDateRangeForVisualGrid={getDateRangeForVisualGrid}\n                          key={timeIndex}\n                          timeIndex={timeIndex}\n                        />\n                      );\n                    })}\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}, isEqual);\n"],"names":["DefaultEventRootComponent","React","memo","forwardRef","ref","isActive","handleDelete","cellIndex","rangeIndex","classes","disabled","props","displayName","createPageMapCoordsToContainer","container","event","clientX","clientY","pageX","pageY","changedTouches","getBoundingClientRect","top","left","x","y","prevent","tap","e","preventDefault","stopPropagation","useClickAndDrag","isDisabled","useState","transform","width","height","style","setStyle","box","setBox","isDragging","setIsDragging","hasFinishedDragging","setHasFinishedDragging","current","useEffect","mapCoordsToContainer","touchMove$","fromEvent","window","passive","pipe","touchEnd$","touchStart$","touchStartWithDelay$","mergeMap","start","of","delay","takeUntil","mouseDown$","filter","which","mouseMove$","mouseUp$","dragStart$","merge","map","dragEnd$","move$","box$","down","startWith","move","startX","Math","max","startY","endX","min","scrollWidth","endY","scrollHeight","bottom","right","source","title","rect","style$","display","boxSubscriber","subscribe","styleSubscriber","unsubscribe","cancel","useCallback","useMousetrap","handlerKey","handlerCallback","elementOrElementRef","actionRef","useRef","element","document","instance","Mousetrap","bind","combo","unbind","getSpan","x1","x2","abs","createGrid","totalHeight","totalWidth","numVerticalCells","numHorizontalCells","cellHeight","cellWidth","getRectFromCell","data","spanX","spanY","getCellFromRect","clamp","floor","round","cellToDate","toMin","originDate","addMinutes","addDays","createMapCellInfoToRecurringTimeRange","fromY","toDay","fromX","result","range","i","startDate","endDate","endOfDay","isBefore","sort","range1","range2","compareAsc","createMapDateRangeToCells","toX","toY","end","originOfThisDay","startOfDay","_startX","differenceInDays","_startY","differenceInMinutes","_endX","_endY","cells","atStart","atEnd","isEqual","pop","getEarliestTimeRange","ranges","startA","startB","setDay","mergeRanges","_mergeRanges","d","Date","mergeEvents","event1","event2","Cell","timeIndex","children","getDateRangeForVisualGrid","onClick","isHourStart","getMinutes","classcat","cell","SchedulerContext","createContext","locale","en","formatTemplate","dropSame","dates","template","takeSecond","date","format","first","second","formatHour","getFormattedComponentsForDateRange","dateRange","template2","includeDayIfSame","isSameDay","firstM","secondM","day","startDateStr","endDateStr","getTextForDateRange","options","join","EventContent","isStart","isEnd","useContext","isFifteenMinuteMeeting","padding","RangeBox","grid","cellArray","className","onChange","cellInfoToDateRange","isResizable","moveAxis","onActiveChange","getIsActive","eventContentComponent","EventContentComponent","eventRootComponent","EventRootComponent","modifiedCell","setModifiedCell","originalRect","useMemo","modifiedDateRange","length","handleStop","newCell","handleDrag","newRect","startOrEnd1","startOrEnd2","newTop","newBottom","newLeft","newRight","invariant","handleResize","direction","_ref","delta","newSize","includes","undefined","handleOnFocus","handleOnClick","cancelClasses","handle","split","marginLeft","marginTop","bottomLeft","bottomRight","topLeft","topRight","Schedule","isDeletable","dateRangeToCells","isPast","isGoogleEvent","IndicatorLine","indicator","TimeIndicator","currentTime","index","MINS_IN_DAY","horizontalPrecision","days","DELETE_KEYS","TimeGridScheduler","verticalPrecision","visualGridVerticalPrecision","cellClickPrecision","schedule","_originDate","defaultHours","onEventClick","localization","ja","mins","cellInfoToDateRanges","cellInfoToSingleDateRange","rest","root","parent","size","useComponentSize","dragBoxStyle","pendingCreation","setPendingCreation","setDimensions","numVisualVerticalCells","updateGridDimensionsOnSizeOrCellCountChange","updatePendingCreationOnDragBoxUpdate","dateRanges","activeRangeIndex","activeCellIndex","setActive","updateScheduleAfterDraggingFinished","clearActiveBlockAfterCreation","handleEventChange","newDateRange","newSchedule","splice","isDateEqual","cancelOnEsc","cancelPendingCreationOnSizeChange","scrollToActiveTimeBlock","activeElement","contains","scrollIntoView","scrollMode","block","inline","wasInitialScrollPerformed","setWasInitialScrollPerformed","performInitialScroll","addHours","scrollBy","handleBlur","target","handleCellClick","dayIndex","theme","timeline","header","calendar","times","time","isToday","popup","isPassed"],"mappings":"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"}