{"version":3,"file":"index.js","sources":["src/components/DefaultEventRootComponent.tsx","src/context.ts","src/utils/createPageMapCoordsToContainer.ts","src/hooks/useClickAndDrag.ts","src/hooks/useMousetrap.ts","src/utils/getSpan.ts","src/utils/createGrid.ts","src/utils/cellToDate.ts","src/utils/createMapCellInfoToRecurringTimeRange.ts","src/utils/createMapDateRangeToCells.ts","src/utils/getEarliestTimeRange.ts","src/utils/mergeEvents.ts","src/components/Cell.tsx","src/utils/getTextForDateRange.ts","src/components/EventContent.tsx","src/components/RangeBox.tsx","src/components/Schedule.tsx","src/components/TimeGridScheduler.tsx"],"sourcesContent":["import React from 'react';\nimport { EventRootProps } from '../types';\n\nexport const DefaultEventRootComponent = React.memo(\n  React.forwardRef<any, EventRootProps>(function DefaultEventRootComponent(\n    {\n      isActive,\n      handleDelete,\n      cellIndex,\n      rangeIndex,\n      classes,\n      disabled,\n      ...props\n    },\n    ref,\n  ) {\n    return <div ref={ref} aria-disabled={disabled} {...props} />;\n  }),\n);\n","import en from 'date-fns/locale/en';\nimport { createContext } from 'react';\n\nexport const SchedulerContext = createContext({ locale: en });\n","export const createPageMapCoordsToContainer = (container: HTMLElement) => {\n  return (event: React.MouseEvent | MouseEvent | TouchEvent) => {\n    let clientX: number;\n    let clientY: number;\n    let pageX: number;\n    let pageY: number;\n\n    if ('changedTouches' in event) {\n      ({ clientX, clientY, pageX, pageY } = event.changedTouches[0]);\n    } else {\n      ({ clientX, clientY, pageX, pageY } = event);\n    }\n    const { top, left } = container.getBoundingClientRect();\n\n    return {\n      clientX,\n      clientY,\n      pageX,\n      pageY,\n      top,\n      left,\n      x: clientX - left,\n      y: clientY - top,\n    };\n  };\n};\n","import React, { useCallback, useEffect, useState } from 'react';\nimport { fromEvent, merge, Observable, of } from 'rxjs';\nimport {\n  delay,\n  filter,\n  map,\n  mergeMap,\n  startWith,\n  takeUntil,\n  tap,\n} from 'rxjs/operators';\nimport { Rect } from '../types';\nimport { createPageMapCoordsToContainer } from '../utils/createPageMapCoordsToContainer';\n\nconst prevent = tap((e: TouchEvent) => {\n  e.preventDefault();\n  e.stopPropagation();\n});\n\nexport function useClickAndDrag(\n  ref: React.RefObject<HTMLElement>,\n  isDisabled?: boolean,\n) {\n  const [style, setStyle] = useState<React.CSSProperties>({\n    transform: 'translate(0, 0)',\n    width: 0,\n    height: 0,\n  });\n  const [box, setBox] = useState<Rect | null>(null);\n  const [isDragging, setIsDragging] = useState(false);\n  const [hasFinishedDragging, setHasFinishedDragging] = useState(false);\n  const container = ref.current;\n\n  useEffect(() => {\n    if (!container || isDisabled) {\n      return;\n    }\n\n    const mapCoordsToContainer = createPageMapCoordsToContainer(container);\n\n    const touchMove$ = fromEvent<TouchEvent>(window, 'touchmove', {\n      passive: false,\n    }).pipe(prevent);\n\n    const touchEnd$ = fromEvent<TouchEvent>(window, 'touchend', {\n      passive: true,\n    });\n\n    const touchStart$ = fromEvent<TouchEvent>(container, 'touchstart', {\n      passive: false,\n    });\n\n    const touchStartWithDelay$ = touchStart$.pipe(\n      mergeMap(start =>\n        of(start).pipe(\n          delay(300),\n          takeUntil(touchMove$),\n          prevent,\n        ),\n      ),\n    );\n\n    const mouseDown$ = fromEvent<MouseEvent>(container, 'mousedown', {\n      passive: true,\n    }).pipe(filter(event => event.which === 1));\n\n    const mouseMove$ = fromEvent<MouseEvent>(window, 'mousemove', {\n      passive: true,\n    });\n\n    const mouseUp$ = fromEvent<MouseEvent>(window, 'mouseup', {\n      passive: true,\n    });\n\n    const dragStart$ = merge(mouseDown$, touchStartWithDelay$).pipe(\n      map(mapCoordsToContainer),\n    );\n\n    const dragEnd$ = merge(mouseUp$, touchEnd$).pipe(\n      map(mapCoordsToContainer),\n      tap(() => {\n        setIsDragging(false);\n        setHasFinishedDragging(true);\n      }),\n    );\n\n    const move$ = merge(mouseMove$, touchMove$).pipe(map(mapCoordsToContainer));\n\n    const box$: Observable<Rect | null> = dragStart$.pipe(\n      tap(() => {\n        setIsDragging(true);\n        setHasFinishedDragging(false);\n      }),\n      mergeMap(down => {\n        return move$.pipe(\n          startWith(down),\n          map(\n            (move): Rect => {\n              const startX = Math.max(down.x, 0);\n              const startY = Math.max(down.y, 0);\n              const endX = Math.min(move.x, container.scrollWidth);\n              const endY = Math.min(move.y, container.scrollHeight);\n              const top = Math.min(startY, endY);\n              const bottom = Math.max(startY, endY);\n              const left = Math.min(startX, endX);\n              const right = Math.max(startX, endX);\n\n              return {\n                startX,\n                startY,\n                endX,\n                endY,\n                top,\n                bottom,\n                left,\n                right,\n                width: right - left,\n                height: bottom - top,\n              };\n            },\n          ),\n          takeUntil(dragEnd$),\n        );\n      }),\n      map(rect => {\n        return rect.width === 0 && rect.height === 0 ? null : rect;\n      }),\n    );\n\n    const style$ = box$.pipe(\n      map(rect => {\n        if (rect !== null) {\n          const { width, height, left, top } = rect;\n          return {\n            transform: `translate(${left}px, ${top}px)`,\n            width,\n            height,\n          };\n        }\n\n        return { display: 'none' };\n      }),\n    );\n\n    const boxSubscriber = box$.subscribe(setBox);\n    const styleSubscriber = style$.subscribe(setStyle);\n\n    return () => {\n      boxSubscriber.unsubscribe();\n      styleSubscriber.unsubscribe();\n    };\n  }, [container, isDisabled]);\n\n  const cancel = useCallback(() => {\n    setIsDragging(false);\n    setHasFinishedDragging(false);\n    setBox(null);\n  }, []);\n\n  return { style, box, isDragging, cancel, hasFinishedDragging };\n}\n","import Mousetrap from 'mousetrap';\nimport { useEffect, useRef } from 'react';\n\n/**\n * Use mousetrap hook\n *\n * @param handlerKey - A key, key combo or array of combos according to Mousetrap documentation.\n * @param  handlerCallback - A function that is triggered on key combo catch.\n */\nexport function useMousetrap(\n  handlerKey: string | string[],\n  handlerCallback: (e: ExtendedKeyboardEvent, combo: string) => void,\n  elementOrElementRef: typeof document | React.RefObject<Element | null>,\n) {\n  const actionRef = useRef<typeof handlerCallback | null>(null);\n  actionRef.current = handlerCallback;\n  const element =\n    'current' in elementOrElementRef ? elementOrElementRef.current : document;\n\n  useEffect(() => {\n    const instance = new Mousetrap(element as Element);\n\n    instance.bind(handlerKey, (e, combo) => {\n      typeof actionRef.current === 'function' && actionRef.current(e, combo);\n    });\n\n    return () => {\n      instance.unbind(handlerKey);\n    };\n  }, [handlerKey, element]);\n}\n","export const getSpan = (x1: number, x2: number) => 1 + Math.abs(x2 - x1);\n","import clamp from 'lodash/clamp';\nimport floor from 'lodash/floor';\nimport round from 'lodash/round';\nimport { CellInfo, Grid, Rect } from '../types';\nimport { getSpan } from './getSpan';\n\nexport const createGrid = ({\n  totalHeight,\n  totalWidth,\n  numVerticalCells,\n  numHorizontalCells,\n}: {\n  totalHeight: number;\n  totalWidth: number;\n  numVerticalCells: number;\n  numHorizontalCells: number;\n}): Grid => {\n  const cellHeight = totalHeight / numVerticalCells;\n  const cellWidth = totalWidth / numHorizontalCells;\n\n  return {\n    totalHeight,\n    totalWidth,\n    numVerticalCells,\n    numHorizontalCells,\n    cellWidth,\n    cellHeight,\n\n    getRectFromCell(data: CellInfo) {\n      const { endX, startX, endY, startY, spanX, spanY, source } = data;\n      const bottom = endY * this.cellHeight;\n      const top = startY * this.cellHeight;\n      const left = startX * this.cellWidth;\n      const right = endX * this.cellWidth;\n      const height = spanY * this.cellHeight;\n      const width = spanX * this.cellWidth;\n\n      return {\n        bottom,\n        top,\n        left,\n        right,\n        height,\n        width,\n        source,\n\n        // @TODO: check the math\n        startX: startX * this.cellWidth,\n        endX: endX * this.cellWidth,\n        startY: startY * this.cellHeight,\n        endY: endY * this.cellHeight,\n      };\n    },\n\n    getCellFromRect(data: Rect) {\n      const startX = clamp(\n        floor(data.left / this.cellWidth),\n        0,\n        numHorizontalCells - 1,\n      );\n      const startY = clamp(\n        round(data.top / this.cellHeight),\n        0,\n        numVerticalCells - 1,\n      );\n      const endX = clamp(\n        floor(data.right / this.cellWidth),\n        0,\n        numHorizontalCells - 1,\n      );\n      const endY = clamp(\n        round(data.bottom / this.cellHeight),\n        0,\n        numVerticalCells - 1,\n      );\n      const spanX = clamp(getSpan(startX, endX), 1, numHorizontalCells);\n      const spanY = clamp(getSpan(startY, endY), 1, numVerticalCells);\n      const source = data.source;\n\n      return {\n        spanX,\n        spanY,\n        startX,\n        startY,\n        endX,\n        endY,\n        source\n      };\n    },\n  };\n};\n","import addDays from 'date-fns/add_days';\nimport addMinutes from 'date-fns/add_minutes';\n\nexport const cellToDate = ({\n  startX,\n  startY,\n  toMin,\n  originDate,\n}: {\n  startX: number;\n  startY: number;\n  toMin: (y: number) => number;\n  toDay: (x: number) => number;\n  originDate: Date;\n}) => addMinutes(addDays(originDate, startX), toMin(startY));\n","import addMinutes from 'date-fns/add_minutes';\nimport compareAsc from 'date-fns/compare_asc';\nimport endOfDay from 'date-fns/end_of_day';\nimport isBefore from 'date-fns/is_before';\nimport min from 'date-fns/min';\nimport range from 'lodash/range';\nimport { DateRange, MapCellInfoToDateRange } from '../types';\nimport { cellToDate } from './cellToDate';\n\nexport type RecurringTimeRange = DateRange[];\n\nexport const createMapCellInfoToRecurringTimeRange: MapCellInfoToDateRange = ({\n  fromY: toMin,\n  fromX: toDay,\n  originDate,\n}) => ({ startX, startY, endX, spanY }) => {\n  const result = range(startX, endX + 1)\n    .map(i => {\n      const startDate = cellToDate({\n        startX: i,\n        startY,\n        toMin,\n        toDay,\n        originDate,\n      });\n      let endDate = min(\n        addMinutes(startDate, toMin(spanY)),\n        endOfDay(startDate),\n      );\n\n      const range: DateRange = isBefore(startDate, endDate)\n        ? [startDate, endDate]\n        : [endDate, startDate];\n\n      return range;\n    })\n    .sort((range1, range2) => compareAsc(range1[0], range2[0]));\n\n  return result;\n};\n","import differenceInDays from 'date-fns/difference_in_days';\nimport differenceInMinutes from 'date-fns/difference_in_minutes';\nimport isEqual from 'date-fns/is_equal';\nimport startOfDay from 'date-fns/start_of_day';\nimport range from 'lodash/range';\nimport { CellInfo, DateRange } from '../types';\nimport { getSpan } from './getSpan';\n\nexport const createMapDateRangeToCells = ({\n  toX = (x: number) => x,\n  toY,\n  numVerticalCells,\n  originDate,\n}: {\n  toX: (day: number) => number;\n  toY: (min: number) => number;\n  numHorizontalCells: number;\n  numVerticalCells: number;\n  originDate: Date;\n}) => ([start, end, source]: DateRange): CellInfo[] => {\n  const originOfThisDay = startOfDay(start);\n  const _startX = toX(differenceInDays(start, originDate));\n  const _startY = toY(differenceInMinutes(start, originOfThisDay));\n  const _endX = toX(differenceInDays(end, originDate));\n  const _endY = toY(differenceInMinutes(end, startOfDay(end))) - 1;\n\n  const cells = range(_startX, _endX + 1).map(i => {\n    const startX = i;\n    const endX = i;\n    const atStart = i === _startX;\n    const atEnd = i === _endX;\n    const startY = !atStart ? 0 : _startY;\n    const endY = !atEnd ? numVerticalCells - 1 : _endY;\n    const spanX = getSpan(startX, endX);\n    const spanY = getSpan(startY, endY);\n\n    return {\n      startX,\n      startY,\n      endX,\n      endY,\n      spanX,\n      spanY,\n      source\n    };\n  });\n\n  if (isEqual(end, startOfDay(end))) {\n    cells.pop();\n  }\n\n  return cells;\n};\n","import compareAsc from 'date-fns/compare_asc';\nimport setDay from 'date-fns/set_day';\nimport { DateRange } from '../types';\n\nexport function getEarliestTimeRange(\n  ranges: DateRange[],\n): DateRange | undefined {\n  return [...ranges].sort(([startA], [startB]) =>\n    compareAsc(setDay(startA, 0), setDay(startB, 0)),\n  )[0];\n}\n","import compareAsc from 'date-fns/compare_asc';\nimport _mergeRanges from 'merge-ranges';\nimport { ScheduleType } from '../types';\n\nexport function mergeRanges(event: ScheduleType): ScheduleType {\n  return _mergeRanges(\n    [...event].map(\n      d => [new Date(d[0]), new Date(d[1]), d[2]] as [Date, Date, string],\n    ),\n  );\n}\n\nexport function mergeEvents(\n  event1: ScheduleType,\n  event2: ScheduleType | null,\n): ScheduleType {\n  if (event2 === null) {\n    return event1;\n  }\n\n  return mergeRanges([...event1, ...event2]).sort((range1, range2) =>\n    compareAsc(range1[0], range2[0]),\n  );\n}\n","import classcat from 'classcat';\nimport getMinutes from 'date-fns/get_minutes';\nimport React from 'react';\nimport { CellInfo, ClassNames, DateRange } from '../types';\n\nexport const Cell = React.memo(function Cell({\n  timeIndex,\n  children,\n  classes,\n  getDateRangeForVisualGrid,\n  onClick,\n}: {\n  timeIndex: number;\n  classes: ClassNames;\n  getDateRangeForVisualGrid(cell: CellInfo): DateRange[];\n  children?(options: { start: Date; isHourStart: boolean }): React.ReactNode;\n  onClick?: React.MouseEventHandler;\n}) {\n  const [[start]] = getDateRangeForVisualGrid({\n    startX: 0,\n    startY: timeIndex,\n    endX: 0,\n    endY: timeIndex + 1,\n    spanX: 1,\n    spanY: 1,\n    source: '',\n  });\n\n  const isHourStart = getMinutes(start) === 0;\n\n  return (\n    <div\n      role=\"button\"\n      onClick={onClick}\n      className={classcat([\n        classes.cell,\n        { [classes['is-hour-start']]: isHourStart },\n      ])}\n    >\n      {children && children({ start, isHourStart })}\n    </div>\n  );\n});\n","import format from 'date-fns/format';\nimport getMinutes from 'date-fns/get_minutes';\nimport isSameDay from 'date-fns/is_same_day';\n\nconst formatTemplate = 'ddd h:mma';\n\nconst dropSame = (\n  dates: [Date, Date],\n  template: string,\n  takeSecond: boolean = false,\n  locale: typeof import('date-fns/locale/en'),\n): [string, string] => {\n  const [first, second] = dates.map(date => format(date, template, { locale }));\n  if (first !== second) {\n    return [first, second];\n  }\n\n  if (takeSecond) {\n    return ['', second];\n  }\n\n  return [first, ''];\n};\n\nconst formatHour = (\n  date: Date,\n  locale: typeof import('date-fns/locale/en'),\n) => {\n  if (getMinutes(date) === 0) {\n    return format(date, 'h', { locale });\n  }\n\n  return format(date, 'h:mm', { locale });\n};\n\ntype Options = {\n  dateRange: [Date, Date];\n  locale: typeof import('date-fns/locale/en');\n  template?: string;\n  template2?: string;\n  includeDayIfSame?: boolean;\n};\n\nexport const getFormattedComponentsForDateRange = ({\n  dateRange,\n  locale,\n  template,\n  template2,\n  includeDayIfSame = true,\n}: Options) => {\n  const start = dateRange[0];\n  const end = dateRange[dateRange.length - 1];\n\n  if (isSameDay(start, end) && !template) {\n    const [firstM, secondM] = dropSame(dateRange, 'a', true, locale);\n    const day = includeDayIfSame ? `${format(start, 'ddd', { locale })} ` : '';\n    return [\n      `${day}${formatHour(start, {\n        locale,\n      })}${firstM}`,\n      `${formatHour(end, { locale })}${secondM}`,\n    ];\n  }\n\n  const startDateStr = format(start, template || formatTemplate, { locale });\n  const endDateStr = format(end, template2 || formatTemplate, { locale });\n\n  return [startDateStr, endDateStr];\n};\n\nexport const getTextForDateRange = (options: Options) => {\n  return getFormattedComponentsForDateRange(options).join(' â€“ ');\n};\n","// @ts-ignore\nimport VisuallyHidden from '@reach/visually-hidden';\nimport React, { useContext } from 'react';\nimport { SchedulerContext } from '../context';\nimport { ClassNames } from '../types';\nimport {\n  getFormattedComponentsForDateRange,\n  getTextForDateRange,\n} from '../utils/getTextForDateRange';\n\nexport type EventContentProps = {\n  width: number;\n  height: number;\n  classes: ClassNames;\n  dateRange: [Date, Date];\n  isStart: boolean;\n  isEnd: boolean;\n};\n\nexport const EventContent = React.memo(function EventContent({\n  width,\n  height,\n  classes,\n  dateRange,\n  isStart,\n  isEnd,\n}: EventContentProps) {\n  const { locale } = useContext(SchedulerContext);\n  const [start, end] = getFormattedComponentsForDateRange({\n    dateRange,\n    locale,\n    includeDayIfSame: false,\n  });\n  const isFifteenMinuteMeeting = height < 25 ? '0 10px' : '';\n\n  return (\n    <div\n      style={{\n        width: width - 4,\n        height: height - 4,\n        padding: isFifteenMinuteMeeting,\n      }}\n      className={classes['event-content']}\n    >\n      <VisuallyHidden>\n        {getTextForDateRange({ dateRange, locale })}\n      </VisuallyHidden>\n      <span aria-hidden className={classes.start}>\n        {isStart && start}\n      </span>\n      <span aria-hidden className={classes.end}>\n        {isEnd && end}\n      </span>\n    </div>\n  );\n});\n","import classcat from 'classcat';\nimport invariant from 'invariant';\nimport Resizable, { ResizeCallback } from 're-resizable';\nimport React, {\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport Draggable, { DraggableEventHandler } from 'react-draggable';\nimport { useMousetrap } from '../hooks/useMousetrap';\nimport { CellInfo } from '../types';\nimport { DefaultEventRootComponent } from './DefaultEventRootComponent';\nimport { EventContent } from './EventContent';\nimport { ScheduleProps } from './Schedule';\n\nexport const RangeBox = React.memo(function RangeBox({\n  classes,\n  grid,\n  rangeIndex,\n  cellIndex,\n  cellArray,\n  cell,\n  className,\n  onChange,\n  cellInfoToDateRange,\n  isResizable,\n  moveAxis,\n  onActiveChange,\n  onClick,\n  getIsActive,\n  eventContentComponent: EventContentComponent = EventContent,\n  eventRootComponent: EventRootComponent = DefaultEventRootComponent,\n  disabled,\n}: ScheduleProps & {\n  cellIndex: number;\n  cellArray: CellInfo[];\n  className?: string;\n  rangeIndex: number;\n  cell: CellInfo;\n}) {\n  const ref = useRef(null);\n  const [modifiedCell, setModifiedCell] = useState(cell);\n  const originalRect = useMemo(() => grid.getRectFromCell(cell), [cell, grid]);\n  const rect = useMemo(() => grid.getRectFromCell(modifiedCell), [\n    modifiedCell,\n    grid,\n  ]);\n\n  useEffect(() => {\n    setModifiedCell(cell);\n  }, [cell]);\n\n  const modifiedDateRange = useMemo(() => cellInfoToDateRange(modifiedCell), [\n    cellInfoToDateRange,\n    modifiedCell,\n  ]);\n\n  const { top, left, width, height } = rect;\n\n  const isStart = cellIndex === 0;\n  const isEnd = cellIndex === cellArray.length - 1;\n\n  const handleStop = useCallback(() => {\n    if (!onChange || disabled) {\n      return;\n    }\n\n    onChange(cellInfoToDateRange(modifiedCell), rangeIndex);\n  }, [modifiedCell, rangeIndex, disabled, cellInfoToDateRange, onChange]);\n\n  const isActive = useMemo(() => getIsActive({ cellIndex, rangeIndex }), [\n    cellIndex,\n    rangeIndex,\n    getIsActive,\n  ]);\n\n  useMousetrap(\n    'up',\n    () => {\n      if (!onChange || disabled || !isActive) {\n        return;\n      }\n\n      if (moveAxis === 'none' || moveAxis === 'x') {\n        return;\n      }\n\n      if (modifiedCell.startY === 0) {\n        return;\n      }\n\n      const newCell = {\n        ...modifiedCell,\n        startY: modifiedCell.startY - 1,\n        endY: modifiedCell.endY - 1,\n      };\n\n      onChange(cellInfoToDateRange(newCell), rangeIndex);\n    },\n    ref,\n  );\n\n  useMousetrap(\n    'shift+up',\n    () => {\n      if (!onChange || !isResizable || disabled || !isActive) {\n        return;\n      }\n\n      if (\n        modifiedCell.endY === modifiedCell.startY ||\n        modifiedCell.spanY === 0\n      ) {\n        return;\n      }\n\n      const newCell = {\n        ...modifiedCell,\n        endY: modifiedCell.endY - 1,\n        spanY: modifiedCell.spanY - 1,\n      };\n\n      onChange(cellInfoToDateRange(newCell), rangeIndex);\n    },\n    ref,\n  );\n\n  useMousetrap(\n    'down',\n    () => {\n      if (!onChange || disabled || !isActive) {\n        return;\n      }\n\n      if (moveAxis === 'none' || moveAxis === 'x') {\n        return;\n      }\n\n      if (Math.round(modifiedCell.endY) >= grid.numVerticalCells - 1) {\n        return;\n      }\n\n      const newCell = {\n        ...modifiedCell,\n        startY: modifiedCell.startY + 1,\n        endY: modifiedCell.endY + 1,\n      };\n\n      onChange(cellInfoToDateRange(newCell), rangeIndex);\n    },\n    ref,\n  );\n\n  useMousetrap(\n    'shift+down',\n    () => {\n      if (!onChange || !isResizable || disabled || !isActive) {\n        return;\n      }\n\n      if (moveAxis === 'none' || moveAxis === 'x') {\n        return;\n      }\n\n      if (Math.round(modifiedCell.endY) >= grid.numVerticalCells - 1) {\n        return;\n      }\n\n      const newCell = {\n        ...modifiedCell,\n        spanY: modifiedCell.spanY + 1,\n        endY: modifiedCell.endY + 1,\n      };\n\n      onChange(cellInfoToDateRange(newCell), rangeIndex);\n    },\n    ref,\n  );\n\n  const handleDrag: DraggableEventHandler = useCallback(\n    (event, { y, x }) => {\n      if (moveAxis === 'none' || disabled) {\n        return;\n      }\n\n      event.preventDefault();\n      event.stopPropagation();\n\n      const newRect = {\n        ...rect,\n      };\n\n      if (moveAxis === 'both' || moveAxis === 'y') {\n        const startOrEnd1 = y;\n        const startOrEnd2 = startOrEnd1 + rect.height;\n        const newTop = Math.min(startOrEnd1, startOrEnd2);\n        const newBottom = newTop + rect.height;\n        newRect.bottom = newBottom;\n        newRect.top = newTop;\n      }\n\n      if (moveAxis === 'both' || moveAxis === 'x') {\n        const startOrEnd1 = x;\n        const startOrEnd2 = startOrEnd1 + rect.width;\n        const newLeft = Math.min(startOrEnd1, startOrEnd2);\n        const newRight = newLeft + rect.width;\n        newRect.right = newRight;\n        newRect.left = newLeft;\n      }\n\n      const { startY, startX } = grid.getCellFromRect(newRect);\n\n      const newCell = {\n        ...cell,\n        startX: moveAxis === 'y' ? cell.startX : startX,\n        endX: moveAxis === 'x' ? startX + cell.spanX - 1 : cell.endX,\n        startY: moveAxis === 'x' ? cell.startY : startY,\n        endY: moveAxis === 'y' ? startY + cell.spanY - 1 : cell.endY,\n      };\n\n      invariant(\n        newCell.spanY === cell.spanY && newCell.spanX === cell.spanX,\n        `Expected the dragged time cell to have the same dimensions`,\n      );\n\n      setModifiedCell(newCell);\n    },\n    [grid, rect, moveAxis, disabled, cell, setModifiedCell],\n  );\n\n  const handleResize: ResizeCallback = useCallback(\n    (event, direction, _ref, delta) => {\n      if (!isResizable || disabled) {\n        return;\n      }\n\n      event.preventDefault();\n      event.stopPropagation();\n\n      if (delta.height === 0) {\n        return;\n      }\n\n      const newSize = {\n        height: delta.height + rect.height,\n        width: delta.width + rect.width + 20,\n      };\n\n      const newRect = {\n        ...originalRect,\n        ...newSize,\n      };\n\n      if (direction.includes('top')) {\n        newRect.top -= delta.height;\n      } else if (direction.includes('bottom')) {\n        newRect.bottom += delta.height;\n      }\n\n      const { spanY, startY, endY } = grid.getCellFromRect(newRect);\n      const newCell = {\n        ...cell,\n        spanY,\n        startY,\n        endY,\n      };\n\n      setModifiedCell(newCell);\n    },\n    [grid, rect, disabled, isResizable, setModifiedCell, cell, originalRect],\n  );\n\n  const handleDelete = useCallback(() => {\n    if (!onChange || disabled) {\n      return;\n    }\n\n    onChange(undefined, rangeIndex);\n  }, [onChange, disabled, rangeIndex]);\n\n  const handleOnFocus = useCallback(() => {\n    if (!onActiveChange || disabled) {\n      return;\n    }\n\n    onActiveChange([rangeIndex, cellIndex]);\n  }, [onActiveChange, disabled, rangeIndex, cellIndex]);\n\n  const handleOnClick = useCallback(() => {\n    if (!onClick || disabled || !isActive) {\n      return;\n    }\n\n    onClick([rangeIndex, cellIndex]);\n  }, [onClick, rangeIndex, disabled, isActive, cellIndex]);\n\n  useMousetrap('enter', handleOnClick, ref);\n\n  const cancelClasses = useMemo(\n    () =>\n      classes.handle\n        ? classes.handle\n            .split(' ')\n            .map(className => `.${className}`)\n            .join(', ')\n        : undefined,\n    [classes.handle],\n  );\n\n  return (\n    <Draggable\n      axis={moveAxis}\n      bounds={{\n        top: 0,\n        bottom: grid.totalHeight - height,\n        left: 0,\n        right: grid.totalWidth,\n      }}\n      position={{ x: left, y: top }}\n      onDrag={handleDrag}\n      onStop={handleStop}\n      cancel={cancelClasses}\n      disabled={disabled}\n    >\n      <EventRootComponent\n        role=\"button\"\n        disabled={disabled}\n        onFocus={handleOnFocus}\n        onClick={handleOnClick}\n        handleDelete={handleDelete}\n        cellIndex={cellIndex}\n        rangeIndex={rangeIndex}\n        isActive={isActive}\n        classes={classes}\n        className={classcat([\n          classes.event,\n          classes['range-boxes'],\n          className,\n          {\n            [classes['is-draggable']]: !disabled && moveAxis !== 'none',\n            [classes['is-disabled']]: disabled,\n          },\n        ])}\n        ref={ref}\n        style={{\n          width: width - 4,\n          height: height - 4,\n          marginLeft: '2px',\n          marginTop: '2px',\n        }}\n      >\n        <Resizable\n          size={{ ...originalRect, width: originalRect.width - 4 }}\n          key={`${rangeIndex}.${cellIndex}.${cellArray.length}.${originalRect.top}.${originalRect.left}`}\n          onResize={handleResize}\n          onResizeStop={handleStop}\n          handleWrapperClass={classes['handle-wrapper']}\n          enable={\n            isResizable && !disabled\n              ? {\n                  top: true,\n                  bottom: true,\n                }\n              : {}\n          }\n          handleClasses={{\n            bottom: classcat([classes.handle, classes.bottom]),\n            bottomLeft: classes.handle,\n            bottomRight: classes.handle,\n            left: classes.handle,\n            right: classes.handle,\n            top: classcat([classes.handle, classes.top]),\n            topLeft: classes.handle,\n            topRight: classes.handle,\n          }}\n        >\n          <EventContentComponent\n            width={width}\n            height={height}\n            classes={classes}\n            dateRange={modifiedDateRange}\n            isStart={isStart}\n            isEnd={isEnd}\n          />\n        </Resizable>\n      </EventRootComponent>\n    </Draggable>\n  );\n});\n","import classcat from 'classcat';\nimport { isBefore } from 'date-fns';\nimport React from 'react';\nimport {\n  CellInfo,\n  ClassNames,\n  DateRange,\n  Grid,\n  OnChangeCallback,\n  ScheduleType,\n} from '../types';\nimport { RangeBox } from './RangeBox';\n\nexport type ScheduleProps = {\n  classes: ClassNames;\n  grid: Grid;\n  onChange?: OnChangeCallback;\n  isResizable?: boolean;\n  isDeletable?: boolean;\n  moveAxis: 'none' | 'both' | 'x' | 'y';\n  cellInfoToDateRange(cell: CellInfo): DateRange;\n  onActiveChange?(index: [number, number] | [null, null]): void;\n  onClick?(index: [number, number] | [null, null]): void;\n  getIsActive(indexes: { cellIndex: number; rangeIndex: number }): boolean;\n  eventContentComponent?: any;\n  eventRootComponent?: any;\n  disabled?: boolean;\n};\n\nexport const Schedule = React.memo(function Schedule({\n  classes,\n  ranges,\n  grid,\n  className,\n  onChange,\n  isResizable,\n  isDeletable,\n  moveAxis,\n  cellInfoToDateRange,\n  dateRangeToCells,\n  onActiveChange,\n  eventContentComponent,\n  eventRootComponent,\n  onClick,\n  getIsActive,\n  disabled,\n}: {\n  dateRangeToCells(range: DateRange): CellInfo[];\n  ranges: ScheduleType;\n  className?: string;\n  classes: ClassNames;\n} & ScheduleProps) {\n  return (\n    <div className={classes['range-boxes']}>\n      {ranges.map((dateRange, rangeIndex) => {\n        const isPast = isBefore(dateRange[1], new Date());\n        return (\n          <span key={rangeIndex}>\n            {dateRangeToCells(dateRange).map((cell, cellIndex, cellArray) => {\n              const isGoogleEvent = cell.source === 'google';\n              if (isGoogleEvent) {\n                (isDeletable = false), (isResizable = false);\n              }\n              return (\n                <RangeBox\n                  classes={classes}\n                  onActiveChange={onActiveChange}\n                  key={`${rangeIndex}.${ranges.length}.${cellIndex}.${cellArray.length}`}\n                  isResizable={isResizable}\n                  moveAxis={moveAxis}\n                  isDeletable={isDeletable}\n                  cellInfoToDateRange={cellInfoToDateRange}\n                  cellArray={cellArray}\n                  cellIndex={cellIndex}\n                  rangeIndex={rangeIndex}\n                  className={classcat([\n                    className,\n                    {\n                      [classes['is-past']]: isPast,\n                      [classes['is-google']]: isGoogleEvent,\n                    },\n                  ])}\n                  onChange={onChange}\n                  onClick={onClick}\n                  grid={grid}\n                  cell={cell}\n                  getIsActive={getIsActive}\n                  eventContentComponent={eventContentComponent}\n                  eventRootComponent={eventRootComponent}\n                  disabled={isGoogleEvent}\n                />\n              );\n            })}\n          </span>\n        );\n      })}\n    </div>\n  );\n});\n","import useComponentSize from '@rehooks/component-size';\nimport classcat from 'classcat';\nimport { isPast, isToday } from 'date-fns';\nimport addDays from 'date-fns/add_days';\nimport addHours from 'date-fns/add_hours';\nimport format from 'date-fns/format';\nimport isDateEqual from 'date-fns/is_equal';\nimport startOfDay from 'date-fns/start_of_day';\nimport invariant from 'invariant';\nimport isEqual from 'lodash/isEqual';\nimport times from 'lodash/times';\nimport React, {\n  useCallback,\n  useContext,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport scrollIntoView from 'scroll-into-view-if-needed';\nimport { SchedulerContext } from '../context';\nimport { useClickAndDrag } from '../hooks/useClickAndDrag';\nimport { useMousetrap } from '../hooks/useMousetrap';\nimport {\n  CellInfo,\n  ClassNames,\n  DateRange,\n  Grid,\n  OnChangeCallback,\n  ScheduleType,\n} from '../types';\nimport { createGrid } from '../utils/createGrid';\nimport {\n  createMapCellInfoToRecurringTimeRange,\n  RecurringTimeRange,\n} from '../utils/createMapCellInfoToRecurringTimeRange';\nimport { createMapDateRangeToCells } from '../utils/createMapDateRangeToCells';\nimport { getEarliestTimeRange } from '../utils/getEarliestTimeRange';\nimport { getSpan } from '../utils/getSpan';\nimport { mergeEvents, mergeRanges } from '../utils/mergeEvents';\nimport { Cell } from './Cell';\nimport { Schedule, ScheduleProps } from './Schedule';\n\nconst MINS_IN_DAY = 24 * 60;\nconst horizontalPrecision = 1;\nconst toDay = (x: number): number => x * horizontalPrecision;\nconst toX = (days: number): number => days / horizontalPrecision;\nconst DELETE_KEYS = ['del', 'backspace'];\n\nexport const TimeGridScheduler = React.memo(function TimeGridScheduler({\n  verticalPrecision = 15,\n  visualGridVerticalPrecision = 30,\n  cellClickPrecision = visualGridVerticalPrecision,\n  style,\n  schedule,\n  originDate: _originDate = new Date(),\n  defaultHours = [9, 18],\n  classes,\n  className,\n  onChange,\n  onEventClick,\n  eventContentComponent,\n  eventRootComponent,\n  disabled,\n}: {\n  originDate?: Date;\n\n  /**\n   * The minimum number of minutes a created range can span\n   * @default 15\n   */\n  verticalPrecision?: number;\n\n  /**\n   * The visual grid increments in minutes.\n   * @default 30\n   */\n  visualGridVerticalPrecision?: number;\n\n  /**\n   * The minimum number of minutes for an time block\n   * created with a single click.\n   * @default visualGridVerticalPrecision\n   */\n  cellClickPrecision?: number;\n\n  /** Custom styles applied to the root of the view */\n  style?: React.CSSProperties;\n  schedule: ScheduleType;\n\n  /**\n   * A map of class names to the scoped class names\n   * The keys are class names like `'root'` and the values\n   * are the corresponding class names which can be scoped\n   * with CSS Modules, e.g. `'_root_7f2c6'`.\n   */\n  classes: ClassNames;\n  className?: string;\n\n  /**\n   * The view will initially be scrolled to these hours.\n   * Defaults to work hours (9-17).\n   * @default [9, 17]\n   */\n  defaultHours?: [number, number];\n\n  onChange(newSchedule: ScheduleType): void;\n  onEventClick?: ScheduleProps['onClick'];\n  eventContentComponent?: ScheduleProps['eventContentComponent'];\n  eventRootComponent?: ScheduleProps['eventRootComponent'];\n  disabled?: boolean;\n}) {\n  const { locale } = useContext(SchedulerContext);\n  const originDate = useMemo(() => startOfDay(_originDate), [_originDate]);\n  const numVerticalCells = MINS_IN_DAY / verticalPrecision;\n  const numHorizontalCells = 7 / horizontalPrecision;\n  const toMin = useCallback((y: number) => y * verticalPrecision, [\n    verticalPrecision,\n  ]);\n  const toY = useCallback((mins: number): number => mins / verticalPrecision, [\n    verticalPrecision,\n  ]);\n\n  const cellInfoToDateRanges = useMemo(() => {\n    return createMapCellInfoToRecurringTimeRange({\n      originDate,\n      fromY: toMin,\n      fromX: toDay,\n    });\n  }, [toMin, originDate]);\n\n  const cellInfoToSingleDateRange = useCallback(\n    (cell: CellInfo): DateRange => {\n      const [first, ...rest] = cellInfoToDateRanges(cell);\n      invariant(\n        rest.length === 0,\n        `Expected \"cellInfoToSingleDateRange\" to return a single date range, found ${rest.length} additional ranges instead. This is a bug in @remotelock/react-week-scheduler`,\n      );\n\n      return first;\n    },\n    [cellInfoToDateRanges],\n  );\n\n  const dateRangeToCells = useMemo(() => {\n    return createMapDateRangeToCells({\n      originDate,\n      numVerticalCells,\n      numHorizontalCells,\n      toX,\n      toY,\n    });\n  }, [toY, numVerticalCells, numHorizontalCells, originDate]);\n\n  const root = useRef<HTMLDivElement | null>(null);\n  const parent = useRef<HTMLDivElement | null>(null);\n\n  const size = useComponentSize(parent);\n  const {\n    style: dragBoxStyle,\n    box,\n    isDragging,\n    hasFinishedDragging,\n    cancel,\n  } = useClickAndDrag(parent, disabled);\n  const [\n    pendingCreation,\n    setPendingCreation,\n  ] = useState<RecurringTimeRange | null>(null);\n\n  const [[totalHeight, totalWidth], setDimensions] = useState([0, 0]);\n\n  const numVisualVerticalCells = (24 * 60) / visualGridVerticalPrecision;\n\n  useEffect(\n    function updateGridDimensionsOnSizeOrCellCountChange() {\n      if (!parent.current) {\n        setDimensions([0, 0]);\n        return;\n      }\n\n      setDimensions([parent.current.scrollHeight, parent.current.scrollWidth]);\n    },\n    [size, numVisualVerticalCells],\n  );\n\n  const grid = useMemo<Grid | null>(() => {\n    if (totalHeight === null || totalWidth === null) {\n      return null;\n    }\n\n    return createGrid({\n      totalHeight,\n      totalWidth,\n      numHorizontalCells,\n      numVerticalCells,\n    });\n  }, [totalHeight, totalWidth, numHorizontalCells, numVerticalCells]);\n\n  useEffect(\n    function updatePendingCreationOnDragBoxUpdate() {\n      if (grid === null || box === null) {\n        setPendingCreation(null);\n        return;\n      }\n\n      const cell = grid.getCellFromRect(box);\n      const dateRanges = cellInfoToDateRanges(cell);\n      const event = dateRanges;\n      setPendingCreation(event);\n    },\n    [box, grid, cellInfoToDateRanges, toY],\n  );\n\n  const [[activeRangeIndex, activeCellIndex], setActive] = useState<\n    [number, number] | [null, null]\n  >([null, null]);\n\n  useEffect(\n    function updateScheduleAfterDraggingFinished() {\n      if (disabled) {\n        return;\n      }\n\n      if (hasFinishedDragging) {\n        onChange(mergeEvents(schedule, pendingCreation));\n        setPendingCreation(null);\n      }\n    },\n    [\n      hasFinishedDragging,\n      disabled,\n      onChange,\n      setPendingCreation,\n      pendingCreation,\n      schedule,\n    ],\n  );\n\n  useEffect(\n    function clearActiveBlockAfterCreation() {\n      if (pendingCreation === null) {\n        setActive([null, null]);\n      }\n    },\n    [pendingCreation],\n  );\n\n  const handleEventChange = useCallback<OnChangeCallback>(\n    (newDateRange, rangeIndex) => {\n      if (disabled) {\n        return;\n      }\n\n      if (!schedule && newDateRange) {\n        onChange([newDateRange]);\n\n        return;\n      }\n\n      let newSchedule = [...schedule];\n\n      if (!newDateRange) {\n        newSchedule.splice(rangeIndex, 1);\n      } else {\n        if (\n          isDateEqual(newDateRange[0], newSchedule[rangeIndex][0]) &&\n          isDateEqual(newDateRange[1], newSchedule[rangeIndex][1])\n        ) {\n          return;\n        }\n        newSchedule[rangeIndex] = newDateRange;\n      }\n\n      newSchedule = mergeRanges(newSchedule);\n\n      onChange(newSchedule);\n    },\n    [schedule, onChange, disabled],\n  );\n\n  useMousetrap(\n    'esc',\n    function cancelOnEsc() {\n      if (pendingCreation) {\n        cancel();\n      }\n    },\n    document,\n  );\n\n  const getIsActive = useCallback(\n    ({ rangeIndex, cellIndex }) => {\n      return rangeIndex === activeRangeIndex && cellIndex === activeCellIndex;\n    },\n    [activeCellIndex, activeRangeIndex],\n  );\n\n  const handleDelete = useCallback(\n    (e: ExtendedKeyboardEvent) => {\n      if (activeRangeIndex === null || disabled) {\n        return;\n      }\n\n      e.preventDefault();\n      e.stopPropagation();\n      handleEventChange(undefined, activeRangeIndex);\n    },\n    [activeRangeIndex, disabled, handleEventChange],\n  );\n\n  useMousetrap(DELETE_KEYS, handleDelete, root);\n\n  useEffect(\n    function cancelPendingCreationOnSizeChange() {\n      cancel();\n    },\n    [size, cancel],\n  );\n\n  const getDateRangeForVisualGrid = useMemo(() => {\n    return createMapCellInfoToRecurringTimeRange({\n      originDate,\n      fromX: toDay,\n      fromY: y => y * visualGridVerticalPrecision,\n    });\n  }, [visualGridVerticalPrecision, originDate]);\n\n  useEffect(\n    function scrollToActiveTimeBlock() {\n      if (!document.activeElement) {\n        return;\n      }\n\n      if (!root.current || !root.current.contains(document.activeElement)) {\n        return;\n      }\n\n      scrollIntoView(document.activeElement, {\n        scrollMode: 'if-needed',\n        block: 'nearest',\n        inline: 'nearest',\n      });\n    },\n    [schedule],\n  );\n\n  const [wasInitialScrollPerformed, setWasInitialScrollPerformed] = useState(\n    false,\n  );\n\n  useEffect(\n    function performInitialScroll() {\n      if (wasInitialScrollPerformed || !root.current || !grid) {\n        return;\n      }\n\n      const range = dateRangeToCells(\n        getEarliestTimeRange(schedule) || [\n          addHours(originDate, defaultHours[0]),\n          addHours(originDate, defaultHours[1]),\n          '',\n        ],\n      );\n      const rect = grid.getRectFromCell(range[0]);\n      const { top, bottom } = rect;\n\n      if (top === 0 && bottom === 0) {\n        return;\n      }\n\n      // IE, Edge do not support it\n      if (!('scrollBy' in root.current)) {\n        return;\n      }\n\n      root.current.scrollBy(0, top);\n\n      setWasInitialScrollPerformed(true);\n    },\n    [\n      wasInitialScrollPerformed,\n      grid,\n      schedule,\n      defaultHours,\n      originDate,\n      dateRangeToCells,\n    ],\n  );\n\n  const handleBlur: React.FocusEventHandler = useCallback(\n    event => {\n      if (!event.target.contains(document.activeElement)) {\n        setActive([null, null]);\n      }\n    },\n    [setActive],\n  );\n\n  const handleCellClick = useCallback(\n    (dayIndex: number, timeIndex: number) => (event: React.MouseEvent) => {\n      if (!grid || disabled) {\n        return;\n      }\n\n      const spanY = toY(cellClickPrecision);\n      const cell = {\n        startX: dayIndex,\n        startY: timeIndex,\n        endX: dayIndex,\n        endY: spanY + timeIndex,\n        spanY,\n        spanX: getSpan(dayIndex, dayIndex),\n      };\n\n      const dateRanges = cellInfoToDateRanges(cell);\n\n      setPendingCreation(dateRanges);\n\n      event.stopPropagation();\n      event.preventDefault();\n    },\n    [grid, disabled, toY, cellClickPrecision, cellInfoToDateRanges],\n  );\n\n  return (\n    <div\n      ref={root}\n      style={style}\n      onBlur={handleBlur}\n      touch-action={isDragging ? 'none' : undefined}\n      className={classcat([\n        classes.root,\n        classes.theme,\n        className,\n        { [classes['no-scroll']]: isDragging },\n      ])}\n    >\n      <div className={classes['grid-root']}>\n        <div\n          aria-hidden\n          className={classcat([classes.timeline, classes['sticky-left']])}\n        >\n          <div className={classes.header}>\n            <div className={classes['day-column']}>\n              <div className={classcat([classes.cell, classes.title])}>T</div>\n            </div>\n          </div>\n          <div className={classes.calendar}>\n            <div className={classes['day-column']}>\n              <div className={classes['day-hours']}>\n                {times(numVisualVerticalCells).map(timeIndex => {\n                  return (\n                    <Cell\n                      classes={classes}\n                      getDateRangeForVisualGrid={getDateRangeForVisualGrid}\n                      key={timeIndex}\n                      timeIndex={timeIndex}\n                    >\n                      {({ start, isHourStart }) => {\n                        if (isHourStart) {\n                          return (\n                            <div className={classes.time}>\n                              {format(start, 'hh:mm', { locale })}\n                            </div>\n                          );\n                        }\n\n                        return null;\n                      }}\n                    </Cell>\n                  );\n                })}\n              </div>\n            </div>\n          </div>\n        </div>\n        <div\n          className={classcat([\n            classes['sticky-top'],\n            classes['day-header-row'],\n          ])}\n        >\n          <div\n            role=\"presentation\"\n            className={classcat([classes.calendar, classes.header])}\n          >\n            {times(7).map(i => (\n              <div\n                key={i}\n                role=\"presentation\"\n                className={classes['day-column']}\n              >\n                <div\n                  className={classcat([\n                    classes.cell,\n                    classes.title,\n                    { [classes['is-past']]: isPast(addDays(originDate, i)) },\n                    {\n                      [classes['is-current']]: isToday(addDays(originDate, i)),\n                    },\n                  ])}\n                >\n                  <span>\n                    {format(addDays(originDate, i), 'ddd ', { locale })}\n                  </span>\n                  <span>\n                    {format(addDays(originDate, i), 'MMM ', { locale })}\n                  </span>\n                  <span className={classes.date}>\n                    {format(addDays(originDate, i), 'D', { locale })}\n                  </span>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n        <div className={classes['layer-container']}>\n          {isDragging && (\n            <div className={classes['drag-box']} style={dragBoxStyle}>\n              {hasFinishedDragging && <div className={classes.popup} />}\n            </div>\n          )}\n          {grid && pendingCreation && isDragging && (\n            <Schedule\n              classes={classes}\n              dateRangeToCells={dateRangeToCells}\n              cellInfoToDateRange={cellInfoToSingleDateRange}\n              className={classes['is-pending-creation']}\n              ranges={mergeEvents(schedule, pendingCreation)}\n              grid={grid}\n              moveAxis=\"none\"\n              eventContentComponent={eventContentComponent}\n              getIsActive={getIsActive}\n            />\n          )}\n          {grid && !pendingCreation && (\n            <Schedule\n              classes={classes}\n              onActiveChange={setActive}\n              dateRangeToCells={dateRangeToCells}\n              cellInfoToDateRange={cellInfoToSingleDateRange}\n              isResizable\n              moveAxis=\"y\"\n              isDeletable\n              onChange={handleEventChange}\n              onClick={onEventClick}\n              ranges={schedule}\n              grid={grid}\n              eventContentComponent={eventContentComponent}\n              eventRootComponent={eventRootComponent}\n              getIsActive={getIsActive}\n              disabled={disabled}\n            />\n          )}\n\n          <div ref={parent} role=\"grid\" className={classes.calendar}>\n            {times(7).map(dayIndex => {\n              const isPassed = isPast(addDays(originDate, dayIndex + 1));\n              return (\n                <div\n                  role=\"gridcell\"\n                  key={dayIndex}\n                  className={classes['day-column']}\n                >\n                  <div\n                    className={classcat([\n                      classes['day-hours'],\n                      {\n                        [classes['is-past']]: isPassed,\n                      },\n                    ])}\n                  >\n                    {times(numVisualVerticalCells).map(timeIndex => {\n                      return (\n                        <Cell\n                          classes={classes}\n                          onClick={\n                            !isPassed\n                              ? handleCellClick(\n                                  dayIndex,\n                                  timeIndex *\n                                    (numVerticalCells / numVisualVerticalCells),\n                                )\n                              : undefined\n                          }\n                          getDateRangeForVisualGrid={getDateRangeForVisualGrid}\n                          key={timeIndex}\n                          timeIndex={timeIndex}\n                        />\n                      );\n                    })}\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}, isEqual);\n"],"names":["DefaultEventRootComponent","React","memo","forwardRef","ref","isActive","handleDelete","cellIndex","rangeIndex","classes","disabled","props","SchedulerContext","createContext","locale","en","createPageMapCoordsToContainer","container","event","clientX","clientY","pageX","pageY","changedTouches","getBoundingClientRect","top","left","x","y","prevent","tap","e","preventDefault","stopPropagation","useClickAndDrag","isDisabled","useState","transform","width","height","style","setStyle","box","setBox","isDragging","setIsDragging","hasFinishedDragging","setHasFinishedDragging","current","useEffect","mapCoordsToContainer","touchMove$","fromEvent","window","passive","pipe","touchEnd$","touchStart$","touchStartWithDelay$","mergeMap","start","of","delay","takeUntil","mouseDown$","filter","which","mouseMove$","mouseUp$","dragStart$","merge","map","dragEnd$","move$","box$","down","startWith","move","startX","Math","max","startY","endX","min","scrollWidth","endY","scrollHeight","bottom","right","rect","style$","display","boxSubscriber","subscribe","styleSubscriber","unsubscribe","cancel","useCallback","useMousetrap","handlerKey","handlerCallback","elementOrElementRef","actionRef","useRef","element","document","instance","Mousetrap","bind","combo","unbind","getSpan","x1","x2","abs","createGrid","totalHeight","totalWidth","numVerticalCells","numHorizontalCells","cellHeight","cellWidth","getRectFromCell","data","spanX","spanY","source","getCellFromRect","clamp","floor","round","cellToDate","toMin","originDate","addMinutes","addDays","createMapCellInfoToRecurringTimeRange","fromY","toDay","fromX","result","range","i","startDate","endDate","endOfDay","isBefore","sort","range1","range2","compareAsc","createMapDateRangeToCells","toX","toY","end","originOfThisDay","startOfDay","_startX","differenceInDays","_startY","differenceInMinutes","_endX","_endY","cells","atStart","atEnd","isEqual","pop","getEarliestTimeRange","ranges","startA","startB","setDay","mergeRanges","_mergeRanges","d","Date","mergeEvents","event1","event2","Cell","timeIndex","children","getDateRangeForVisualGrid","onClick","isHourStart","getMinutes","classcat","cell","formatTemplate","dropSame","dates","template","takeSecond","date","format","first","second","formatHour","getFormattedComponentsForDateRange","dateRange","template2","includeDayIfSame","length","isSameDay","firstM","secondM","day","startDateStr","endDateStr","getTextForDateRange","options","join","EventContent","isStart","isEnd","useContext","isFifteenMinuteMeeting","padding","RangeBox","grid","cellArray","className","onChange","cellInfoToDateRange","isResizable","moveAxis","onActiveChange","getIsActive","eventContentComponent","EventContentComponent","eventRootComponent","EventRootComponent","modifiedCell","setModifiedCell","originalRect","useMemo","modifiedDateRange","handleStop","newCell","handleDrag","newRect","startOrEnd1","startOrEnd2","newTop","newBottom","newLeft","newRight","invariant","handleResize","direction","_ref","delta","newSize","includes","undefined","handleOnFocus","handleOnClick","cancelClasses","handle","split","marginLeft","marginTop","bottomLeft","bottomRight","topLeft","topRight","Schedule","isDeletable","dateRangeToCells","isPast","isGoogleEvent","MINS_IN_DAY","horizontalPrecision","days","DELETE_KEYS","TimeGridScheduler","verticalPrecision","visualGridVerticalPrecision","cellClickPrecision","schedule","_originDate","defaultHours","onEventClick","mins","cellInfoToDateRanges","cellInfoToSingleDateRange","rest","root","parent","size","useComponentSize","dragBoxStyle","pendingCreation","setPendingCreation","setDimensions","numVisualVerticalCells","updateGridDimensionsOnSizeOrCellCountChange","updatePendingCreationOnDragBoxUpdate","dateRanges","activeRangeIndex","activeCellIndex","setActive","updateScheduleAfterDraggingFinished","clearActiveBlockAfterCreation","handleEventChange","newDateRange","newSchedule","splice","isDateEqual","cancelOnEsc","cancelPendingCreationOnSizeChange","scrollToActiveTimeBlock","activeElement","contains","scrollIntoView","scrollMode","block","inline","wasInitialScrollPerformed","setWasInitialScrollPerformed","performInitialScroll","addHours","scrollBy","handleBlur","target","handleCellClick","dayIndex","theme","timeline","header","title","calendar","times","time","isToday","popup","isPassed"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAGaA,yBAAyB,gBAAGC,cAAK,CAACC,IAAN;AACvCD,cAAK,CAACE,UAAN,CAAsC,SAASH,yBAAT;;;;;;;;;;AAUpCI,GAVoC;AAWpC,KATEC,QASF,QATEA,QASF,CAREC,YAQF,QAREA,YAQF,CAPEC,SAOF,QAPEA,SAOF,CANEC,UAMF,QANEA,UAMF,CALEC,OAKF,QALEA,OAKF,CAJEC,QAIF,QAJEA,QAIF,CAHKC,KAGL;AACA,sBAAOV,+CAAK,GAAG,EAAEG,GAAV,EAAe,iBAAeM,QAA9B,IAA4CC,KAA5C,EAAP;AACD,CAbD,CADuC;;ICA5BC,gBAAgB,gBAAGC,mBAAa,CAAC,EAAEC,MAAM,EAAEC,EAAV,EAAD,CAAtC;;ACHA,IAAMC,8BAA8B,GAAG,SAAjCA,8BAAiC,CAACC,SAAD,EAA4B;AACxE,SAAO,UAACC,KAAD,EAAuD;AAC5D,QAAIC,OAAJ;AACA,QAAIC,OAAJ;AACA,QAAIC,KAAJ;AACA,QAAIC,KAAJ;;AAEA,QAAI,oBAAoBJ,KAAxB,EAA+B;AACSA,MAAAA,KAAK,CAACK,cAAN,CAAqB,CAArB,CADT,CAC1BJ,OAD0B,yBAC1BA,OAD0B,CACjBC,OADiB,yBACjBA,OADiB,CACRC,KADQ,yBACRA,KADQ,CACDC,KADC,yBACDA,KADC;AAE9B,KAFD,MAEO;AACFH,MAAAA,OADE,GACiCD,KADjC,CACFC,OADE,CACOC,OADP,GACiCF,KADjC,CACOE,OADP,CACgBC,KADhB,GACiCH,KADjC,CACgBG,KADhB,CACuBC,KADvB,GACiCJ,KADjC,CACuBI,KADvB;AAEN,KAV2D;AAWtCL,IAAAA,SAAS,CAACO,qBAAV,EAXsC,CAWpDC,GAXoD,yBAWpDA,GAXoD,CAW/CC,IAX+C,yBAW/CA,IAX+C;;AAa5D,WAAO;AACLP,MAAAA,OAAO,EAAPA,OADK;AAELC,MAAAA,OAAO,EAAPA,OAFK;AAGLC,MAAAA,KAAK,EAALA,KAHK;AAILC,MAAAA,KAAK,EAALA,KAJK;AAKLG,MAAAA,GAAG,EAAHA,GALK;AAMLC,MAAAA,IAAI,EAAJA,IANK;AAOLC,MAAAA,CAAC,EAAER,OAAO,GAAGO,IAPR;AAQLE,MAAAA,CAAC,EAAER,OAAO,GAAGK,GARR,EAAP;;AAUD,GAvBD;AAwBD,CAzBM;;ACcP,IAAMI,OAAO,gBAAGC,aAAG,CAAC,UAACC,CAAD,EAAmB;AACrCA,EAAAA,CAAC,CAACC,cAAF;AACAD,EAAAA,CAAC,CAACE,eAAF;AACD,CAHkB,CAAnB;;AAKA,AAAO,SAASC,eAAT;AACL9B,GADK;AAEL+B,UAFK;AAGL;AAC0BC,EAAAA,cAAQ,CAAsB;AACtDC,IAAAA,SAAS,EAAE,iBAD2C;AAEtDC,IAAAA,KAAK,EAAE,CAF+C;AAGtDC,IAAAA,MAAM,EAAE,CAH8C,EAAtB,CADlC,2CACOC,KADP,iBACcC,QADd;;AAMsBL,EAAAA,cAAQ,CAAc,IAAd,CAN9B,4CAMOM,GANP,iBAMYC,MANZ;AAOoCP,EAAAA,cAAQ,CAAC,KAAD,CAP5C,4CAOOQ,UAPP,iBAOmBC,aAPnB;AAQsDT,EAAAA,cAAQ,CAAC,KAAD,CAR9D,4CAQOU,mBARP,iBAQ4BC,sBAR5B;AASA,MAAM9B,SAAS,GAAGb,GAAG,CAAC4C,OAAtB;;AAEAC,EAAAA,eAAS,CAAC,YAAM;AACd,QAAI,CAAChC,SAAD,IAAckB,UAAlB,EAA8B;AAC5B;AACD;;AAED,QAAMe,oBAAoB,GAAGlC,8BAA8B,CAACC,SAAD,CAA3D;;AAEA,QAAMkC,UAAU,GAAGC,cAAS,CAAaC,MAAb,EAAqB,WAArB,EAAkC;AAC5DC,MAAAA,OAAO,EAAE,KADmD,EAAlC,CAAT;AAEhBC,IAAAA,IAFgB,CAEX1B,OAFW,CAAnB;;AAIA,QAAM2B,SAAS,GAAGJ,cAAS,CAAaC,MAAb,EAAqB,UAArB,EAAiC;AAC1DC,MAAAA,OAAO,EAAE,IADiD,EAAjC,CAA3B;;;AAIA,QAAMG,WAAW,GAAGL,cAAS,CAAanC,SAAb,EAAwB,YAAxB,EAAsC;AACjEqC,MAAAA,OAAO,EAAE,KADwD,EAAtC,CAA7B;;;AAIA,QAAMI,oBAAoB,GAAGD,WAAW,CAACF,IAAZ;AAC3BI,IAAAA,kBAAQ,CAAC,UAAAC,KAAK;AACZC,QAAAA,OAAE,CAACD,KAAD,CAAF,CAAUL,IAAV;AACEO,QAAAA,eAAK,CAAC,GAAD,CADP;AAEEC,QAAAA,mBAAS,CAACZ,UAAD,CAFX;AAGEtB,QAAAA,OAHF,CADY,GAAN,CADmB,CAA7B;;;;;AAUA,QAAMmC,UAAU,GAAGZ,cAAS,CAAanC,SAAb,EAAwB,WAAxB,EAAqC;AAC/DqC,MAAAA,OAAO,EAAE,IADsD,EAArC,CAAT;AAEhBC,IAAAA,IAFgB,CAEXU,gBAAM,CAAC,UAAA/C,KAAK,UAAIA,KAAK,CAACgD,KAAN,KAAgB,CAApB,EAAN,CAFK,CAAnB;;AAIA,QAAMC,UAAU,GAAGf,cAAS,CAAaC,MAAb,EAAqB,WAArB,EAAkC;AAC5DC,MAAAA,OAAO,EAAE,IADmD,EAAlC,CAA5B;;;AAIA,QAAMc,QAAQ,GAAGhB,cAAS,CAAaC,MAAb,EAAqB,SAArB,EAAgC;AACxDC,MAAAA,OAAO,EAAE,IAD+C,EAAhC,CAA1B;;;AAIA,QAAMe,UAAU,GAAGC,UAAK,CAACN,UAAD,EAAaN,oBAAb,CAAL,CAAwCH,IAAxC;AACjBgB,IAAAA,aAAG,CAACrB,oBAAD,CADc,CAAnB;;;AAIA,QAAMsB,QAAQ,GAAGF,UAAK,CAACF,QAAD,EAAWZ,SAAX,CAAL,CAA2BD,IAA3B;AACfgB,IAAAA,aAAG,CAACrB,oBAAD,CADY;AAEfpB,IAAAA,aAAG,CAAC,YAAM;AACRe,MAAAA,aAAa,CAAC,KAAD,CAAb;AACAE,MAAAA,sBAAsB,CAAC,IAAD,CAAtB;AACD,KAHE,CAFY,CAAjB;;;AAQA,QAAM0B,KAAK,GAAGH,UAAK,CAACH,UAAD,EAAahB,UAAb,CAAL,CAA8BI,IAA9B,CAAmCgB,aAAG,CAACrB,oBAAD,CAAtC,CAAd;;AAEA,QAAMwB,IAA6B,GAAGL,UAAU,CAACd,IAAX;AACpCzB,IAAAA,aAAG,CAAC,YAAM;AACRe,MAAAA,aAAa,CAAC,IAAD,CAAb;AACAE,MAAAA,sBAAsB,CAAC,KAAD,CAAtB;AACD,KAHE,CADiC;AAKpCY,IAAAA,kBAAQ,CAAC,UAAAgB,IAAI,EAAI;AACf,aAAOF,KAAK,CAAClB,IAAN;AACLqB,MAAAA,mBAAS,CAACD,IAAD,CADJ;AAELJ,MAAAA,aAAG;AACD,gBAACM,IAAD,EAAgB;AACd,YAAMC,MAAM,GAAGC,IAAI,CAACC,GAAL,CAASL,IAAI,CAAChD,CAAd,EAAiB,CAAjB,CAAf;AACA,YAAMsD,MAAM,GAAGF,IAAI,CAACC,GAAL,CAASL,IAAI,CAAC/C,CAAd,EAAiB,CAAjB,CAAf;AACA,YAAMsD,IAAI,GAAGH,IAAI,CAACI,GAAL,CAASN,IAAI,CAAClD,CAAd,EAAiBV,SAAS,CAACmE,WAA3B,CAAb;AACA,YAAMC,IAAI,GAAGN,IAAI,CAACI,GAAL,CAASN,IAAI,CAACjD,CAAd,EAAiBX,SAAS,CAACqE,YAA3B,CAAb;AACA,YAAM7D,GAAG,GAAGsD,IAAI,CAACI,GAAL,CAASF,MAAT,EAAiBI,IAAjB,CAAZ;AACA,YAAME,MAAM,GAAGR,IAAI,CAACC,GAAL,CAASC,MAAT,EAAiBI,IAAjB,CAAf;AACA,YAAM3D,IAAI,GAAGqD,IAAI,CAACI,GAAL,CAASL,MAAT,EAAiBI,IAAjB,CAAb;AACA,YAAMM,KAAK,GAAGT,IAAI,CAACC,GAAL,CAASF,MAAT,EAAiBI,IAAjB,CAAd;;AAEA,eAAO;AACLJ,UAAAA,MAAM,EAANA,MADK;AAELG,UAAAA,MAAM,EAANA,MAFK;AAGLC,UAAAA,IAAI,EAAJA,IAHK;AAILG,UAAAA,IAAI,EAAJA,IAJK;AAKL5D,UAAAA,GAAG,EAAHA,GALK;AAML8D,UAAAA,MAAM,EAANA,MANK;AAOL7D,UAAAA,IAAI,EAAJA,IAPK;AAQL8D,UAAAA,KAAK,EAALA,KARK;AASLlD,UAAAA,KAAK,EAAEkD,KAAK,GAAG9D,IATV;AAULa,UAAAA,MAAM,EAAEgD,MAAM,GAAG9D,GAVZ,EAAP;;AAYD,OAvBA,CAFE;;AA2BLsC,MAAAA,mBAAS,CAACS,QAAD,CA3BJ,CAAP;;AA6BD,KA9BO,CAL4B;AAoCpCD,IAAAA,aAAG,CAAC,UAAAkB,IAAI,EAAI;AACV,aAAOA,IAAI,CAACnD,KAAL,KAAe,CAAf,IAAoBmD,IAAI,CAAClD,MAAL,KAAgB,CAApC,GAAwC,IAAxC,GAA+CkD,IAAtD;AACD,KAFE,CApCiC,CAAtC;;;AAyCA,QAAMC,MAAM,GAAGhB,IAAI,CAACnB,IAAL;AACbgB,IAAAA,aAAG,CAAC,UAAAkB,IAAI,EAAI;AACV,UAAIA,IAAI,KAAK,IAAb,EAAmB;AACTnD,QAAAA,KADS,GACoBmD,IADpB,CACTnD,KADS,CACFC,MADE,GACoBkD,IADpB,CACFlD,MADE,CACMb,IADN,GACoB+D,IADpB,CACM/D,IADN,CACYD,GADZ,GACoBgE,IADpB,CACYhE,GADZ;AAEjB,eAAO;AACLY,UAAAA,SAAS,sBAAeX,IAAf,iBAA0BD,GAA1B,QADJ;AAELa,UAAAA,KAAK,EAALA,KAFK;AAGLC,UAAAA,MAAM,EAANA,MAHK,EAAP;;AAKD;;AAED,aAAO,EAAEoD,OAAO,EAAE,MAAX,EAAP;AACD,KAXE,CADU,CAAf;;;AAeA,QAAMC,aAAa,GAAGlB,IAAI,CAACmB,SAAL,CAAelD,MAAf,CAAtB;AACA,QAAMmD,eAAe,GAAGJ,MAAM,CAACG,SAAP,CAAiBpD,QAAjB,CAAxB;;AAEA,WAAO,YAAM;AACXmD,MAAAA,aAAa,CAACG,WAAd;AACAD,MAAAA,eAAe,CAACC,WAAhB;AACD,KAHD;AAID,GAtHQ,EAsHN,CAAC9E,SAAD,EAAYkB,UAAZ,CAtHM,CAAT;;AAwHA,MAAM6D,MAAM,GAAGC,iBAAW,CAAC,YAAM;AAC/BpD,IAAAA,aAAa,CAAC,KAAD,CAAb;AACAE,IAAAA,sBAAsB,CAAC,KAAD,CAAtB;AACAJ,IAAAA,MAAM,CAAC,IAAD,CAAN;AACD,GAJyB,EAIvB,EAJuB,CAA1B;;AAMA,SAAO,EAAEH,KAAK,EAALA,KAAF,EAASE,GAAG,EAAHA,GAAT,EAAcE,UAAU,EAAVA,UAAd,EAA0BoD,MAAM,EAANA,MAA1B,EAAkClD,mBAAmB,EAAnBA,mBAAlC,EAAP;AACD;;AC7JD;AACA;AACA;AACA;AACA;AACA;AACA,AAAO,SAASoD,YAAT;AACLC,UADK;AAELC,eAFK;AAGLC,mBAHK;AAIL;AACA,MAAMC,SAAS,GAAGC,YAAM,CAAgC,IAAhC,CAAxB;AACAD,EAAAA,SAAS,CAACtD,OAAV,GAAoBoD,eAApB;AACA,MAAMI,OAAO;AACX,eAAaH,mBAAb,GAAmCA,mBAAmB,CAACrD,OAAvD,GAAiEyD,QADnE;;AAGAxD,EAAAA,eAAS,CAAC,YAAM;AACd,QAAMyD,QAAQ,GAAG,IAAIC,SAAJ,CAAcH,OAAd,CAAjB;;AAEAE,IAAAA,QAAQ,CAACE,IAAT,CAAcT,UAAd,EAA0B,UAACpE,CAAD,EAAI8E,KAAJ,EAAc;AACtC,aAAOP,SAAS,CAACtD,OAAjB,KAA6B,UAA7B,IAA2CsD,SAAS,CAACtD,OAAV,CAAkBjB,CAAlB,EAAqB8E,KAArB,CAA3C;AACD,KAFD;;AAIA,WAAO,YAAM;AACXH,MAAAA,QAAQ,CAACI,MAAT,CAAgBX,UAAhB;AACD,KAFD;AAGD,GAVQ,EAUN,CAACA,UAAD,EAAaK,OAAb,CAVM,CAAT;AAWD;;AC9BM,IAAMO,OAAO,GAAG,SAAVA,OAAU,CAACC,EAAD,EAAaC,EAAb,UAA4B,IAAIlC,IAAI,CAACmC,GAAL,CAASD,EAAE,GAAGD,EAAd,CAAhC,EAAhB;;ACMA,IAAMG,UAAU,GAAG,SAAbA,UAAa;;;;;;;;;;AAUd,KATVC,WASU,QATVA,WASU,CARVC,UAQU,QARVA,UAQU,CAPVC,gBAOU,QAPVA,gBAOU,CANVC,kBAMU,QANVA,kBAMU;AACV,MAAMC,UAAU,GAAGJ,WAAW,GAAGE,gBAAjC;AACA,MAAMG,SAAS,GAAGJ,UAAU,GAAGE,kBAA/B;;AAEA,SAAO;AACLH,IAAAA,WAAW,EAAXA,WADK;AAELC,IAAAA,UAAU,EAAVA,UAFK;AAGLC,IAAAA,gBAAgB,EAAhBA,gBAHK;AAILC,IAAAA,kBAAkB,EAAlBA,kBAJK;AAKLE,IAAAA,SAAS,EAATA,SALK;AAMLD,IAAAA,UAAU,EAAVA,UANK;;AAQLE,IAAAA,eARK,2BAQWC,IARX,EAQ2B;AACtBzC,MAAAA,IADsB,GAC+ByC,IAD/B,CACtBzC,IADsB,CAChBJ,MADgB,GAC+B6C,IAD/B,CAChB7C,MADgB,CACRO,IADQ,GAC+BsC,IAD/B,CACRtC,IADQ,CACFJ,MADE,GAC+B0C,IAD/B,CACF1C,MADE,CACM2C,KADN,GAC+BD,IAD/B,CACMC,KADN,CACaC,KADb,GAC+BF,IAD/B,CACaE,KADb,CACoBC,MADpB,GAC+BH,IAD/B,CACoBG,MADpB;AAE9B,UAAMvC,MAAM,GAAGF,IAAI,GAAG,KAAKmC,UAA3B;AACA,UAAM/F,GAAG,GAAGwD,MAAM,GAAG,KAAKuC,UAA1B;AACA,UAAM9F,IAAI,GAAGoD,MAAM,GAAG,KAAK2C,SAA3B;AACA,UAAMjC,KAAK,GAAGN,IAAI,GAAG,KAAKuC,SAA1B;AACA,UAAMlF,MAAM,GAAGsF,KAAK,GAAG,KAAKL,UAA5B;AACA,UAAMlF,KAAK,GAAGsF,KAAK,GAAG,KAAKH,SAA3B;;AAEA,aAAO;AACLlC,QAAAA,MAAM,EAANA,MADK;AAEL9D,QAAAA,GAAG,EAAHA,GAFK;AAGLC,QAAAA,IAAI,EAAJA,IAHK;AAIL8D,QAAAA,KAAK,EAALA,KAJK;AAKLjD,QAAAA,MAAM,EAANA,MALK;AAMLD,QAAAA,KAAK,EAALA,KANK;AAOLwF,QAAAA,MAAM,EAANA,MAPK;;AASL;AACAhD,QAAAA,MAAM,EAAEA,MAAM,GAAG,KAAK2C,SAVjB;AAWLvC,QAAAA,IAAI,EAAEA,IAAI,GAAG,KAAKuC,SAXb;AAYLxC,QAAAA,MAAM,EAAEA,MAAM,GAAG,KAAKuC,UAZjB;AAaLnC,QAAAA,IAAI,EAAEA,IAAI,GAAG,KAAKmC,UAbb,EAAP;;AAeD,KAhCI;;AAkCLO,IAAAA,eAlCK,2BAkCWJ,IAlCX,EAkCuB;AAC1B,UAAM7C,MAAM,GAAGkD,KAAK;AAClBC,MAAAA,KAAK,CAACN,IAAI,CAACjG,IAAL,GAAY,KAAK+F,SAAlB,CADa;AAElB,OAFkB;AAGlBF,MAAAA,kBAAkB,GAAG,CAHH,CAApB;;AAKA,UAAMtC,MAAM,GAAG+C,KAAK;AAClBE,MAAAA,KAAK,CAACP,IAAI,CAAClG,GAAL,GAAW,KAAK+F,UAAjB,CADa;AAElB,OAFkB;AAGlBF,MAAAA,gBAAgB,GAAG,CAHD,CAApB;;AAKA,UAAMpC,IAAI,GAAG8C,KAAK;AAChBC,MAAAA,KAAK,CAACN,IAAI,CAACnC,KAAL,GAAa,KAAKiC,SAAnB,CADW;AAEhB,OAFgB;AAGhBF,MAAAA,kBAAkB,GAAG,CAHL,CAAlB;;AAKA,UAAMlC,IAAI,GAAG2C,KAAK;AAChBE,MAAAA,KAAK,CAACP,IAAI,CAACpC,MAAL,GAAc,KAAKiC,UAApB,CADW;AAEhB,OAFgB;AAGhBF,MAAAA,gBAAgB,GAAG,CAHH,CAAlB;;AAKA,UAAMM,KAAK,GAAGI,KAAK,CAACjB,OAAO,CAACjC,MAAD,EAASI,IAAT,CAAR,EAAwB,CAAxB,EAA2BqC,kBAA3B,CAAnB;AACA,UAAMM,KAAK,GAAGG,KAAK,CAACjB,OAAO,CAAC9B,MAAD,EAASI,IAAT,CAAR,EAAwB,CAAxB,EAA2BiC,gBAA3B,CAAnB;AACA,UAAMQ,MAAM,GAAGH,IAAI,CAACG,MAApB;;AAEA,aAAO;AACLF,QAAAA,KAAK,EAALA,KADK;AAELC,QAAAA,KAAK,EAALA,KAFK;AAGL/C,QAAAA,MAAM,EAANA,MAHK;AAILG,QAAAA,MAAM,EAANA,MAJK;AAKLC,QAAAA,IAAI,EAAJA,IALK;AAMLG,QAAAA,IAAI,EAAJA,IANK;AAOLyC,QAAAA,MAAM,EAANA,MAPK,EAAP;;AASD,KApEI,EAAP;;AAsED,CApFM;;ACHA,IAAMK,UAAU,GAAG,SAAbA,UAAa;AACxBrD,EAAAA,MADwB,QACxBA,MADwB;AAExBG,EAAAA,MAFwB,QAExBA,MAFwB;AAGxBmD,EAAAA,KAHwB,QAGxBA,KAHwB;AAIxBC,EAAAA,UAJwB,QAIxBA,UAJwB;;;;;;;AAWpBC,IAAAA,UAAU,CAACC,OAAO,CAACF,UAAD,EAAavD,MAAb,CAAR,EAA8BsD,KAAK,CAACnD,MAAD,CAAnC,CAXU,GAAnB;;ACQA,IAAMuD,qCAA6D,GAAG,SAAhEA,qCAAgE;AACpEJ,EAAAA,KADoE,QAC3EK,KAD2E;AAEpEC,EAAAA,KAFoE,QAE3EC,KAF2E;AAG3EN,EAAAA,UAH2E,QAG3EA,UAH2E;AAIvE,qBAAqC,KAAlCvD,MAAkC,SAAlCA,MAAkC,CAA1BG,MAA0B,SAA1BA,MAA0B,CAAlBC,IAAkB,SAAlBA,IAAkB,CAAZ2C,KAAY,SAAZA,KAAY;AACzC,UAAMe,MAAM,GAAGC,KAAK,CAAC/D,MAAD,EAASI,IAAI,GAAG,CAAhB,CAAL;AACZX,MAAAA,GADY,CACR,UAAAuE,CAAC,EAAI;AACR,YAAMC,SAAS,GAAGZ,UAAU,CAAC;AAC3BrD,UAAAA,MAAM,EAAEgE,CADmB;AAE3B7D,UAAAA,MAAM,EAANA,MAF2B;AAG3BmD,UAAAA,KAAK,EAALA,KAH2B;AAI3BM,UAAAA,KAAK,EAALA,KAJ2B;AAK3BL,UAAAA,UAAU,EAAVA,UAL2B,EAAD,CAA5B;;AAOA,YAAIW,OAAO,GAAG7D,GAAG;AACfmD,QAAAA,UAAU,CAACS,SAAD,EAAYX,KAAK,CAACP,KAAD,CAAjB,CADK;AAEfoB,QAAAA,QAAQ,CAACF,SAAD,CAFO,CAAjB;;;AAKA,YAAMF,KAAgB,GAAGK,QAAQ,CAACH,SAAD,EAAYC,OAAZ,CAAR;AACrB,SAACD,SAAD,EAAYC,OAAZ,CADqB;AAErB,SAACA,OAAD,EAAUD,SAAV,CAFJ;;AAIA,eAAOF,KAAP;AACD,OAnBY;AAoBZM,MAAAA,IApBY,CAoBP,UAACC,MAAD,EAASC,MAAT,UAAoBC,UAAU,CAACF,MAAM,CAAC,CAAD,CAAP,EAAYC,MAAM,CAAC,CAAD,CAAlB,CAA9B,EApBO,CAAf;;AAsBA,aAAOT,MAAP;AACD,KA5B4E,GAAtE;;ACHA,IAAMW,yBAAyB,GAAG,SAA5BA,yBAA4B;AACvCC,EAAAA,GADuC,CACvCA,GADuC,yBACjC,UAAC7H,CAAD,UAAeA,CAAf,EADiC;AAEvC8H,EAAAA,GAFuC,QAEvCA,GAFuC;AAGvCnC,EAAAA,gBAHuC,QAGvCA,gBAHuC;AAIvCe,EAAAA,UAJuC,QAIvCA,UAJuC;;;;;;;AAWnC,qBAAiD,sCAA/CzE,KAA+C,YAAxC8F,GAAwC,YAAnC5B,MAAmC;AACrD,UAAM6B,eAAe,GAAGC,UAAU,CAAChG,KAAD,CAAlC;AACA,UAAMiG,OAAO,GAAGL,GAAG,CAACM,gBAAgB,CAAClG,KAAD,EAAQyE,UAAR,CAAjB,CAAnB;AACA,UAAM0B,OAAO,GAAGN,GAAG,CAACO,mBAAmB,CAACpG,KAAD,EAAQ+F,eAAR,CAApB,CAAnB;AACA,UAAMM,KAAK,GAAGT,GAAG,CAACM,gBAAgB,CAACJ,GAAD,EAAMrB,UAAN,CAAjB,CAAjB;AACA,UAAM6B,KAAK,GAAGT,GAAG,CAACO,mBAAmB,CAACN,GAAD,EAAME,UAAU,CAACF,GAAD,CAAhB,CAApB,CAAH,GAAiD,CAA/D;;AAEA,UAAMS,KAAK,GAAGtB,KAAK,CAACgB,OAAD,EAAUI,KAAK,GAAG,CAAlB,CAAL,CAA0B1F,GAA1B,CAA8B,UAAAuE,CAAC,EAAI;AAC/C,YAAMhE,MAAM,GAAGgE,CAAf;AACA,YAAM5D,IAAI,GAAG4D,CAAb;AACA,YAAMsB,OAAO,GAAGtB,CAAC,KAAKe,OAAtB;AACA,YAAMQ,KAAK,GAAGvB,CAAC,KAAKmB,KAApB;AACA,YAAMhF,MAAM,GAAG,CAACmF,OAAD,GAAW,CAAX,GAAeL,OAA9B;AACA,YAAM1E,IAAI,GAAG,CAACgF,KAAD,GAAS/C,gBAAgB,GAAG,CAA5B,GAAgC4C,KAA7C;AACA,YAAMtC,KAAK,GAAGb,OAAO,CAACjC,MAAD,EAASI,IAAT,CAArB;AACA,YAAM2C,KAAK,GAAGd,OAAO,CAAC9B,MAAD,EAASI,IAAT,CAArB;;AAEA,eAAO;AACLP,UAAAA,MAAM,EAANA,MADK;AAELG,UAAAA,MAAM,EAANA,MAFK;AAGLC,UAAAA,IAAI,EAAJA,IAHK;AAILG,UAAAA,IAAI,EAAJA,IAJK;AAKLuC,UAAAA,KAAK,EAALA,KALK;AAMLC,UAAAA,KAAK,EAALA,KANK;AAOLC,UAAAA,MAAM,EAANA,MAPK,EAAP;;AASD,OAnBa,CAAd;;AAqBA,UAAIwC,WAAO,CAACZ,GAAD,EAAME,UAAU,CAACF,GAAD,CAAhB,CAAX,EAAmC;AACjCS,QAAAA,KAAK,CAACI,GAAN;AACD;;AAED,aAAOJ,KAAP;AACD,KA5CwC,GAAlC;;ACJA,SAASK,oBAAT;AACLC,MADK;AAEkB;AACvB,SAAO,mBAAIA,MAAJ,EAAYtB,IAAZ,CAAiB,4DAAEuB,MAAF,iDAAYC,MAAZ;AACtBrB,MAAAA,UAAU,CAACsB,MAAM,CAACF,MAAD,EAAS,CAAT,CAAP,EAAoBE,MAAM,CAACD,MAAD,EAAS,CAAT,CAA1B,CADY,GAAjB;AAEL,GAFK,CAAP;AAGD;;ACNM,SAASE,WAAT,CAAqB3J,KAArB,EAAwD;AAC7D,SAAO4J,YAAY;AACjB,qBAAI5J,KAAJ,EAAWqD,GAAX;AACE,YAAAwG,CAAC,UAAI,CAAC,IAAIC,IAAJ,CAASD,CAAC,CAAC,CAAD,CAAV,CAAD,EAAiB,IAAIC,IAAJ,CAASD,CAAC,CAAC,CAAD,CAAV,CAAjB,EAAiCA,CAAC,CAAC,CAAD,CAAlC,CAAJ,EADH,CADiB,CAAnB;;;AAKD;;AAED,AAAO,SAASE,WAAT;AACLC,MADK;AAELC,MAFK;AAGS;AACd,MAAIA,MAAM,KAAK,IAAf,EAAqB;AACnB,WAAOD,MAAP;AACD;;AAED,SAAOL,WAAW,8BAAKK,MAAL,sBAAgBC,MAAhB,GAAX,CAAoChC,IAApC,CAAyC,UAACC,MAAD,EAASC,MAAT;AAC9CC,MAAAA,UAAU,CAACF,MAAM,CAAC,CAAD,CAAP,EAAYC,MAAM,CAAC,CAAD,CAAlB,CADoC,GAAzC,CAAP;;AAGD;;AClBM,IAAM+B,IAAI,gBAAGnL,cAAK,CAACC,IAAN,CAAW,SAASkL,IAAT;;;;;;;;;;;;AAY5B,KAXDC,SAWC,QAXDA,SAWC,CAVDC,QAUC,QAVDA,QAUC,CATD7K,OASC,QATDA,OASC,CARD8K,yBAQC,QARDA,yBAQC,CAPDC,OAOC,QAPDA,OAOC;AACiBD,EAAAA,yBAAyB,CAAC;AAC1CzG,IAAAA,MAAM,EAAE,CADkC;AAE1CG,IAAAA,MAAM,EAAEoG,SAFkC;AAG1CnG,IAAAA,IAAI,EAAE,CAHoC;AAI1CG,IAAAA,IAAI,EAAEgG,SAAS,GAAG,CAJwB;AAK1CzD,IAAAA,KAAK,EAAE,CALmC;AAM1CC,IAAAA,KAAK,EAAE,CANmC;AAO1CC,IAAAA,MAAM,EAAE,EAPkC,EAAD,CAD1C,yIACOlE,KADP;;;AAWD,MAAM6H,WAAW,GAAGC,UAAU,CAAC9H,KAAD,CAAV,KAAsB,CAA1C;;AAEA;AACE;AACE,MAAA,IAAI,EAAC,QADP;AAEE,MAAA,OAAO,EAAE4H,OAFX;AAGE,MAAA,SAAS,EAAEG,QAAQ,CAAC;AAClBlL,MAAAA,OAAO,CAACmL,IADU;AAEfnL,MAAAA,OAAO,CAAC,eAAD,CAFQ,EAEYgL,WAFZ,EAAD,CAHrB;;;AAQGH,IAAAA,QAAQ,IAAIA,QAAQ,CAAC,EAAE1H,KAAK,EAALA,KAAF,EAAS6H,WAAW,EAAXA,WAAT,EAAD,CARvB,CADF;;;AAYD,CArCmB,CAAb;;ACDP,IAAMI,cAAc,GAAG,WAAvB;;AAEA,IAAMC,QAAQ,GAAG,SAAXA,QAAW;AACfC,KADe;AAEfC,QAFe;;;AAKM,KAFrBC,UAEqB,uEAFC,KAED,KADrBnL,MACqB;AACGiL,EAAAA,KAAK,CAACxH,GAAN,CAAU,UAAA2H,IAAI,UAAIC,MAAM,CAACD,IAAD,EAAOF,QAAP,EAAiB,EAAElL,MAAM,EAANA,MAAF,EAAjB,CAAV,EAAd,CADH,6CACdsL,KADc,kBACPC,MADO;AAErB,MAAID,KAAK,KAAKC,MAAd,EAAsB;AACpB,WAAO,CAACD,KAAD,EAAQC,MAAR,CAAP;AACD;;AAED,MAAIJ,UAAJ,EAAgB;AACd,WAAO,CAAC,EAAD,EAAKI,MAAL,CAAP;AACD;;AAED,SAAO,CAACD,KAAD,EAAQ,EAAR,CAAP;AACD,CAhBD;;AAkBA,IAAME,UAAU,GAAG,SAAbA,UAAa;AACjBJ,IADiB;AAEjBpL,MAFiB;AAGd;AACH,MAAI4K,UAAU,CAACQ,IAAD,CAAV,KAAqB,CAAzB,EAA4B;AAC1B,WAAOC,MAAM,CAACD,IAAD,EAAO,GAAP,EAAY,EAAEpL,MAAM,EAANA,MAAF,EAAZ,CAAb;AACD;;AAED,SAAOqL,MAAM,CAACD,IAAD,EAAO,MAAP,EAAe,EAAEpL,MAAM,EAANA,MAAF,EAAf,CAAb;AACD,CATD;;;;;;;;;;AAmBA,IAAayL,kCAAkC,GAAG,SAArCA,kCAAqC;;;;;;AAMnC,KALbC,SAKa,QALbA,SAKa,CAJb1L,MAIa,QAJbA,MAIa,CAHbkL,QAGa,QAHbA,QAGa,CAFbS,SAEa,QAFbA,SAEa,8BADbC,gBACa,CADbA,gBACa,sCADM,IACN;AACb,MAAM9I,KAAK,GAAG4I,SAAS,CAAC,CAAD,CAAvB;AACA,MAAM9C,GAAG,GAAG8C,SAAS,CAACA,SAAS,CAACG,MAAV,GAAmB,CAApB,CAArB;;AAEA,MAAIC,SAAS,CAAChJ,KAAD,EAAQ8F,GAAR,CAAT,IAAyB,CAACsC,QAA9B,EAAwC;AACZF,IAAAA,QAAQ,CAACU,SAAD,EAAY,GAAZ,EAAiB,IAAjB,EAAuB1L,MAAvB,CADI,2CAC/B+L,MAD+B,iBACvBC,OADuB;AAEtC,QAAMC,GAAG,GAAGL,gBAAgB,aAAMP,MAAM,CAACvI,KAAD,EAAQ,KAAR,EAAe,EAAE9C,MAAM,EAANA,MAAF,EAAf,CAAZ,SAA4C,EAAxE;AACA,WAAO;AACFiM,IAAAA,GADE,SACIT,UAAU,CAAC1I,KAAD,EAAQ;AACzB9C,MAAAA,MAAM,EAANA,MADyB,EAAR,CADd;AAGA+L,IAAAA,MAHA;AAIFP,IAAAA,UAAU,CAAC5C,GAAD,EAAM,EAAE5I,MAAM,EAANA,MAAF,EAAN,CAJR,SAI4BgM,OAJ5B,EAAP;;AAMD;;AAED,MAAME,YAAY,GAAGb,MAAM,CAACvI,KAAD,EAAQoI,QAAQ,IAAIH,cAApB,EAAoC,EAAE/K,MAAM,EAANA,MAAF,EAApC,CAA3B;AACA,MAAMmM,UAAU,GAAGd,MAAM,CAACzC,GAAD,EAAM+C,SAAS,IAAIZ,cAAnB,EAAmC,EAAE/K,MAAM,EAANA,MAAF,EAAnC,CAAzB;;AAEA,SAAO,CAACkM,YAAD,EAAeC,UAAf,CAAP;AACD,CAzBM;;AA2BP,IAAaC,mBAAmB,GAAG,SAAtBA,mBAAsB,CAACC,OAAD,EAAsB;AACvD,SAAOZ,kCAAkC,CAACY,OAAD,CAAlC,CAA4CC,IAA5C,CAAiD,KAAjD,CAAP;AACD,CAFM;;ACnDA,IAAMC,YAAY,gBAAGpN,cAAK,CAACC,IAAN,CAAW,SAASmN,YAAT;;;;;;;AAOjB,KANpB/K,KAMoB,QANpBA,KAMoB,CALpBC,MAKoB,QALpBA,MAKoB,CAJpB9B,OAIoB,QAJpBA,OAIoB,CAHpB+L,SAGoB,QAHpBA,SAGoB,CAFpBc,OAEoB,QAFpBA,OAEoB,CADpBC,KACoB,QADpBA,KACoB;AACDC,EAAAA,gBAAU,CAAC5M,gBAAD,CADT,CACZE,MADY,eACZA,MADY;AAECyL,EAAAA,kCAAkC,CAAC;AACtDC,IAAAA,SAAS,EAATA,SADsD;AAEtD1L,IAAAA,MAAM,EAANA,MAFsD;AAGtD4L,IAAAA,gBAAgB,EAAE,KAHoC,EAAD,CAFnC,mEAEb9I,KAFa,6BAEN8F,GAFM;;AAOpB,MAAM+D,sBAAsB,GAAGlL,MAAM,GAAG,EAAT,GAAc,QAAd,GAAyB,EAAxD;;AAEA;AACE;AACE,MAAA,KAAK,EAAE;AACLD,QAAAA,KAAK,EAAEA,KAAK,GAAG,CADV;AAELC,QAAAA,MAAM,EAAEA,MAAM,GAAG,CAFZ;AAGLmL,QAAAA,OAAO,EAAED,sBAHJ,EADT;;AAME,MAAA,SAAS,EAAEhN,OAAO,CAAC,eAAD,CANpB;;AAQE,iCAAC,cAAD;AACGyM,IAAAA,mBAAmB,CAAC,EAAEV,SAAS,EAATA,SAAF,EAAa1L,MAAM,EAANA,MAAb,EAAD,CADtB,CARF;;AAWE,2CAAM,mBAAN,EAAkB,SAAS,EAAEL,OAAO,CAACmD,KAArC;AACG0J,IAAAA,OAAO,IAAI1J,KADd,CAXF;;AAcE,2CAAM,mBAAN,EAAkB,SAAS,EAAEnD,OAAO,CAACiJ,GAArC;AACG6D,IAAAA,KAAK,IAAI7D,GADZ,CAdF,CADF;;;;AAoBD,CApC2B,CAArB;;ACFA,IAAMiE,QAAQ,gBAAG1N,cAAK,CAACC,IAAN,CAAW,SAASyN,QAAT;;;;;;;;;;;;;;;;;;;;;;;;AAwBhC,eAvBDlN,OAuBC,SAvBDA,OAuBC,CAtBDmN,IAsBC,SAtBDA,IAsBC,CArBDpN,UAqBC,SArBDA,UAqBC,CApBDD,SAoBC,SApBDA,SAoBC,CAnBDsN,SAmBC,SAnBDA,SAmBC,CAlBDjC,IAkBC,SAlBDA,IAkBC,CAjBDkC,SAiBC,SAjBDA,SAiBC,CAhBDC,QAgBC,SAhBDA,QAgBC,CAfDC,mBAeC,SAfDA,mBAeC,CAdDC,WAcC,SAdDA,WAcC,CAbDC,QAaC,SAbDA,QAaC,CAZDC,cAYC,SAZDA,cAYC,CAXD3C,OAWC,SAXDA,OAWC,CAVD4C,WAUC,SAVDA,WAUC,+BATDC,qBASC,CATsBC,qBAStB,sCAT8CjB,YAS9C,uDARDkB,kBAQC,CARmBC,kBAQnB,sCARwCxO,yBAQxC,yBAPDU,QAOC,SAPDA,QAOC;AACD,MAAMN,GAAG,GAAGmG,YAAM,CAAC,IAAD,CAAlB,CADC;AAEuCnE,EAAAA,cAAQ,CAACwJ,IAAD,CAF/C,2CAEM6C,YAFN,iBAEoBC,eAFpB;AAGD,MAAMC,YAAY,GAAGC,aAAO,CAAC,oBAAMhB,IAAI,CAAClG,eAAL,CAAqBkE,IAArB,CAAN,EAAD,EAAmC,CAACA,IAAD,EAAOgC,IAAP,CAAnC,CAA5B;AACA,MAAMnI,IAAI,GAAGmJ,aAAO,CAAC,oBAAMhB,IAAI,CAAClG,eAAL,CAAqB+G,YAArB,CAAN,EAAD,EAA2C;AAC7DA,EAAAA,YAD6D;AAE7Db,EAAAA,IAF6D,CAA3C,CAApB;;;AAKA3K,EAAAA,eAAS,CAAC,YAAM;AACdyL,IAAAA,eAAe,CAAC9C,IAAD,CAAf;AACD,GAFQ,EAEN,CAACA,IAAD,CAFM,CAAT;;AAIA,MAAMiD,iBAAiB,GAAGD,aAAO,CAAC,oBAAMZ,mBAAmB,CAACS,YAAD,CAAzB,EAAD,EAA0C;AACzET,EAAAA,mBADyE;AAEzES,EAAAA,YAFyE,CAA1C,CAAjC,CAbC;;;AAkBOhN,EAAAA,GAlBP,GAkBoCgE,IAlBpC,CAkBOhE,GAlBP,CAkBYC,IAlBZ,GAkBoC+D,IAlBpC,CAkBY/D,IAlBZ,CAkBkBY,KAlBlB,GAkBoCmD,IAlBpC,CAkBkBnD,KAlBlB,CAkByBC,MAlBzB,GAkBoCkD,IAlBpC,CAkByBlD,MAlBzB;;AAoBD,MAAM+K,OAAO,GAAG/M,SAAS,KAAK,CAA9B;AACA,MAAMgN,KAAK,GAAGhN,SAAS,KAAKsN,SAAS,CAAClB,MAAV,GAAmB,CAA/C;;AAEA,MAAMmC,UAAU,GAAG7I,iBAAW,CAAC,YAAM;AACnC,QAAI,CAAC8H,QAAD,IAAarN,QAAjB,EAA2B;AACzB;AACD;;AAEDqN,IAAAA,QAAQ,CAACC,mBAAmB,CAACS,YAAD,CAApB,EAAoCjO,UAApC,CAAR;AACD,GAN6B,EAM3B,CAACiO,YAAD,EAAejO,UAAf,EAA2BE,QAA3B,EAAqCsN,mBAArC,EAA0DD,QAA1D,CAN2B,CAA9B;;AAQA,MAAM1N,QAAQ,GAAGuO,aAAO,CAAC,oBAAMR,WAAW,CAAC,EAAE7N,SAAS,EAATA,SAAF,EAAaC,UAAU,EAAVA,UAAb,EAAD,CAAjB,EAAD,EAA+C;AACrED,EAAAA,SADqE;AAErEC,EAAAA,UAFqE;AAGrE4N,EAAAA,WAHqE,CAA/C,CAAxB;;;AAMAlI,EAAAA,YAAY;AACV,MADU;AAEV,cAAM;AACJ,QAAI,CAAC6H,QAAD,IAAarN,QAAb,IAAyB,CAACL,QAA9B,EAAwC;AACtC;AACD;;AAED,QAAI6N,QAAQ,KAAK,MAAb,IAAuBA,QAAQ,KAAK,GAAxC,EAA6C;AAC3C;AACD;;AAED,QAAIO,YAAY,CAACxJ,MAAb,KAAwB,CAA5B,EAA+B;AAC7B;AACD;;AAED,QAAM8J,OAAO;AACRN,IAAAA,YADQ;AAEXxJ,MAAAA,MAAM,EAAEwJ,YAAY,CAACxJ,MAAb,GAAsB,CAFnB;AAGXI,MAAAA,IAAI,EAAEoJ,YAAY,CAACpJ,IAAb,GAAoB,CAHf,GAAb;;;AAMA0I,IAAAA,QAAQ,CAACC,mBAAmB,CAACe,OAAD,CAApB,EAA+BvO,UAA/B,CAAR;AACD,GAtBS;AAuBVJ,EAAAA,GAvBU,CAAZ;;;AA0BA8F,EAAAA,YAAY;AACV,YADU;AAEV,cAAM;AACJ,QAAI,CAAC6H,QAAD,IAAa,CAACE,WAAd,IAA6BvN,QAA7B,IAAyC,CAACL,QAA9C,EAAwD;AACtD;AACD;;AAED;AACEoO,IAAAA,YAAY,CAACpJ,IAAb,KAAsBoJ,YAAY,CAACxJ,MAAnC;AACAwJ,IAAAA,YAAY,CAAC5G,KAAb,KAAuB,CAFzB;AAGE;AACA;AACD;;AAED,QAAMkH,OAAO;AACRN,IAAAA,YADQ;AAEXpJ,MAAAA,IAAI,EAAEoJ,YAAY,CAACpJ,IAAb,GAAoB,CAFf;AAGXwC,MAAAA,KAAK,EAAE4G,YAAY,CAAC5G,KAAb,GAAqB,CAHjB,GAAb;;;AAMAkG,IAAAA,QAAQ,CAACC,mBAAmB,CAACe,OAAD,CAApB,EAA+BvO,UAA/B,CAAR;AACD,GArBS;AAsBVJ,EAAAA,GAtBU,CAAZ;;;AAyBA8F,EAAAA,YAAY;AACV,QADU;AAEV,cAAM;AACJ,QAAI,CAAC6H,QAAD,IAAarN,QAAb,IAAyB,CAACL,QAA9B,EAAwC;AACtC;AACD;;AAED,QAAI6N,QAAQ,KAAK,MAAb,IAAuBA,QAAQ,KAAK,GAAxC,EAA6C;AAC3C;AACD;;AAED,QAAInJ,IAAI,CAACmD,KAAL,CAAWuG,YAAY,CAACpJ,IAAxB,KAAiCuI,IAAI,CAACtG,gBAAL,GAAwB,CAA7D,EAAgE;AAC9D;AACD;;AAED,QAAMyH,OAAO;AACRN,IAAAA,YADQ;AAEXxJ,MAAAA,MAAM,EAAEwJ,YAAY,CAACxJ,MAAb,GAAsB,CAFnB;AAGXI,MAAAA,IAAI,EAAEoJ,YAAY,CAACpJ,IAAb,GAAoB,CAHf,GAAb;;;AAMA0I,IAAAA,QAAQ,CAACC,mBAAmB,CAACe,OAAD,CAApB,EAA+BvO,UAA/B,CAAR;AACD,GAtBS;AAuBVJ,EAAAA,GAvBU,CAAZ;;;AA0BA8F,EAAAA,YAAY;AACV,cADU;AAEV,cAAM;AACJ,QAAI,CAAC6H,QAAD,IAAa,CAACE,WAAd,IAA6BvN,QAA7B,IAAyC,CAACL,QAA9C,EAAwD;AACtD;AACD;;AAED,QAAI6N,QAAQ,KAAK,MAAb,IAAuBA,QAAQ,KAAK,GAAxC,EAA6C;AAC3C;AACD;;AAED,QAAInJ,IAAI,CAACmD,KAAL,CAAWuG,YAAY,CAACpJ,IAAxB,KAAiCuI,IAAI,CAACtG,gBAAL,GAAwB,CAA7D,EAAgE;AAC9D;AACD;;AAED,QAAMyH,OAAO;AACRN,IAAAA,YADQ;AAEX5G,MAAAA,KAAK,EAAE4G,YAAY,CAAC5G,KAAb,GAAqB,CAFjB;AAGXxC,MAAAA,IAAI,EAAEoJ,YAAY,CAACpJ,IAAb,GAAoB,CAHf,GAAb;;;AAMA0I,IAAAA,QAAQ,CAACC,mBAAmB,CAACe,OAAD,CAApB,EAA+BvO,UAA/B,CAAR;AACD,GAtBS;AAuBVJ,EAAAA,GAvBU,CAAZ;;;AA0BA,MAAM4O,UAAiC,GAAG/I,iBAAW;AACnD,YAAC/E,KAAD,SAAqB,KAAXU,CAAW,SAAXA,CAAW,CAARD,CAAQ,SAARA,CAAQ;AACnB,QAAIuM,QAAQ,KAAK,MAAb,IAAuBxN,QAA3B,EAAqC;AACnC;AACD;;AAEDQ,IAAAA,KAAK,CAACc,cAAN;AACAd,IAAAA,KAAK,CAACe,eAAN;;AAEA,QAAMgN,OAAO;AACRxJ,IAAAA,IADQ,CAAb;;;AAIA,QAAIyI,QAAQ,KAAK,MAAb,IAAuBA,QAAQ,KAAK,GAAxC,EAA6C;AAC3C,UAAMgB,WAAW,GAAGtN,CAApB;AACA,UAAMuN,WAAW,GAAGD,WAAW,GAAGzJ,IAAI,CAAClD,MAAvC;AACA,UAAM6M,MAAM,GAAGrK,IAAI,CAACI,GAAL,CAAS+J,WAAT,EAAsBC,WAAtB,CAAf;AACA,UAAME,SAAS,GAAGD,MAAM,GAAG3J,IAAI,CAAClD,MAAhC;AACA0M,MAAAA,OAAO,CAAC1J,MAAR,GAAiB8J,SAAjB;AACAJ,MAAAA,OAAO,CAACxN,GAAR,GAAc2N,MAAd;AACD;;AAED,QAAIlB,QAAQ,KAAK,MAAb,IAAuBA,QAAQ,KAAK,GAAxC,EAA6C;AAC3C,UAAMgB,WAAW,GAAGvN,CAApB;AACA,UAAMwN,YAAW,GAAGD,WAAW,GAAGzJ,IAAI,CAACnD,KAAvC;AACA,UAAMgN,OAAO,GAAGvK,IAAI,CAACI,GAAL,CAAS+J,WAAT,EAAsBC,YAAtB,CAAhB;AACA,UAAMI,QAAQ,GAAGD,OAAO,GAAG7J,IAAI,CAACnD,KAAhC;AACA2M,MAAAA,OAAO,CAACzJ,KAAR,GAAgB+J,QAAhB;AACAN,MAAAA,OAAO,CAACvN,IAAR,GAAe4N,OAAf;AACD,KA5BkB;;AA8BQ1B,IAAAA,IAAI,CAAC7F,eAAL,CAAqBkH,OAArB,CA9BR,CA8BXhK,MA9BW,yBA8BXA,MA9BW,CA8BHH,MA9BG,yBA8BHA,MA9BG;;AAgCnB,QAAMiK,OAAO;AACRnD,IAAAA,IADQ;AAEX9G,MAAAA,MAAM,EAAEoJ,QAAQ,KAAK,GAAb,GAAmBtC,IAAI,CAAC9G,MAAxB,GAAiCA,MAF9B;AAGXI,MAAAA,IAAI,EAAEgJ,QAAQ,KAAK,GAAb,GAAmBpJ,MAAM,GAAG8G,IAAI,CAAChE,KAAd,GAAsB,CAAzC,GAA6CgE,IAAI,CAAC1G,IAH7C;AAIXD,MAAAA,MAAM,EAAEiJ,QAAQ,KAAK,GAAb,GAAmBtC,IAAI,CAAC3G,MAAxB,GAAiCA,MAJ9B;AAKXI,MAAAA,IAAI,EAAE6I,QAAQ,KAAK,GAAb,GAAmBjJ,MAAM,GAAG2G,IAAI,CAAC/D,KAAd,GAAsB,CAAzC,GAA6C+D,IAAI,CAACvG,IAL7C,GAAb;;;AAQAmK,IAAAA,SAAS;AACPT,IAAAA,OAAO,CAAClH,KAAR,KAAkB+D,IAAI,CAAC/D,KAAvB,IAAgCkH,OAAO,CAACnH,KAAR,KAAkBgE,IAAI,CAAChE,KADhD,+DAAT;;;;AAKA8G,IAAAA,eAAe,CAACK,OAAD,CAAf;AACD,GA/CkD;AAgDnD,GAACnB,IAAD,EAAOnI,IAAP,EAAayI,QAAb,EAAuBxN,QAAvB,EAAiCkL,IAAjC,EAAuC8C,eAAvC,CAhDmD,CAArD;;;AAmDA,MAAMe,YAA4B,GAAGxJ,iBAAW;AAC9C,YAAC/E,KAAD,EAAQwO,SAAR,EAAmBC,IAAnB,EAAyBC,KAAzB,EAAmC;AACjC,QAAI,CAAC3B,WAAD,IAAgBvN,QAApB,EAA8B;AAC5B;AACD;;AAEDQ,IAAAA,KAAK,CAACc,cAAN;AACAd,IAAAA,KAAK,CAACe,eAAN;;AAEA,QAAI2N,KAAK,CAACrN,MAAN,KAAiB,CAArB,EAAwB;AACtB;AACD;;AAED,QAAMsN,OAAO,GAAG;AACdtN,MAAAA,MAAM,EAAEqN,KAAK,CAACrN,MAAN,GAAekD,IAAI,CAAClD,MADd;AAEdD,MAAAA,KAAK,EAAEsN,KAAK,CAACtN,KAAN,GAAcmD,IAAI,CAACnD,KAAnB,GAA2B,EAFpB,EAAhB;;;AAKA,QAAM2M,OAAO;AACRN,IAAAA,YADQ;AAERkB,IAAAA,OAFQ,CAAb;;;AAKA,QAAIH,SAAS,CAACI,QAAV,CAAmB,KAAnB,CAAJ,EAA+B;AAC7Bb,MAAAA,OAAO,CAACxN,GAAR,IAAemO,KAAK,CAACrN,MAArB;AACD,KAFD,MAEO,IAAImN,SAAS,CAACI,QAAV,CAAmB,QAAnB,CAAJ,EAAkC;AACvCb,MAAAA,OAAO,CAAC1J,MAAR,IAAkBqK,KAAK,CAACrN,MAAxB;AACD,KA1BgC;;AA4BDqL,IAAAA,IAAI,CAAC7F,eAAL,CAAqBkH,OAArB,CA5BC,CA4BzBpH,KA5ByB,0BA4BzBA,KA5ByB,CA4BlB5C,MA5BkB,0BA4BlBA,MA5BkB,CA4BVI,IA5BU,0BA4BVA,IA5BU;AA6BjC,QAAM0J,OAAO;AACRnD,IAAAA,IADQ;AAEX/D,MAAAA,KAAK,EAALA,KAFW;AAGX5C,MAAAA,MAAM,EAANA,MAHW;AAIXI,MAAAA,IAAI,EAAJA,IAJW,GAAb;;;AAOAqJ,IAAAA,eAAe,CAACK,OAAD,CAAf;AACD,GAtC6C;AAuC9C,GAACnB,IAAD,EAAOnI,IAAP,EAAa/E,QAAb,EAAuBuN,WAAvB,EAAoCS,eAApC,EAAqD9C,IAArD,EAA2D+C,YAA3D,CAvC8C,CAAhD;;;AA0CA,MAAMrO,YAAY,GAAG2F,iBAAW,CAAC,YAAM;AACrC,QAAI,CAAC8H,QAAD,IAAarN,QAAjB,EAA2B;AACzB;AACD;;AAEDqN,IAAAA,QAAQ,CAACgC,SAAD,EAAYvP,UAAZ,CAAR;AACD,GAN+B,EAM7B,CAACuN,QAAD,EAAWrN,QAAX,EAAqBF,UAArB,CAN6B,CAAhC;;AAQA,MAAMwP,aAAa,GAAG/J,iBAAW,CAAC,YAAM;AACtC,QAAI,CAACkI,cAAD,IAAmBzN,QAAvB,EAAiC;AAC/B;AACD;;AAEDyN,IAAAA,cAAc,CAAC,CAAC3N,UAAD,EAAaD,SAAb,CAAD,CAAd;AACD,GANgC,EAM9B,CAAC4N,cAAD,EAAiBzN,QAAjB,EAA2BF,UAA3B,EAAuCD,SAAvC,CAN8B,CAAjC;;AAQA,MAAM0P,aAAa,GAAGhK,iBAAW,CAAC,YAAM;AACtC,QAAI,CAACuF,OAAD,IAAY9K,QAAZ,IAAwB,CAACL,QAA7B,EAAuC;AACrC;AACD;;AAEDmL,IAAAA,OAAO,CAAC,CAAChL,UAAD,EAAaD,SAAb,CAAD,CAAP;AACD,GANgC,EAM9B,CAACiL,OAAD,EAAUhL,UAAV,EAAsBE,QAAtB,EAAgCL,QAAhC,EAA0CE,SAA1C,CAN8B,CAAjC;;AAQA2F,EAAAA,YAAY,CAAC,OAAD,EAAU+J,aAAV,EAAyB7P,GAAzB,CAAZ;;AAEA,MAAM8P,aAAa,GAAGtB,aAAO;AAC3B;AACEnO,MAAAA,OAAO,CAAC0P,MAAR;AACI1P,MAAAA,OAAO,CAAC0P,MAAR;AACGC,MAAAA,KADH,CACS,GADT;AAEG7L,MAAAA,GAFH,CAEO,UAAAuJ,SAAS,qBAAQA,SAAR,GAFhB;AAGGV,MAAAA,IAHH,CAGQ,IAHR,CADJ;AAKI2C,MAAAA,SANN,GAD2B;AAQ3B,GAACtP,OAAO,CAAC0P,MAAT,CAR2B,CAA7B;;;AAWA;AACE,iCAAC,SAAD;AACE,MAAA,IAAI,EAAEjC,QADR;AAEE,MAAA,MAAM,EAAE;AACNzM,QAAAA,GAAG,EAAE,CADC;AAEN8D,QAAAA,MAAM,EAAEqI,IAAI,CAACxG,WAAL,GAAmB7E,MAFrB;AAGNb,QAAAA,IAAI,EAAE,CAHA;AAIN8D,QAAAA,KAAK,EAAEoI,IAAI,CAACvG,UAJN,EAFV;;AAQE,MAAA,QAAQ,EAAE,EAAE1F,CAAC,EAAED,IAAL,EAAWE,CAAC,EAAEH,GAAd,EARZ;AASE,MAAA,MAAM,EAAEuN,UATV;AAUE,MAAA,MAAM,EAAEF,UAVV;AAWE,MAAA,MAAM,EAAEoB,aAXV;AAYE,MAAA,QAAQ,EAAExP,QAZZ;;AAcE,iCAAC,kBAAD;AACE,MAAA,IAAI,EAAC,QADP;AAEE,MAAA,QAAQ,EAAEA,QAFZ;AAGE,MAAA,OAAO,EAAEsP,aAHX;AAIE,MAAA,OAAO,EAAEC,aAJX;AAKE,MAAA,YAAY,EAAE3P,YALhB;AAME,MAAA,SAAS,EAAEC,SANb;AAOE,MAAA,UAAU,EAAEC,UAPd;AAQE,MAAA,QAAQ,EAAEH,QARZ;AASE,MAAA,OAAO,EAAEI,OATX;AAUE,MAAA,SAAS,EAAEkL,QAAQ,CAAC;AAClBlL,MAAAA,OAAO,CAACS,KADU;AAElBT,MAAAA,OAAO,CAAC,aAAD,CAFW;AAGlBqN,MAAAA,SAHkB;;AAKfrN,MAAAA,OAAO,CAAC,cAAD,CALQ,EAKW,CAACC,QAAD,IAAawN,QAAQ,KAAK,MALrC;AAMfzN,MAAAA,OAAO,CAAC,aAAD,CANQ,EAMUC,QANV,UAAD,CAVrB;;;AAmBE,MAAA,GAAG,EAAEN,GAnBP;AAoBE,MAAA,KAAK,EAAE;AACLkC,QAAAA,KAAK,EAAEA,KAAK,GAAG,CADV;AAELC,QAAAA,MAAM,EAAEA,MAAM,GAAG,CAFZ;AAGL8N,QAAAA,UAAU,EAAE,KAHP;AAILC,QAAAA,SAAS,EAAE,KAJN,EApBT;;;AA2BE,iCAAC,SAAD;AACE,MAAA,IAAI,oCAAO3B,YAAP,SAAqBrM,KAAK,EAAEqM,YAAY,CAACrM,KAAb,GAAqB,CAAjD,GADN;AAEE,MAAA,GAAG,YAAK9B,UAAL,cAAmBD,SAAnB,cAAgCsN,SAAS,CAAClB,MAA1C,cAAoDgC,YAAY,CAAClN,GAAjE,cAAwEkN,YAAY,CAACjN,IAArF,CAFL;AAGE,MAAA,QAAQ,EAAE+N,YAHZ;AAIE,MAAA,YAAY,EAAEX,UAJhB;AAKE,MAAA,kBAAkB,EAAErO,OAAO,CAAC,gBAAD,CAL7B;AAME,MAAA,MAAM;AACJwN,MAAAA,WAAW,IAAI,CAACvN,QAAhB;AACI;AACEe,QAAAA,GAAG,EAAE,IADP;AAEE8D,QAAAA,MAAM,EAAE,IAFV,EADJ;;AAKI,QAZR;;AAcE,MAAA,aAAa,EAAE;AACbA,QAAAA,MAAM,EAAEoG,QAAQ,CAAC,CAAClL,OAAO,CAAC0P,MAAT,EAAiB1P,OAAO,CAAC8E,MAAzB,CAAD,CADH;AAEbgL,QAAAA,UAAU,EAAE9P,OAAO,CAAC0P,MAFP;AAGbK,QAAAA,WAAW,EAAE/P,OAAO,CAAC0P,MAHR;AAIbzO,QAAAA,IAAI,EAAEjB,OAAO,CAAC0P,MAJD;AAKb3K,QAAAA,KAAK,EAAE/E,OAAO,CAAC0P,MALF;AAMb1O,QAAAA,GAAG,EAAEkK,QAAQ,CAAC,CAAClL,OAAO,CAAC0P,MAAT,EAAiB1P,OAAO,CAACgB,GAAzB,CAAD,CANA;AAObgP,QAAAA,OAAO,EAAEhQ,OAAO,CAAC0P,MAPJ;AAQbO,QAAAA,QAAQ,EAAEjQ,OAAO,CAAC0P,MARL,EAdjB;;;AAyBE,iCAAC,qBAAD;AACE,MAAA,KAAK,EAAE7N,KADT;AAEE,MAAA,MAAM,EAAEC,MAFV;AAGE,MAAA,OAAO,EAAE9B,OAHX;AAIE,MAAA,SAAS,EAAEoO,iBAJb;AAKE,MAAA,OAAO,EAAEvB,OALX;AAME,MAAA,KAAK,EAAEC,KANT,GAzBF,CA3BF,CAdF,CADF;;;;;;AA+ED,CArXuB,CAAjB;;ACYA,IAAMoD,QAAQ,gBAAG1Q,cAAK,CAACC,IAAN,CAAW,SAASyQ,QAAT;;;;;;;;;;;;;;;;;;;;;;AAsBhB,KArBjBlQ,OAqBiB,QArBjBA,OAqBiB,CApBjBgK,MAoBiB,QApBjBA,MAoBiB,CAnBjBmD,IAmBiB,QAnBjBA,IAmBiB,CAlBjBE,SAkBiB,QAlBjBA,SAkBiB,CAjBjBC,QAiBiB,QAjBjBA,QAiBiB,CAhBjBE,WAgBiB,QAhBjBA,WAgBiB,CAfjB2C,WAeiB,QAfjBA,WAeiB,CAdjB1C,QAciB,QAdjBA,QAciB,CAbjBF,mBAaiB,QAbjBA,mBAaiB,CAZjB6C,gBAYiB,QAZjBA,gBAYiB,CAXjB1C,cAWiB,QAXjBA,cAWiB,CAVjBE,qBAUiB,QAVjBA,qBAUiB,CATjBE,kBASiB,QATjBA,kBASiB,CARjB/C,OAQiB,QARjBA,OAQiB,CAPjB4C,WAOiB,QAPjBA,WAOiB,CANjB1N,QAMiB,QANjBA,QAMiB;AACjB;AACE,0CAAK,SAAS,EAAED,OAAO,CAAC,aAAD,CAAvB;AACGgK,IAAAA,MAAM,CAAClG,GAAP,CAAW,UAACiI,SAAD,EAAYhM,UAAZ,EAA2B;AACrC,UAAMsQ,MAAM,GAAG5H,QAAQ,CAACsD,SAAS,CAAC,CAAD,CAAV,EAAe,IAAIxB,IAAJ,EAAf,CAAvB;AACA;AACE,+CAAM,GAAG,EAAExK,UAAX;AACGqQ,QAAAA,gBAAgB,CAACrE,SAAD,CAAhB,CAA4BjI,GAA5B,CAAgC,UAACqH,IAAD,EAAOrL,SAAP,EAAkBsN,SAAlB,EAAgC;AAC/D,cAAMkD,aAAa,GAAGnF,IAAI,CAAC9D,MAAL,KAAgB,QAAtC;AACA,cAAIiJ,aAAJ,EAAmB;AAChBH,YAAAA,WAAW,GAAG,KAAf,EAAwB3C,WAAW,GAAG,KAAtC;AACD;AACD;AACE,yCAAC,QAAD;AACE,cAAA,OAAO,EAAExN,OADX;AAEE,cAAA,cAAc,EAAE0N,cAFlB;AAGE,cAAA,GAAG,YAAK3N,UAAL,cAAmBiK,MAAM,CAACkC,MAA1B,cAAoCpM,SAApC,cAAiDsN,SAAS,CAAClB,MAA3D,CAHL;AAIE,cAAA,WAAW,EAAEsB,WAJf;AAKE,cAAA,QAAQ,EAAEC,QALZ;AAME,cAAA,WAAW,EAAE0C,WANf;AAOE,cAAA,mBAAmB,EAAE5C,mBAPvB;AAQE,cAAA,SAAS,EAAEH,SARb;AASE,cAAA,SAAS,EAAEtN,SATb;AAUE,cAAA,UAAU,EAAEC,UAVd;AAWE,cAAA,SAAS,EAAEmL,QAAQ,CAAC;AAClBmC,cAAAA,SADkB;;AAGfrN,cAAAA,OAAO,CAAC,SAAD,CAHQ,EAGMqQ,MAHN;AAIfrQ,cAAAA,OAAO,CAAC,WAAD,CAJQ,EAIQsQ,aAJR,UAAD,CAXrB;;;AAkBE,cAAA,QAAQ,EAAEhD,QAlBZ;AAmBE,cAAA,OAAO,EAAEvC,OAnBX;AAoBE,cAAA,IAAI,EAAEoC,IApBR;AAqBE,cAAA,IAAI,EAAEhC,IArBR;AAsBE,cAAA,WAAW,EAAEwC,WAtBf;AAuBE,cAAA,qBAAqB,EAAEC,qBAvBzB;AAwBE,cAAA,kBAAkB,EAAEE,kBAxBtB;AAyBE,cAAA,QAAQ,EAAEwC,aAzBZ,GADF;;;AA6BD,SAlCA,CADH,CADF;;;AAuCD,KAzCA,CADH,CADF;;;AA8CD,CArEuB,CAAjB;;ACcP,IAAMC,WAAW,GAAG,KAAK,EAAzB;AACA,IAAMC,mBAAmB,GAAG,CAA5B;AACA,IAAMvI,KAAK,GAAG,SAARA,KAAQ,CAAC/G,CAAD,UAAuBA,CAAC,GAAGsP,mBAA3B,EAAd;AACA,IAAMzH,GAAG,GAAG,SAANA,GAAM,CAAC0H,IAAD,UAA0BA,IAAI,GAAGD,mBAAjC,EAAZ;AACA,IAAME,WAAW,GAAG,CAAC,KAAD,EAAQ,WAAR,CAApB;;AAEA,IAAaC,iBAAiB,gBAAGnR,cAAK,CAACC,IAAN,CAAW,SAASkR,iBAAT;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8DzC,kCA7DDC,iBA6DC,CA7DDA,iBA6DC,sCA7DmB,EA6DnB,sDA5DDC,2BA4DC,CA5DDA,2BA4DC,sCA5D6B,EA4D7B,sDA3DDC,kBA2DC,CA3DDA,kBA2DC,sCA3DoBD,2BA2DpB,yBA1DD9O,KA0DC,QA1DDA,KA0DC,CAzDDgP,QAyDC,QAzDDA,QAyDC,wBAxDDnJ,UAwDC,CAxDWoJ,WAwDX,gCAxDyB,IAAIzG,IAAJ,EAwDzB,4CAvDD0G,YAuDC,CAvDDA,YAuDC,kCAvDc,CAAC,CAAD,EAAI,EAAJ,CAuDd,qBAtDDjR,OAsDC,QAtDDA,OAsDC,CArDDqN,SAqDC,QArDDA,SAqDC,CApDDC,QAoDC,QApDDA,QAoDC,CAnDD4D,YAmDC,QAnDDA,YAmDC,CAlDDtD,qBAkDC,QAlDDA,qBAkDC,CAjDDE,kBAiDC,QAjDDA,kBAiDC,CAhDD7N,QAgDC,QAhDDA,QAgDC;AACkB8M,EAAAA,gBAAU,CAAC5M,gBAAD,CAD5B,CACOE,MADP,eACOA,MADP;AAED,MAAMuH,UAAU,GAAGuG,aAAO,CAAC,oBAAMhF,UAAU,CAAC6H,WAAD,CAAhB,EAAD,EAAgC,CAACA,WAAD,CAAhC,CAA1B;AACA,MAAMnK,gBAAgB,GAAG0J,WAAW,GAAGK,iBAAvC;AACA,MAAM9J,kBAAkB,GAAG,IAAI0J,mBAA/B;AACA,MAAM7I,KAAK,GAAGnC,iBAAW,CAAC,UAACrE,CAAD,UAAeA,CAAC,GAAGyP,iBAAnB,EAAD,EAAuC;AAC9DA,EAAAA,iBAD8D,CAAvC,CAAzB;;AAGA,MAAM5H,GAAG,GAAGxD,iBAAW,CAAC,UAAC2L,IAAD,UAA0BA,IAAI,GAAGP,iBAAjC,EAAD,EAAqD;AAC1EA,EAAAA,iBAD0E,CAArD,CAAvB;;;AAIA,MAAMQ,oBAAoB,GAAGjD,aAAO,CAAC,YAAM;AACzC,WAAOpG,qCAAqC,CAAC;AAC3CH,MAAAA,UAAU,EAAVA,UAD2C;AAE3CI,MAAAA,KAAK,EAAEL,KAFoC;AAG3CO,MAAAA,KAAK,EAAED,KAHoC,EAAD,CAA5C;;AAKD,GANmC,EAMjC,CAACN,KAAD,EAAQC,UAAR,CANiC,CAApC;;AAQA,MAAMyJ,yBAAyB,GAAG7L,iBAAW;AAC3C,YAAC2F,IAAD,EAA+B;AACJiG,IAAAA,oBAAoB,CAACjG,IAAD,CADhB,0DACtBQ,KADsB,6BACZ2F,IADY;AAE7BvC,IAAAA,SAAS;AACPuC,IAAAA,IAAI,CAACpF,MAAL,KAAgB,CADT;AAEsEoF,IAAAA,IAAI,CAACpF,MAF3E,mFAAT;;;AAKA,WAAOP,KAAP;AACD,GAT0C;AAU3C,GAACyF,oBAAD,CAV2C,CAA7C;;;AAaA,MAAMhB,gBAAgB,GAAGjC,aAAO,CAAC,YAAM;AACrC,WAAOrF,yBAAyB,CAAC;AAC/BlB,MAAAA,UAAU,EAAVA,UAD+B;AAE/Bf,MAAAA,gBAAgB,EAAhBA,gBAF+B;AAG/BC,MAAAA,kBAAkB,EAAlBA,kBAH+B;AAI/BiC,MAAAA,GAAG,EAAHA,GAJ+B;AAK/BC,MAAAA,GAAG,EAAHA,GAL+B,EAAD,CAAhC;;AAOD,GAR+B,EAQ7B,CAACA,GAAD,EAAMnC,gBAAN,EAAwBC,kBAAxB,EAA4Cc,UAA5C,CAR6B,CAAhC;;AAUA,MAAM2J,IAAI,GAAGzL,YAAM,CAAwB,IAAxB,CAAnB;AACA,MAAM0L,MAAM,GAAG1L,YAAM,CAAwB,IAAxB,CAArB;;AAEA,MAAM2L,IAAI,GAAGC,gBAAgB,CAACF,MAAD,CAA7B,CA9CC;;;;;;;AAqDG/P,EAAAA,eAAe,CAAC+P,MAAD,EAASvR,QAAT,CArDlB,CAgDQ0R,YAhDR,oBAgDC5P,KAhDD,CAiDCE,GAjDD,oBAiDCA,GAjDD,CAkDCE,UAlDD,oBAkDCA,UAlDD,CAmDCE,mBAnDD,oBAmDCA,mBAnDD,CAoDCkD,MApDD,oBAoDCA,MApDD;;;;AAyDG5D,EAAAA,cAAQ,CAA4B,IAA5B,CAzDX,2CAuDCiQ,eAvDD,iBAwDCC,kBAxDD;;AA2DkDlQ,EAAAA,cAAQ,CAAC,CAAC,CAAD,EAAI,CAAJ,CAAD,CA3D1D,2FA2DOgF,WA3DP,kBA2DoBC,UA3DpB,kBA2DiCkL,aA3DjC;;AA6DD,MAAMC,sBAAsB,GAAI,KAAK,EAAN,GAAYlB,2BAA3C;;AAEArO,EAAAA,eAAS;AACP,WAASwP,2CAAT,GAAuD;AACrD,QAAI,CAACR,MAAM,CAACjP,OAAZ,EAAqB;AACnBuP,MAAAA,aAAa,CAAC,CAAC,CAAD,EAAI,CAAJ,CAAD,CAAb;AACA;AACD;;AAEDA,IAAAA,aAAa,CAAC,CAACN,MAAM,CAACjP,OAAP,CAAesC,YAAhB,EAA8B2M,MAAM,CAACjP,OAAP,CAAeoC,WAA7C,CAAD,CAAb;AACD,GARM;AASP,GAAC8M,IAAD,EAAOM,sBAAP,CATO,CAAT;;;AAYA,MAAM5E,IAAI,GAAGgB,aAAO,CAAc,YAAM;AACtC,QAAIxH,WAAW,KAAK,IAAhB,IAAwBC,UAAU,KAAK,IAA3C,EAAiD;AAC/C,aAAO,IAAP;AACD;;AAED,WAAOF,UAAU,CAAC;AAChBC,MAAAA,WAAW,EAAXA,WADgB;AAEhBC,MAAAA,UAAU,EAAVA,UAFgB;AAGhBE,MAAAA,kBAAkB,EAAlBA,kBAHgB;AAIhBD,MAAAA,gBAAgB,EAAhBA,gBAJgB,EAAD,CAAjB;;AAMD,GAXmB,EAWjB,CAACF,WAAD,EAAcC,UAAd,EAA0BE,kBAA1B,EAA8CD,gBAA9C,CAXiB,CAApB;;AAaArE,EAAAA,eAAS;AACP,WAASyP,oCAAT,GAAgD;AAC9C,QAAI9E,IAAI,KAAK,IAAT,IAAiBlL,GAAG,KAAK,IAA7B,EAAmC;AACjC4P,MAAAA,kBAAkB,CAAC,IAAD,CAAlB;AACA;AACD;;AAED,QAAM1G,IAAI,GAAGgC,IAAI,CAAC7F,eAAL,CAAqBrF,GAArB,CAAb;AACA,QAAMiQ,UAAU,GAAGd,oBAAoB,CAACjG,IAAD,CAAvC;AACA,QAAM1K,KAAK,GAAGyR,UAAd;AACAL,IAAAA,kBAAkB,CAACpR,KAAD,CAAlB;AACD,GAXM;AAYP,GAACwB,GAAD,EAAMkL,IAAN,EAAYiE,oBAAZ,EAAkCpI,GAAlC,CAZO,CAAT,CAxFC;;;AAuGwDrH,EAAAA,cAAQ;;AAE/D,GAAC,IAAD,EAAO,IAAP,CAF+D,CAvGhE,2FAuGOwQ,gBAvGP,kBAuGyBC,eAvGzB,kBAuG2CC,SAvG3C;;AA2GD7P,EAAAA,eAAS;AACP,WAAS8P,mCAAT,GAA+C;AAC7C,QAAIrS,QAAJ,EAAc;AACZ;AACD;;AAED,QAAIoC,mBAAJ,EAAyB;AACvBiL,MAAAA,QAAQ,CAAC9C,WAAW,CAACuG,QAAD,EAAWa,eAAX,CAAZ,CAAR;AACAC,MAAAA,kBAAkB,CAAC,IAAD,CAAlB;AACD;AACF,GAVM;AAWP;AACExP,EAAAA,mBADF;AAEEpC,EAAAA,QAFF;AAGEqN,EAAAA,QAHF;AAIEuE,EAAAA,kBAJF;AAKED,EAAAA,eALF;AAMEb,EAAAA,QANF,CAXO,CAAT;;;;AAqBAvO,EAAAA,eAAS;AACP,WAAS+P,6BAAT,GAAyC;AACvC,QAAIX,eAAe,KAAK,IAAxB,EAA8B;AAC5BS,MAAAA,SAAS,CAAC,CAAC,IAAD,EAAO,IAAP,CAAD,CAAT;AACD;AACF,GALM;AAMP,GAACT,eAAD,CANO,CAAT;;;AASA,MAAMY,iBAAiB,GAAGhN,iBAAW;AACnC,YAACiN,YAAD,EAAe1S,UAAf,EAA8B;AAC5B,QAAIE,QAAJ,EAAc;AACZ;AACD;;AAED,QAAI,CAAC8Q,QAAD,IAAa0B,YAAjB,EAA+B;AAC7BnF,MAAAA,QAAQ,CAAC,CAACmF,YAAD,CAAD,CAAR;;AAEA;AACD;;AAED,QAAIC,WAAW,sBAAO3B,QAAP,CAAf;;AAEA,QAAI,CAAC0B,YAAL,EAAmB;AACjBC,MAAAA,WAAW,CAACC,MAAZ,CAAmB5S,UAAnB,EAA+B,CAA/B;AACD,KAFD,MAEO;AACL;AACE6S,MAAAA,WAAW,CAACH,YAAY,CAAC,CAAD,CAAb,EAAkBC,WAAW,CAAC3S,UAAD,CAAX,CAAwB,CAAxB,CAAlB,CAAX;AACA6S,MAAAA,WAAW,CAACH,YAAY,CAAC,CAAD,CAAb,EAAkBC,WAAW,CAAC3S,UAAD,CAAX,CAAwB,CAAxB,CAAlB,CAFb;AAGE;AACA;AACD;AACD2S,MAAAA,WAAW,CAAC3S,UAAD,CAAX,GAA0B0S,YAA1B;AACD;;AAEDC,IAAAA,WAAW,GAAGtI,WAAW,CAACsI,WAAD,CAAzB;;AAEApF,IAAAA,QAAQ,CAACoF,WAAD,CAAR;AACD,GA7BkC;AA8BnC,GAAC3B,QAAD,EAAWzD,QAAX,EAAqBrN,QAArB,CA9BmC,CAArC;;;AAiCAwF,EAAAA,YAAY;AACV,OADU;AAEV,WAASoN,WAAT,GAAuB;AACrB,QAAIjB,eAAJ,EAAqB;AACnBrM,MAAAA,MAAM;AACP;AACF,GANS;AAOVS,EAAAA,QAPU,CAAZ;;;AAUA,MAAM2H,WAAW,GAAGnI,iBAAW;AAC7B,mBAA+B,KAA5BzF,UAA4B,SAA5BA,UAA4B,CAAhBD,SAAgB,SAAhBA,SAAgB;AAC7B,WAAOC,UAAU,KAAKoS,gBAAf,IAAmCrS,SAAS,KAAKsS,eAAxD;AACD,GAH4B;AAI7B,GAACA,eAAD,EAAkBD,gBAAlB,CAJ6B,CAA/B;;;AAOA,MAAMtS,YAAY,GAAG2F,iBAAW;AAC9B,YAAClE,CAAD,EAA8B;AAC5B,QAAI6Q,gBAAgB,KAAK,IAArB,IAA6BlS,QAAjC,EAA2C;AACzC;AACD;;AAEDqB,IAAAA,CAAC,CAACC,cAAF;AACAD,IAAAA,CAAC,CAACE,eAAF;AACAgR,IAAAA,iBAAiB,CAAClD,SAAD,EAAY6C,gBAAZ,CAAjB;AACD,GAT6B;AAU9B,GAACA,gBAAD,EAAmBlS,QAAnB,EAA6BuS,iBAA7B,CAV8B,CAAhC;;;AAaA/M,EAAAA,YAAY,CAACiL,WAAD,EAAc7Q,YAAd,EAA4B0R,IAA5B,CAAZ;;AAEA/O,EAAAA,eAAS;AACP,WAASsQ,iCAAT,GAA6C;AAC3CvN,IAAAA,MAAM;AACP,GAHM;AAIP,GAACkM,IAAD,EAAOlM,MAAP,CAJO,CAAT;;;AAOA,MAAMuF,yBAAyB,GAAGqD,aAAO,CAAC,YAAM;AAC9C,WAAOpG,qCAAqC,CAAC;AAC3CH,MAAAA,UAAU,EAAVA,UAD2C;AAE3CM,MAAAA,KAAK,EAAED,KAFoC;AAG3CD,MAAAA,KAAK,EAAE,eAAA7G,CAAC,UAAIA,CAAC,GAAG0P,2BAAR,EAHmC,EAAD,CAA5C;;AAKD,GANwC,EAMtC,CAACA,2BAAD,EAA8BjJ,UAA9B,CANsC,CAAzC;;AAQApF,EAAAA,eAAS;AACP,WAASuQ,uBAAT,GAAmC;AACjC,QAAI,CAAC/M,QAAQ,CAACgN,aAAd,EAA6B;AAC3B;AACD;;AAED,QAAI,CAACzB,IAAI,CAAChP,OAAN,IAAiB,CAACgP,IAAI,CAAChP,OAAL,CAAa0Q,QAAb,CAAsBjN,QAAQ,CAACgN,aAA/B,CAAtB,EAAqE;AACnE;AACD;;AAEDE,IAAAA,cAAc,CAAClN,QAAQ,CAACgN,aAAV,EAAyB;AACrCG,MAAAA,UAAU,EAAE,WADyB;AAErCC,MAAAA,KAAK,EAAE,SAF8B;AAGrCC,MAAAA,MAAM,EAAE,SAH6B,EAAzB,CAAd;;AAKD,GAfM;AAgBP,GAACtC,QAAD,CAhBO,CAAT,CAzNC;;;AA4OiEpP,EAAAA,cAAQ;AACxE,OADwE,CA5OzE,4CA4OM2R,yBA5ON,iBA4OiCC,4BA5OjC;;;AAgPD/Q,EAAAA,eAAS;AACP,WAASgR,oBAAT,GAAgC;AAC9B,QAAIF,yBAAyB,IAAI,CAAC/B,IAAI,CAAChP,OAAnC,IAA8C,CAAC4K,IAAnD,EAAyD;AACvD;AACD;;AAED,QAAM/E,KAAK,GAAGgI,gBAAgB;AAC5BrG,IAAAA,oBAAoB,CAACgH,QAAD,CAApB,IAAkC;AAChC0C,IAAAA,QAAQ,CAAC7L,UAAD,EAAaqJ,YAAY,CAAC,CAAD,CAAzB,CADwB;AAEhCwC,IAAAA,QAAQ,CAAC7L,UAAD,EAAaqJ,YAAY,CAAC,CAAD,CAAzB,CAFwB;AAGhC,MAHgC,CADN,CAA9B;;;AAOA,QAAMjM,IAAI,GAAGmI,IAAI,CAAClG,eAAL,CAAqBmB,KAAK,CAAC,CAAD,CAA1B,CAAb,CAZ8B;AAatBpH,IAAAA,GAbsB,GAaNgE,IAbM,CAatBhE,GAbsB,CAajB8D,MAbiB,GAaNE,IAbM,CAajBF,MAbiB;;AAe9B,QAAI9D,GAAG,KAAK,CAAR,IAAa8D,MAAM,KAAK,CAA5B,EAA+B;AAC7B;AACD;;AAED;AACA,QAAI,EAAE,cAAcyM,IAAI,CAAChP,OAArB,CAAJ,EAAmC;AACjC;AACD;;AAEDgP,IAAAA,IAAI,CAAChP,OAAL,CAAamR,QAAb,CAAsB,CAAtB,EAAyB1S,GAAzB;;AAEAuS,IAAAA,4BAA4B,CAAC,IAAD,CAA5B;AACD,GA5BM;AA6BP;AACED,EAAAA,yBADF;AAEEnG,EAAAA,IAFF;AAGE4D,EAAAA,QAHF;AAIEE,EAAAA,YAJF;AAKErJ,EAAAA,UALF;AAMEwI,EAAAA,gBANF,CA7BO,CAAT;;;;AAuCA,MAAMuD,UAAmC,GAAGnO,iBAAW;AACrD,YAAA/E,KAAK,EAAI;AACP,QAAI,CAACA,KAAK,CAACmT,MAAN,CAAaX,QAAb,CAAsBjN,QAAQ,CAACgN,aAA/B,CAAL,EAAoD;AAClDX,MAAAA,SAAS,CAAC,CAAC,IAAD,EAAO,IAAP,CAAD,CAAT;AACD;AACF,GALoD;AAMrD,GAACA,SAAD,CANqD,CAAvD;;;AASA,MAAMwB,eAAe,GAAGrO,iBAAW;AACjC,YAACsO,QAAD,EAAmBlJ,SAAnB,UAAyC,UAACnK,KAAD,EAA6B;AACpE,UAAI,CAAC0M,IAAD,IAASlN,QAAb,EAAuB;AACrB;AACD;;AAED,UAAMmH,KAAK,GAAG4B,GAAG,CAAC8H,kBAAD,CAAjB;AACA,UAAM3F,IAAI,GAAG;AACX9G,QAAAA,MAAM,EAAEyP,QADG;AAEXtP,QAAAA,MAAM,EAAEoG,SAFG;AAGXnG,QAAAA,IAAI,EAAEqP,QAHK;AAIXlP,QAAAA,IAAI,EAAEwC,KAAK,GAAGwD,SAJH;AAKXxD,QAAAA,KAAK,EAALA,KALW;AAMXD,QAAAA,KAAK,EAAEb,OAAO,CAACwN,QAAD,EAAWA,QAAX,CANH,EAAb;;;AASA,UAAM5B,UAAU,GAAGd,oBAAoB,CAACjG,IAAD,CAAvC;;AAEA0G,MAAAA,kBAAkB,CAACK,UAAD,CAAlB;;AAEAzR,MAAAA,KAAK,CAACe,eAAN;AACAf,MAAAA,KAAK,CAACc,cAAN;AACD,KArBD,EADiC;AAuBjC,GAAC4L,IAAD,EAAOlN,QAAP,EAAiB+I,GAAjB,EAAsB8H,kBAAtB,EAA0CM,oBAA1C,CAvBiC,CAAnC;;;AA0BA;AACE;AACE,MAAA,GAAG,EAAEG,IADP;AAEE,MAAA,KAAK,EAAExP,KAFT;AAGE,MAAA,MAAM,EAAE4R,UAHV;AAIE,sBAAcxR,UAAU,GAAG,MAAH,GAAYmN,SAJtC;AAKE,MAAA,SAAS,EAAEpE,QAAQ,CAAC;AAClBlL,MAAAA,OAAO,CAACuR,IADU;AAElBvR,MAAAA,OAAO,CAAC+T,KAFU;AAGlB1G,MAAAA,SAHkB;AAIfrN,MAAAA,OAAO,CAAC,WAAD,CAJQ,EAIQmC,UAJR,EAAD,CALrB;;;AAYE,0CAAK,SAAS,EAAEnC,OAAO,CAAC,WAAD,CAAvB;AACE;AACE,yBADF;AAEE,MAAA,SAAS,EAAEkL,QAAQ,CAAC,CAAClL,OAAO,CAACgU,QAAT,EAAmBhU,OAAO,CAAC,aAAD,CAA1B,CAAD,CAFrB;;AAIE,0CAAK,SAAS,EAAEA,OAAO,CAACiU,MAAxB;AACE,0CAAK,SAAS,EAAEjU,OAAO,CAAC,YAAD,CAAvB;AACE,0CAAK,SAAS,EAAEkL,QAAQ,CAAC,CAAClL,OAAO,CAACmL,IAAT,EAAenL,OAAO,CAACkU,KAAvB,CAAD,CAAxB,QADF,CADF,CAJF;;;AASE,0CAAK,SAAS,EAAElU,OAAO,CAACmU,QAAxB;AACE,0CAAK,SAAS,EAAEnU,OAAO,CAAC,YAAD,CAAvB;AACE,0CAAK,SAAS,EAAEA,OAAO,CAAC,WAAD,CAAvB;AACGoU,IAAAA,KAAK,CAACrC,sBAAD,CAAL,CAA8BjO,GAA9B,CAAkC,UAAA8G,SAAS,EAAI;AAC9C;AACE,qCAAC,IAAD;AACE,UAAA,OAAO,EAAE5K,OADX;AAEE,UAAA,yBAAyB,EAAE8K,yBAF7B;AAGE,UAAA,GAAG,EAAEF,SAHP;AAIE,UAAA,SAAS,EAAEA,SAJb;;AAMG,yBAA4B,KAAzBzH,KAAyB,SAAzBA,KAAyB,CAAlB6H,WAAkB,SAAlBA,WAAkB;AAC3B,cAAIA,WAAJ,EAAiB;AACf;AACE,oDAAK,SAAS,EAAEhL,OAAO,CAACqU,IAAxB;AACG3I,cAAAA,MAAM,CAACvI,KAAD,EAAQ,OAAR,EAAiB,EAAE9C,MAAM,EAANA,MAAF,EAAjB,CADT,CADF;;;AAKD;;AAED,iBAAO,IAAP;AACD,SAhBH,CADF;;;AAoBD,KArBA,CADH,CADF,CADF,CATF,CADF;;;;;AAuCE;AACE,MAAA,SAAS,EAAE6K,QAAQ,CAAC;AAClBlL,MAAAA,OAAO,CAAC,YAAD,CADW;AAElBA,MAAAA,OAAO,CAAC,gBAAD,CAFW,CAAD,CADrB;;;AAME;AACE,MAAA,IAAI,EAAC,cADP;AAEE,MAAA,SAAS,EAAEkL,QAAQ,CAAC,CAAClL,OAAO,CAACmU,QAAT,EAAmBnU,OAAO,CAACiU,MAA3B,CAAD,CAFrB;;AAIGG,IAAAA,KAAK,CAAC,CAAD,CAAL,CAAStQ,GAAT,CAAa,UAAAuE,CAAC;AACb;AACE,UAAA,GAAG,EAAEA,CADP;AAEE,UAAA,IAAI,EAAC,cAFP;AAGE,UAAA,SAAS,EAAErI,OAAO,CAAC,YAAD,CAHpB;;AAKE;AACE,UAAA,SAAS,EAAEkL,QAAQ,CAAC;AAClBlL,UAAAA,OAAO,CAACmL,IADU;AAElBnL,UAAAA,OAAO,CAACkU,KAFU;AAGflU,UAAAA,OAAO,CAAC,SAAD,CAHQ,EAGMqQ,MAAM,CAACvI,OAAO,CAACF,UAAD,EAAaS,CAAb,CAAR,CAHZ;;AAKfrI,UAAAA,OAAO,CAAC,YAAD,CALQ,EAKSsU,OAAO,CAACxM,OAAO,CAACF,UAAD,EAAaS,CAAb,CAAR,CALhB,EAAD,CADrB;;;;AAUE;AACGqD,QAAAA,MAAM,CAAC5D,OAAO,CAACF,UAAD,EAAaS,CAAb,CAAR,EAAyB,MAAzB,EAAiC,EAAEhI,MAAM,EAANA,MAAF,EAAjC,CADT,CAVF;;AAaE;AACGqL,QAAAA,MAAM,CAAC5D,OAAO,CAACF,UAAD,EAAaS,CAAb,CAAR,EAAyB,MAAzB,EAAiC,EAAEhI,MAAM,EAANA,MAAF,EAAjC,CADT,CAbF;;AAgBE,+CAAM,SAAS,EAAEL,OAAO,CAACyL,IAAzB;AACGC,QAAAA,MAAM,CAAC5D,OAAO,CAACF,UAAD,EAAaS,CAAb,CAAR,EAAyB,GAAzB,EAA8B,EAAEhI,MAAM,EAANA,MAAF,EAA9B,CADT,CAhBF,CALF,CADa,GAAd,CAJH,CANF,CAvCF;;;;;;;AA+EE,0CAAK,SAAS,EAAEL,OAAO,CAAC,iBAAD,CAAvB;AACGmC,IAAAA,UAAU;AACT,0CAAK,SAAS,EAAEnC,OAAO,CAAC,UAAD,CAAvB,EAAqC,KAAK,EAAE2R,YAA5C;AACGtP,IAAAA,mBAAmB,iBAAI7C,sCAAK,SAAS,EAAEQ,OAAO,CAACuU,KAAxB,GAD1B,CAFJ;;;AAMGpH,IAAAA,IAAI,IAAIyE,eAAR,IAA2BzP,UAA3B;AACC,iCAAC,QAAD;AACE,MAAA,OAAO,EAAEnC,OADX;AAEE,MAAA,gBAAgB,EAAEoQ,gBAFpB;AAGE,MAAA,mBAAmB,EAAEiB,yBAHvB;AAIE,MAAA,SAAS,EAAErR,OAAO,CAAC,qBAAD,CAJpB;AAKE,MAAA,MAAM,EAAEwK,WAAW,CAACuG,QAAD,EAAWa,eAAX,CALrB;AAME,MAAA,IAAI,EAAEzE,IANR;AAOE,MAAA,QAAQ,EAAC,MAPX;AAQE,MAAA,qBAAqB,EAAES,qBARzB;AASE,MAAA,WAAW,EAAED,WATf,GAPJ;;;AAmBGR,IAAAA,IAAI,IAAI,CAACyE,eAAT;AACC,iCAAC,QAAD;AACE,MAAA,OAAO,EAAE5R,OADX;AAEE,MAAA,cAAc,EAAEqS,SAFlB;AAGE,MAAA,gBAAgB,EAAEjC,gBAHpB;AAIE,MAAA,mBAAmB,EAAEiB,yBAJvB;AAKE,MAAA,WAAW,MALb;AAME,MAAA,QAAQ,EAAC,GANX;AAOE,MAAA,WAAW,MAPb;AAQE,MAAA,QAAQ,EAAEmB,iBARZ;AASE,MAAA,OAAO,EAAEtB,YATX;AAUE,MAAA,MAAM,EAAEH,QAVV;AAWE,MAAA,IAAI,EAAE5D,IAXR;AAYE,MAAA,qBAAqB,EAAES,qBAZzB;AAaE,MAAA,kBAAkB,EAAEE,kBAbtB;AAcE,MAAA,WAAW,EAAEH,WAdf;AAeE,MAAA,QAAQ,EAAE1N,QAfZ,GApBJ;;;;AAuCE,0CAAK,GAAG,EAAEuR,MAAV,EAAkB,IAAI,EAAC,MAAvB,EAA8B,SAAS,EAAExR,OAAO,CAACmU,QAAjD;AACGC,IAAAA,KAAK,CAAC,CAAD,CAAL,CAAStQ,GAAT,CAAa,UAAAgQ,QAAQ,EAAI;AACxB,UAAMU,QAAQ,GAAGnE,MAAM,CAACvI,OAAO,CAACF,UAAD,EAAakM,QAAQ,GAAG,CAAxB,CAAR,CAAvB;AACA;AACE;AACE,UAAA,IAAI,EAAC,UADP;AAEE,UAAA,GAAG,EAAEA,QAFP;AAGE,UAAA,SAAS,EAAE9T,OAAO,CAAC,YAAD,CAHpB;;AAKE;AACE,UAAA,SAAS,EAAEkL,QAAQ,CAAC;AAClBlL,UAAAA,OAAO,CAAC,WAAD,CADW;;AAGfA,UAAAA,OAAO,CAAC,SAAD,CAHQ,EAGMwU,QAHN,EAAD,CADrB;;;;AAQGJ,QAAAA,KAAK,CAACrC,sBAAD,CAAL,CAA8BjO,GAA9B,CAAkC,UAAA8G,SAAS,EAAI;AAC9C;AACE,yCAAC,IAAD;AACE,cAAA,OAAO,EAAE5K,OADX;AAEE,cAAA,OAAO;AACL,eAACwU,QAAD;AACIX,cAAAA,eAAe;AACbC,cAAAA,QADa;AAEblJ,cAAAA,SAAS;AACN/D,cAAAA,gBAAgB,GAAGkL,sBADb,CAFI,CADnB;;AAMIzC,cAAAA,SATR;;AAWE,cAAA,yBAAyB,EAAExE,yBAX7B;AAYE,cAAA,GAAG,EAAEF,SAZP;AAaE,cAAA,SAAS,EAAEA,SAbb,GADF;;;AAiBD,SAlBA,CARH,CALF,CADF;;;;AAoCD,KAtCA,CADH,CAvCF,CA/EF,CAZF,CADF;;;;;;AAgLD,CAxiBgC,EAwiB9Bf,OAxiB8B,CAA1B;;;;;;;;;;;;"}